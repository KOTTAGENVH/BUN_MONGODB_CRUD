// @bun
var qX=Object.create;var{defineProperty:Y$,getPrototypeOf:NX,getOwnPropertyNames:X6}=Object;var Z6=Object.prototype.hasOwnProperty;var c=($,W,Y)=>{for(let X of X6(W))if(!Z6.call($,X)&&X!=="default")Y$($,X,{get:()=>W[X],enumerable:!0});if(Y){for(let X of X6(W))if(!Z6.call(Y,X)&&X!=="default")Y$(Y,X,{get:()=>W[X],enumerable:!0});return Y}},v0=($,W,Y)=>{Y=$!=null?qX(NX($)):{};const X=W||!$||!$.__esModule?Y$(Y,"default",{value:$,enumerable:!0}):Y;for(let Z of X6($))if(!Z6.call(X,Z))Y$(X,Z,{get:()=>$[Z],enumerable:!0});return X};var z0=($,W)=>()=>(W||$((W={exports:{}}).exports,W),W.exports);var k8=($,W)=>{for(var Y in W)Y$($,Y,{get:W[Y],enumerable:!0,configurable:!0,set:(X)=>W[Y]=()=>X})};var d8=z0((_7,Q6)=>{var X$=function(){},AX=function($,W,Y){this.fn=$,this.context=W,this.once=Y||!1},T8=function($,W,Y,X,Z){if(typeof Y!=="function")throw new TypeError("The listener must be a function");var J=new AX(Y,X||$,Z),Q=V0?V0+W:W;if(!$._events[Q])$._events[Q]=J,$._eventsCount++;else if(!$._events[Q].fn)$._events[Q].push(J);else $._events[Q]=[$._events[Q],J];return $},b$=function($,W){if(--$._eventsCount===0)$._events=new X$;else delete $._events[W]},G0=function(){this._events=new X$,this._eventsCount=0},MX=Object.prototype.hasOwnProperty,V0="~";if(Object.create){if(X$.prototype=Object.create(null),!new X$().__proto__)V0=!1}G0.prototype.eventNames=function $(){var W=[],Y,X;if(this._eventsCount===0)return W;for(X in Y=this._events)if(MX.call(Y,X))W.push(V0?X.slice(1):X);if(Object.getOwnPropertySymbols)return W.concat(Object.getOwnPropertySymbols(Y));return W};G0.prototype.listeners=function $(W){var Y=V0?V0+W:W,X=this._events[Y];if(!X)return[];if(X.fn)return[X.fn];for(var Z=0,J=X.length,Q=new Array(J);Z<J;Z++)Q[Z]=X[Z].fn;return Q};G0.prototype.listenerCount=function $(W){var Y=V0?V0+W:W,X=this._events[Y];if(!X)return 0;if(X.fn)return 1;return X.length};G0.prototype.emit=function $(W,Y,X,Z,J,Q){var z=V0?V0+W:W;if(!this._events[z])return!1;var B=this._events[z],F=arguments.length,D,S;if(B.fn){if(B.once)this.removeListener(W,B.fn,void 0,!0);switch(F){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,Y),!0;case 3:return B.fn.call(B.context,Y,X),!0;case 4:return B.fn.call(B.context,Y,X,Z),!0;case 5:return B.fn.call(B.context,Y,X,Z,J),!0;case 6:return B.fn.call(B.context,Y,X,Z,J,Q),!0}for(S=1,D=new Array(F-1);S<F;S++)D[S-1]=arguments[S];B.fn.apply(B.context,D)}else{var b=B.length,j;for(S=0;S<b;S++){if(B[S].once)this.removeListener(W,B[S].fn,void 0,!0);switch(F){case 1:B[S].fn.call(B[S].context);break;case 2:B[S].fn.call(B[S].context,Y);break;case 3:B[S].fn.call(B[S].context,Y,X);break;case 4:B[S].fn.call(B[S].context,Y,X,Z);break;default:if(!D)for(j=1,D=new Array(F-1);j<F;j++)D[j-1]=arguments[j];B[S].fn.apply(B[S].context,D)}}}return!0};G0.prototype.on=function $(W,Y,X){return T8(this,W,Y,X,!1)};G0.prototype.once=function $(W,Y,X){return T8(this,W,Y,X,!0)};G0.prototype.removeListener=function $(W,Y,X,Z){var J=V0?V0+W:W;if(!this._events[J])return this;if(!Y)return b$(this,J),this;var Q=this._events[J];if(Q.fn){if(Q.fn===Y&&(!Z||Q.once)&&(!X||Q.context===X))b$(this,J)}else{for(var z=0,B=[],F=Q.length;z<F;z++)if(Q[z].fn!==Y||Z&&!Q[z].once||X&&Q[z].context!==X)B.push(Q[z]);if(B.length)this._events[J]=B.length===1?B[0]:B;else b$(this,J)}return this};G0.prototype.removeAllListeners=function $(W){var Y;if(W){if(Y=V0?V0+W:W,this._events[Y])b$(this,Y)}else this._events=new X$,this._eventsCount=0;return this};G0.prototype.off=G0.prototype.removeListener;G0.prototype.addListener=G0.prototype.on;G0.prefixed=V0;G0.EventEmitter=G0;if(typeof Q6!=="undefined")Q6.exports=G0});var x0=z0((l8)=>{var BX=function($){return G$($)&&Symbol.asyncIterator in $},UX=function($){return G$($)&&Symbol.iterator in $},FX=function($){return ArrayBuffer.isView($)},DX=function($){return $ instanceof Promise},wX=function($){return $ instanceof Uint8Array},jX=function($){return $ instanceof Date&&Number.isFinite($.getTime())},KX=function($,W){return W in $},PX=function($){return G$($)&&o8($.constructor)&&$.constructor.name==="Object"},G$=function($){return $!==null&&typeof $==="object"},OX=function($){return Array.isArray($)&&!ArrayBuffer.isView($)},i8=function($){return $===void 0},m8=function($){return $===null},u8=function($){return typeof $==="boolean"},z6=function($){return typeof $==="number"},SX=function($){return z6($)&&Number.isInteger($)},h8=function($){return typeof $==="bigint"},n8=function($){return typeof $==="string"},o8=function($){return typeof $==="function"},c8=function($){return typeof $==="symbol"},LX=function($){return h8($)||u8($)||m8($)||z6($)||n8($)||c8($)||i8($)};Object.defineProperty(l8,"__esModule",{value:!0});l8.IsValueType=l8.IsSymbol=l8.IsFunction=l8.IsString=l8.IsBigInt=l8.IsInteger=l8.IsNumber=l8.IsBoolean=l8.IsNull=l8.IsUndefined=l8.IsArray=l8.IsObject=l8.IsPlainObject=l8.HasPropertyKey=l8.IsDate=l8.IsUint8Array=l8.IsPromise=l8.IsTypedArray=l8.IsIterator=l8.IsAsyncIterator=void 0;l8.IsAsyncIterator=BX;l8.IsIterator=UX;l8.IsTypedArray=FX;l8.IsPromise=DX;l8.IsUint8Array=wX;l8.IsDate=jX;l8.HasPropertyKey=KX;l8.IsPlainObject=PX;l8.IsObject=G$;l8.IsArray=OX;l8.IsUndefined=i8;l8.IsNull=m8;l8.IsBoolean=u8;l8.IsNumber=z6;l8.IsInteger=SX;l8.IsBigInt=h8;l8.IsString=n8;l8.IsFunction=o8;l8.IsSymbol=c8;l8.IsValueType=LX});var g0=z0((e8)=>{Object.defineProperty(e8,"__esModule",{value:!0});e8.Type=e8.JsonType=e8.JavaScriptTypeBuilder=e8.JsonTypeBuilder=e8.TypeBuilder=e8.TypeBuilderError=e8.TransformEncodeBuilder=e8.TransformDecodeBuilder=e8.TemplateLiteralDslParser=e8.TemplateLiteralGenerator=e8.TemplateLiteralGeneratorError=e8.TemplateLiteralFinite=e8.TemplateLiteralFiniteError=e8.TemplateLiteralParser=e8.TemplateLiteralParserError=e8.TemplateLiteralResolver=e8.TemplateLiteralPattern=e8.TemplateLiteralPatternError=e8.UnionResolver=e8.KeyArrayResolver=e8.KeyArrayResolverError=e8.KeyResolver=e8.ObjectMap=e8.Intrinsic=e8.IndexedAccessor=e8.TypeClone=e8.TypeExtends=e8.TypeExtendsResult=e8.TypeExtendsError=e8.ExtendsUndefined=e8.TypeGuard=e8.TypeGuardUnknownTypeError=e8.ValueGuard=e8.FormatRegistry=e8.TypeBoxError=e8.TypeRegistry=e8.PatternStringExact=e8.PatternNumberExact=e8.PatternBooleanExact=e8.PatternString=e8.PatternNumber=e8.PatternBoolean=e8.Kind=e8.Hint=e8.Optional=e8.Readonly=e8.Transform=void 0;e8.Transform=Symbol.for("TypeBox.Transform");e8.Readonly=Symbol.for("TypeBox.Readonly");e8.Optional=Symbol.for("TypeBox.Optional");e8.Hint=Symbol.for("TypeBox.Hint");e8.Kind=Symbol.for("TypeBox.Kind");e8.PatternBoolean="(true|false)";e8.PatternNumber="(0|[1-9][0-9]*)";e8.PatternString="(.*)";e8.PatternBooleanExact=`^${e8.PatternBoolean}\$`;e8.PatternNumberExact=`^${e8.PatternNumber}\$`;e8.PatternStringExact=`^${e8.PatternString}\$`;var H6;(function($){const W=new Map;function Y(){return new Map(W)}$.Entries=Y;function X(){return W.clear()}$.Clear=X;function Z(B){return W.delete(B)}$.Delete=Z;function J(B){return W.has(B)}$.Has=J;function Q(B,F){W.set(B,F)}$.Set=Q;function z(B){return W.get(B)}$.Get=z})(H6||(e8.TypeRegistry=H6={}));class Y1 extends Error{constructor($){super($)}}e8.TypeBoxError=Y1;var s8;(function($){const W=new Map;function Y(){return new Map(W)}$.Entries=Y;function X(){return W.clear()}$.Clear=X;function Z(B){return W.delete(B)}$.Delete=Z;function J(B){return W.has(B)}$.Has=J;function Q(B,F){W.set(B,F)}$.Set=Q;function z(B){return W.get(B)}$.Get=z})(s8||(e8.FormatRegistry=s8={}));var V;(function($){function W(F){return Array.isArray(F)}$.IsArray=W;function Y(F){return typeof F==="bigint"}$.IsBigInt=Y;function X(F){return typeof F==="boolean"}$.IsBoolean=X;function Z(F){return F===null}$.IsNull=Z;function J(F){return typeof F==="number"}$.IsNumber=J;function Q(F){return typeof F==="object"&&F!==null}$.IsObject=Q;function z(F){return typeof F==="string"}$.IsString=z;function B(F){return F===void 0}$.IsUndefined=B})(V||(e8.ValueGuard=V={}));class a8 extends Y1{}e8.TypeGuardUnknownTypeError=a8;var U;(function($){function W(N){try{return new RegExp(N),!0}catch{return!1}}function Y(N){if(!V.IsString(N))return!1;for(let t=0;t<N.length;t++){const L0=N.charCodeAt(t);if(L0>=7&&L0<=13||L0===27||L0===127)return!1}return!0}function X(N){return Q(N)||X0(N)}function Z(N){return V.IsUndefined(N)||V.IsBigInt(N)}function J(N){return V.IsUndefined(N)||V.IsNumber(N)}function Q(N){return V.IsUndefined(N)||V.IsBoolean(N)}function z(N){return V.IsUndefined(N)||V.IsString(N)}function B(N){return V.IsUndefined(N)||V.IsString(N)&&Y(N)&&W(N)}function F(N){return V.IsUndefined(N)||V.IsString(N)&&Y(N)}function D(N){return V.IsUndefined(N)||X0(N)}function S(N){return _(N,"Any")&&z(N.$id)}$.TAny=S;function b(N){return _(N,"Array")&&N.type==="array"&&z(N.$id)&&X0(N.items)&&J(N.minItems)&&J(N.maxItems)&&Q(N.uniqueItems)&&D(N.contains)&&J(N.minContains)&&J(N.maxContains)}$.TArray=b;function j(N){return _(N,"AsyncIterator")&&N.type==="AsyncIterator"&&z(N.$id)&&X0(N.items)}$.TAsyncIterator=j;function M(N){return _(N,"BigInt")&&N.type==="bigint"&&z(N.$id)&&Z(N.exclusiveMaximum)&&Z(N.exclusiveMinimum)&&Z(N.maximum)&&Z(N.minimum)&&Z(N.multipleOf)}$.TBigInt=M;function P(N){return _(N,"Boolean")&&N.type==="boolean"&&z(N.$id)}$.TBoolean=P;function O(N){return _(N,"Constructor")&&N.type==="Constructor"&&z(N.$id)&&V.IsArray(N.parameters)&&N.parameters.every((t)=>X0(t))&&X0(N.returns)}$.TConstructor=O;function A(N){return _(N,"Date")&&N.type==="Date"&&z(N.$id)&&J(N.exclusiveMaximumTimestamp)&&J(N.exclusiveMinimumTimestamp)&&J(N.maximumTimestamp)&&J(N.minimumTimestamp)&&J(N.multipleOfTimestamp)}$.TDate=A;function w(N){return _(N,"Function")&&N.type==="Function"&&z(N.$id)&&V.IsArray(N.parameters)&&N.parameters.every((t)=>X0(t))&&X0(N.returns)}$.TFunction=w;function I(N){return _(N,"Integer")&&N.type==="integer"&&z(N.$id)&&J(N.exclusiveMaximum)&&J(N.exclusiveMinimum)&&J(N.maximum)&&J(N.minimum)&&J(N.multipleOf)}$.TInteger=I;function G(N){return _(N,"Intersect")&&(V.IsString(N.type)&&N.type!=="object"?!1:!0)&&V.IsArray(N.allOf)&&N.allOf.every((t)=>X0(t)&&!P0(t))&&z(N.type)&&(Q(N.unevaluatedProperties)||D(N.unevaluatedProperties))&&z(N.$id)}$.TIntersect=G;function k(N){return _(N,"Iterator")&&N.type==="Iterator"&&z(N.$id)&&X0(N.items)}$.TIterator=k;function _(N,t){return J0(N)&&N[e8.Kind]===t}$.TKindOf=_;function J0(N){return V.IsObject(N)&&e8.Kind in N&&V.IsString(N[e8.Kind])}$.TKind=J0;function W0(N){return u0(N)&&V.IsString(N.const)}$.TLiteralString=W0;function A0(N){return u0(N)&&V.IsNumber(N.const)}$.TLiteralNumber=A0;function k1(N){return u0(N)&&V.IsBoolean(N.const)}$.TLiteralBoolean=k1;function u0(N){return _(N,"Literal")&&z(N.$id)&&(V.IsBoolean(N.const)||V.IsNumber(N.const)||V.IsString(N.const))}$.TLiteral=u0;function h0(N){return _(N,"Never")&&V.IsObject(N.not)&&Object.getOwnPropertyNames(N.not).length===0}$.TNever=h0;function N0(N){return _(N,"Not")&&X0(N.not)}$.TNot=N0;function H0(N){return _(N,"Null")&&N.type==="null"&&z(N.$id)}$.TNull=H0;function n0(N){return _(N,"Number")&&N.type==="number"&&z(N.$id)&&J(N.exclusiveMaximum)&&J(N.exclusiveMinimum)&&J(N.maximum)&&J(N.minimum)&&J(N.multipleOf)}$.TNumber=n0;function $1(N){return _(N,"Object")&&N.type==="object"&&z(N.$id)&&V.IsObject(N.properties)&&X(N.additionalProperties)&&J(N.minProperties)&&J(N.maxProperties)&&Object.entries(N.properties).every(([t,L0])=>Y(t)&&X0(L0))}$.TObject=$1;function y0(N){return _(N,"Promise")&&N.type==="Promise"&&z(N.$id)&&X0(N.item)}$.TPromise=y0;function R(N){return _(N,"Record")&&N.type==="object"&&z(N.$id)&&X(N.additionalProperties)&&V.IsObject(N.patternProperties)&&((t)=>{const L0=Object.getOwnPropertyNames(t.patternProperties);return L0.length===1&&W(L0[0])&&V.IsObject(t.patternProperties)&&X0(t.patternProperties[L0[0]])})(N)}$.TRecord=R;function f(N){return V.IsObject(N)&&e8.Hint in N&&N[e8.Hint]==="Recursive"}$.TRecursive=f;function i(N){return _(N,"Ref")&&z(N.$id)&&V.IsString(N.$ref)}$.TRef=i;function h(N){return _(N,"String")&&N.type==="string"&&z(N.$id)&&J(N.minLength)&&J(N.maxLength)&&B(N.pattern)&&F(N.format)}$.TString=h;function q0(N){return _(N,"Symbol")&&N.type==="symbol"&&z(N.$id)}$.TSymbol=q0;function j0(N){return _(N,"TemplateLiteral")&&N.type==="string"&&V.IsString(N.pattern)&&N.pattern[0]==="^"&&N.pattern[N.pattern.length-1]==="$"}$.TTemplateLiteral=j0;function K0(N){return _(N,"This")&&z(N.$id)&&V.IsString(N.$ref)}$.TThis=K0;function P0(N){return V.IsObject(N)&&e8.Transform in N}$.TTransform=P0;function M0(N){return _(N,"Tuple")&&N.type==="array"&&z(N.$id)&&V.IsNumber(N.minItems)&&V.IsNumber(N.maxItems)&&N.minItems===N.maxItems&&(V.IsUndefined(N.items)&&V.IsUndefined(N.additionalItems)&&N.minItems===0||V.IsArray(N.items)&&N.items.every((t)=>X0(t)))}$.TTuple=M0;function w1(N){return _(N,"Undefined")&&N.type==="undefined"&&z(N.$id)}$.TUndefined=w1;function K(N){return E(N)&&N.anyOf.every((t)=>W0(t)||A0(t))}$.TUnionLiteral=K;function E(N){return _(N,"Union")&&z(N.$id)&&V.IsObject(N)&&V.IsArray(N.anyOf)&&N.anyOf.every((t)=>X0(t))}$.TUnion=E;function L(N){return _(N,"Uint8Array")&&N.type==="Uint8Array"&&z(N.$id)&&J(N.minByteLength)&&J(N.maxByteLength)}$.TUint8Array=L;function p(N){return _(N,"Unknown")&&z(N.$id)}$.TUnknown=p;function T(N){return _(N,"Unsafe")}$.TUnsafe=T;function d(N){return _(N,"Void")&&N.type==="void"&&z(N.$id)}$.TVoid=d;function Y0(N){return V.IsObject(N)&&N[e8.Readonly]==="Readonly"}$.TReadonly=Y0;function S0(N){return V.IsObject(N)&&N[e8.Optional]==="Optional"}$.TOptional=S0;function X0(N){return V.IsObject(N)&&(S(N)||b(N)||P(N)||M(N)||j(N)||O(N)||A(N)||w(N)||I(N)||G(N)||k(N)||u0(N)||h0(N)||N0(N)||H0(N)||n0(N)||$1(N)||y0(N)||R(N)||i(N)||h(N)||q0(N)||j0(N)||K0(N)||M0(N)||w1(N)||E(N)||L(N)||p(N)||T(N)||d(N)||J0(N)&&H6.Has(N[e8.Kind]))}$.TSchema=X0})(U||(e8.TypeGuard=U={}));var r8;(function($){function W(Y){return Y[e8.Kind]==="Intersect"?Y.allOf.every((X)=>W(X)):Y[e8.Kind]==="Union"?Y.anyOf.some((X)=>W(X)):Y[e8.Kind]==="Undefined"?!0:Y[e8.Kind]==="Not"?!W(Y.not):!1}$.Check=W})(r8||(e8.ExtendsUndefined=r8={}));class A6 extends Y1{}e8.TypeExtendsError=A6;var C;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(C||(e8.TypeExtendsResult=C={}));var b1;(function($){function W(H){return H===C.False?H:C.True}function Y(H){throw new A6(H)}function X(H){return U.TNever(H)||U.TIntersect(H)||U.TUnion(H)||U.TUnknown(H)||U.TAny(H)}function Z(H,q){return U.TNever(q)?_(H,q):U.TIntersect(q)?w(H,q):U.TUnion(q)?Y6(H,q):U.TUnknown(q)?x8(H,q):U.TAny(q)?J(H,q):Y("StructuralRight")}function J(H,q){return C.True}function Q(H,q){return U.TIntersect(q)?w(H,q):U.TUnion(q)&&q.anyOf.some((e)=>U.TAny(e)||U.TUnknown(e))?C.True:U.TUnion(q)?C.Union:U.TUnknown(q)?C.True:U.TAny(q)?C.True:C.Union}function z(H,q){return U.TUnknown(H)?C.False:U.TAny(H)?C.Union:U.TNever(H)?C.True:C.False}function B(H,q){return U.TObject(q)&&j0(q)?C.True:X(q)?Z(H,q):!U.TArray(q)?C.False:W(Q0(H.items,q.items))}function F(H,q){return X(q)?Z(H,q):!U.TAsyncIterator(q)?C.False:W(Q0(H.items,q.items))}function D(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TBigInt(q)?C.True:C.False}function S(H,q){return U.TLiteral(H)&&V.IsBoolean(H.const)?C.True:U.TBoolean(H)?C.True:C.False}function b(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TBoolean(q)?C.True:C.False}function j(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):!U.TConstructor(q)?C.False:H.parameters.length>q.parameters.length?C.False:!H.parameters.every((e,o0)=>W(Q0(q.parameters[o0],e))===C.True)?C.False:W(Q0(H.returns,q.returns))}function M(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TDate(q)?C.True:C.False}function P(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):!U.TFunction(q)?C.False:H.parameters.length>q.parameters.length?C.False:!H.parameters.every((e,o0)=>W(Q0(q.parameters[o0],e))===C.True)?C.False:W(Q0(H.returns,q.returns))}function O(H,q){return U.TLiteral(H)&&V.IsNumber(H.const)?C.True:U.TNumber(H)||U.TInteger(H)?C.True:C.False}function A(H,q){return U.TInteger(q)||U.TNumber(q)?C.True:X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):C.False}function w(H,q){return q.allOf.every((e)=>Q0(H,e)===C.True)?C.True:C.False}function I(H,q){return H.allOf.some((e)=>Q0(e,q)===C.True)?C.True:C.False}function G(H,q){return X(q)?Z(H,q):!U.TIterator(q)?C.False:W(Q0(H.items,q.items))}function k(H,q){return U.TLiteral(q)&&q.const===H.const?C.True:X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TString(q)?d(H,q):U.TNumber(q)?u0(H,q):U.TInteger(q)?O(H,q):U.TBoolean(q)?S(H,q):C.False}function _(H,q){return C.False}function J0(H,q){return C.True}function W0(H){let[q,e]=[H,0];while(!0){if(!U.TNot(q))break;q=q.not,e+=1}return e%2===0?q:e8.Type.Unknown()}function A0(H,q){return U.TNot(H)?Q0(W0(H),q):U.TNot(q)?Q0(H,W0(q)):Y("Invalid fallthrough for Not")}function k1(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TNull(q)?C.True:C.False}function u0(H,q){return U.TLiteralNumber(H)?C.True:U.TNumber(H)||U.TInteger(H)?C.True:C.False}function h0(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TInteger(q)||U.TNumber(q)?C.True:C.False}function N0(H,q){return Object.getOwnPropertyNames(H.properties).length===q}function H0(H){return j0(H)}function n0(H){return N0(H,0)||N0(H,1)&&"description"in H.properties&&U.TUnion(H.properties.description)&&H.properties.description.anyOf.length===2&&(U.TString(H.properties.description.anyOf[0])&&U.TUndefined(H.properties.description.anyOf[1])||U.TString(H.properties.description.anyOf[1])&&U.TUndefined(H.properties.description.anyOf[0]))}function $1(H){return N0(H,0)}function y0(H){return N0(H,0)}function R(H){return N0(H,0)}function f(H){return N0(H,0)}function i(H){return j0(H)}function h(H){const q=e8.Type.Number();return N0(H,0)||N0(H,1)&&"length"in H.properties&&W(Q0(H.properties.length,q))===C.True}function q0(H){return N0(H,0)}function j0(H){const q=e8.Type.Number();return N0(H,0)||N0(H,1)&&"length"in H.properties&&W(Q0(H.properties.length,q))===C.True}function K0(H){const q=e8.Type.Function([e8.Type.Any()],e8.Type.Any());return N0(H,0)||N0(H,1)&&"then"in H.properties&&W(Q0(H.properties.then,q))===C.True}function P0(H,q){return Q0(H,q)===C.False?C.False:U.TOptional(H)&&!U.TOptional(q)?C.False:C.True}function M0(H,q){return U.TUnknown(H)?C.False:U.TAny(H)?C.Union:U.TNever(H)||U.TLiteralString(H)&&H0(q)||U.TLiteralNumber(H)&&$1(q)||U.TLiteralBoolean(H)&&y0(q)||U.TSymbol(H)&&n0(q)||U.TBigInt(H)&&R(q)||U.TString(H)&&H0(q)||U.TSymbol(H)&&n0(q)||U.TNumber(H)&&$1(q)||U.TInteger(H)&&$1(q)||U.TBoolean(H)&&y0(q)||U.TUint8Array(H)&&i(q)||U.TDate(H)&&f(q)||U.TConstructor(H)&&q0(q)||U.TFunction(H)&&h(q)?C.True:U.TRecord(H)&&U.TString(E(H))?(()=>{return q[e8.Hint]==="Record"?C.True:C.False})():U.TRecord(H)&&U.TNumber(E(H))?(()=>{return N0(q,0)?C.True:C.False})():C.False}function w1(H,q){return X(q)?Z(H,q):U.TRecord(q)?p(H,q):!U.TObject(q)?C.False:(()=>{for(let e of Object.getOwnPropertyNames(q.properties)){if(!(e in H.properties)&&!U.TOptional(q.properties[e]))return C.False;if(U.TOptional(q.properties[e]))return C.True;if(P0(H.properties[e],q.properties[e])===C.False)return C.False}return C.True})()}function K(H,q){return X(q)?Z(H,q):U.TObject(q)&&K0(q)?C.True:!U.TPromise(q)?C.False:W(Q0(H.item,q.item))}function E(H){return e8.PatternNumberExact in H.patternProperties?e8.Type.Number():(e8.PatternStringExact in H.patternProperties)?e8.Type.String():Y("Unknown record key pattern")}function L(H){return e8.PatternNumberExact in H.patternProperties?H.patternProperties[e8.PatternNumberExact]:(e8.PatternStringExact in H.patternProperties)?H.patternProperties[e8.PatternStringExact]:Y("Unable to get record value schema")}function p(H,q){const[e,o0]=[E(q),L(q)];return U.TLiteralString(H)&&U.TNumber(e)&&W(Q0(H,o0))===C.True?C.True:U.TUint8Array(H)&&U.TNumber(e)?Q0(H,o0):U.TString(H)&&U.TNumber(e)?Q0(H,o0):U.TArray(H)&&U.TNumber(e)?Q0(H,o0):U.TObject(H)?(()=>{for(let HX of Object.getOwnPropertyNames(H.properties))if(P0(o0,H.properties[HX])===C.False)return C.False;return C.True})():C.False}function T(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):!U.TRecord(q)?C.False:Q0(L(H),L(q))}function d(H,q){return U.TLiteral(H)&&V.IsString(H.const)?C.True:U.TString(H)?C.True:C.False}function Y0(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TString(q)?C.True:C.False}function S0(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TSymbol(q)?C.True:C.False}function X0(H,q){return U.TTemplateLiteral(H)?Q0(H1.Resolve(H),q):U.TTemplateLiteral(q)?Q0(H,H1.Resolve(q)):Y("Invalid fallthrough for TemplateLiteral")}function N(H,q){return U.TArray(q)&&H.items!==void 0&&H.items.every((e)=>Q0(e,q.items)===C.True)}function t(H,q){return U.TNever(H)?C.True:U.TUnknown(H)?C.False:U.TAny(H)?C.Union:C.False}function L0(H,q){return X(q)?Z(H,q):U.TObject(q)&&j0(q)?C.True:U.TArray(q)&&N(H,q)?C.True:!U.TTuple(q)?C.False:V.IsUndefined(H.items)&&!V.IsUndefined(q.items)||!V.IsUndefined(H.items)&&V.IsUndefined(q.items)?C.False:V.IsUndefined(H.items)&&!V.IsUndefined(q.items)?C.True:H.items.every((e,o0)=>Q0(e,q.items[o0])===C.True)?C.True:C.False}function $6(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TUint8Array(q)?C.True:C.False}function W6(H,q){return X(q)?Z(H,q):U.TObject(q)?M0(H,q):U.TRecord(q)?p(H,q):U.TVoid(q)?JX(H,q):U.TUndefined(q)?C.True:C.False}function Y6(H,q){return q.anyOf.some((e)=>Q0(H,e)===C.True)?C.True:C.False}function XX(H,q){return H.anyOf.every((e)=>Q0(e,q)===C.True)?C.True:C.False}function x8(H,q){return C.True}function ZX(H,q){return U.TNever(q)?_(H,q):U.TIntersect(q)?w(H,q):U.TUnion(q)?Y6(H,q):U.TAny(q)?J(H,q):U.TString(q)?d(H,q):U.TNumber(q)?u0(H,q):U.TInteger(q)?O(H,q):U.TBoolean(q)?S(H,q):U.TArray(q)?z(H,q):U.TTuple(q)?t(H,q):U.TObject(q)?M0(H,q):U.TUnknown(q)?C.True:C.False}function JX(H,q){return U.TUndefined(H)?C.True:U.TUndefined(H)?C.True:C.False}function QX(H,q){return U.TIntersect(q)?w(H,q):U.TUnion(q)?Y6(H,q):U.TUnknown(q)?x8(H,q):U.TAny(q)?J(H,q):U.TObject(q)?M0(H,q):U.TVoid(q)?C.True:C.False}function Q0(H,q){return U.TTemplateLiteral(H)||U.TTemplateLiteral(q)?X0(H,q):U.TNot(H)||U.TNot(q)?A0(H,q):U.TAny(H)?Q(H,q):U.TArray(H)?B(H,q):U.TBigInt(H)?D(H,q):U.TBoolean(H)?b(H,q):U.TAsyncIterator(H)?F(H,q):U.TConstructor(H)?j(H,q):U.TDate(H)?M(H,q):U.TFunction(H)?P(H,q):U.TInteger(H)?A(H,q):U.TIntersect(H)?I(H,q):U.TIterator(H)?G(H,q):U.TLiteral(H)?k(H,q):U.TNever(H)?J0(H,q):U.TNull(H)?k1(H,q):U.TNumber(H)?h0(H,q):U.TObject(H)?w1(H,q):U.TRecord(H)?T(H,q):U.TString(H)?Y0(H,q):U.TSymbol(H)?S0(H,q):U.TTuple(H)?L0(H,q):U.TPromise(H)?K(H,q):U.TUint8Array(H)?$6(H,q):U.TUndefined(H)?W6(H,q):U.TUnion(H)?XX(H,q):U.TUnknown(H)?ZX(H,q):U.TVoid(H)?QX(H,q):Y(`Unknown left type operand '${H[e8.Kind]}'`)}function zX(H,q){return Q0(H,q)}$.Extends=zX})(b1||(e8.TypeExtends=b1={}));var m;(function($){function W(Q){const z=Object.getOwnPropertyNames(Q).reduce((F,D)=>({...F,[D]:X(Q[D])}),{}),B=Object.getOwnPropertySymbols(Q).reduce((F,D)=>({...F,[D]:X(Q[D])}),{});return{...z,...B}}function Y(Q){return Q.map((z)=>X(z))}function X(Q){return V.IsArray(Q)?Y(Q):V.IsObject(Q)?W(Q):Q}function Z(Q){return Q.map((z)=>J(z))}$.Rest=Z;function J(Q,z={}){return{...X(Q),...z}}$.Type=J})(m||(e8.TypeClone=m={}));var q6;(function($){function W(j){return j.map((M)=>{const{[e8.Optional]:P,...O}=m.Type(M);return O})}function Y(j){return j.every((M)=>U.TOptional(M))}function X(j){return j.some((M)=>U.TOptional(M))}function Z(j){return Y(j.allOf)?e8.Type.Optional(e8.Type.Intersect(W(j.allOf))):j}function J(j){return X(j.anyOf)?e8.Type.Optional(e8.Type.Union(W(j.anyOf))):j}function Q(j){return j[e8.Kind]==="Intersect"?Z(j):j[e8.Kind]==="Union"?J(j):j}function z(j,M){const P=j.allOf.reduce((O,A)=>{const w=S(A,M);return w[e8.Kind]==="Never"?O:[...O,w]},[]);return Q(e8.Type.Intersect(P))}function B(j,M){const P=j.anyOf.map((O)=>S(O,M));return Q(e8.Type.Union(P))}function F(j,M){const P=j.properties[M];return V.IsUndefined(P)?e8.Type.Never():e8.Type.Union([P])}function D(j,M){const P=j.items;if(V.IsUndefined(P))return e8.Type.Never();const O=P[M];if(V.IsUndefined(O))return e8.Type.Never();return O}function S(j,M){return j[e8.Kind]==="Intersect"?z(j,M):j[e8.Kind]==="Union"?B(j,M):j[e8.Kind]==="Object"?F(j,M):j[e8.Kind]==="Tuple"?D(j,M):e8.Type.Never()}function b(j,M,P={}){const O=M.map((A)=>S(j,A.toString()));return Q(e8.Type.Union(O,P))}$.Resolve=b})(q6||(e8.IndexedAccessor=q6={}));var f1;(function($){function W(D){const[S,b]=[D.slice(0,1),D.slice(1)];return`${S.toLowerCase()}${b}`}function Y(D){const[S,b]=[D.slice(0,1),D.slice(1)];return`${S.toUpperCase()}${b}`}function X(D){return D.toUpperCase()}function Z(D){return D.toLowerCase()}function J(D,S){const b=v1.ParseExact(D.pattern);if(!p1.Check(b))return{...D,pattern:Q(D.pattern,S)};const P=[...i1.Generate(b)].map((w)=>e8.Type.Literal(w)),O=z(P,S),A=e8.Type.Union(O);return e8.Type.TemplateLiteral([A])}function Q(D,S){return typeof D==="string"?S==="Uncapitalize"?W(D):S==="Capitalize"?Y(D):S==="Uppercase"?X(D):S==="Lowercase"?Z(D):D:D.toString()}function z(D,S){if(D.length===0)return[];const[b,...j]=D;return[F(b,S),...z(j,S)]}function B(D,S){return U.TTemplateLiteral(D)?J(D,S):U.TUnion(D)?e8.Type.Union(z(D.anyOf,S)):U.TLiteral(D)?e8.Type.Literal(Q(D.const,S)):D}function F(D,S){return B(D,S)}$.Map=F})(f1||(e8.Intrinsic=f1={}));var T1;(function($){function W(Q,z){return e8.Type.Intersect(Q.allOf.map((B)=>Z(B,z)),{...Q})}function Y(Q,z){return e8.Type.Union(Q.anyOf.map((B)=>Z(B,z)),{...Q})}function X(Q,z){return z(Q)}function Z(Q,z){return Q[e8.Kind]==="Intersect"?W(Q,z):Q[e8.Kind]==="Union"?Y(Q,z):Q[e8.Kind]==="Object"?X(Q,z):Q}function J(Q,z,B){return{...Z(m.Type(Q),z),...B}}$.Map=J})(T1||(e8.ObjectMap=T1={}));var _$;(function($){function W(F){return F[0]==="^"&&F[F.length-1]==="$"?F.slice(1,F.length-1):F}function Y(F,D){return F.allOf.reduce((S,b)=>[...S,...Q(b,D)],[])}function X(F,D){const S=F.anyOf.map((b)=>Q(b,D));return[...S.reduce((b,j)=>j.map((M)=>S.every((P)=>P.includes(M))?b.add(M):b)[0],new Set)]}function Z(F,D){return Object.getOwnPropertyNames(F.properties)}function J(F,D){return D.includePatterns?Object.getOwnPropertyNames(F.patternProperties):[]}function Q(F,D){return U.TIntersect(F)?Y(F,D):U.TUnion(F)?X(F,D):U.TObject(F)?Z(F,D):U.TRecord(F)?J(F,D):[]}function z(F,D){return[...new Set(Q(F,D))]}$.ResolveKeys=z;function B(F){return`^(${z(F,{includePatterns:!0}).map((b)=>`(${W(b)})`).join("|")})\$`}$.ResolvePattern=B})(_$||(e8.KeyResolver=_$={}));class B6 extends Y1{}e8.KeyArrayResolverError=B6;var Z$;(function($){function W(Y){return Array.isArray(Y)?Y:U.TUnionLiteral(Y)?Y.anyOf.map((X)=>X.const.toString()):U.TLiteral(Y)?[Y.const]:U.TTemplateLiteral(Y)?(()=>{const X=v1.ParseExact(Y.pattern);if(!p1.Check(X))throw new B6("Cannot resolve keys from infinite template expression");return[...i1.Generate(X)]})():[]}$.Resolve=W})(Z$||(e8.KeyArrayResolver=Z$={}));var N6;(function($){function*W(X){for(let Z of X.anyOf)if(Z[e8.Kind]==="Union")yield*W(Z);else yield Z}function Y(X){return e8.Type.Union([...W(X)],{...X})}$.Resolve=Y})(N6||(e8.UnionResolver=N6={}));class U6 extends Y1{}e8.TemplateLiteralPatternError=U6;var E$;(function($){function W(J){throw new U6(J)}function Y(J){return J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(J,Q){return U.TTemplateLiteral(J)?J.pattern.slice(1,J.pattern.length-1):U.TUnion(J)?`(${J.anyOf.map((z)=>X(z,Q)).join("|")})`:U.TNumber(J)?`${Q}${e8.PatternNumber}`:U.TInteger(J)?`${Q}${e8.PatternNumber}`:U.TBigInt(J)?`${Q}${e8.PatternNumber}`:U.TString(J)?`${Q}${e8.PatternString}`:U.TLiteral(J)?`${Q}${Y(J.const.toString())}`:U.TBoolean(J)?`${Q}${e8.PatternBoolean}`:W(`Unexpected Kind '${J[e8.Kind]}'`)}function Z(J){return`^${J.map((Q)=>X(Q,"")).join("")}$`}$.Create=Z})(E$||(e8.TemplateLiteralPattern=E$={}));var H1;(function($){function W(Y){const X=v1.ParseExact(Y.pattern);if(!p1.Check(X))return e8.Type.String();const Z=[...i1.Generate(X)].map((J)=>e8.Type.Literal(J));return e8.Type.Union(Z)}$.Resolve=W})(H1||(e8.TemplateLiteralResolver=H1={}));class V$ extends Y1{}e8.TemplateLiteralParserError=V$;var v1;(function($){function W(j,M,P){return j[M]===P&&j.charCodeAt(M-1)!==92}function Y(j,M){return W(j,M,"(")}function X(j,M){return W(j,M,")")}function Z(j,M){return W(j,M,"|")}function J(j){if(!(Y(j,0)&&X(j,j.length-1)))return!1;let M=0;for(let P=0;P<j.length;P++){if(Y(j,P))M+=1;if(X(j,P))M-=1;if(M===0&&P!==j.length-1)return!1}return!0}function Q(j){return j.slice(1,j.length-1)}function z(j){let M=0;for(let P=0;P<j.length;P++){if(Y(j,P))M+=1;if(X(j,P))M-=1;if(Z(j,P)&&M===0)return!0}return!1}function B(j){for(let M=0;M<j.length;M++)if(Y(j,M))return!0;return!1}function F(j){let[M,P]=[0,0];const O=[];for(let w=0;w<j.length;w++){if(Y(j,w))M+=1;if(X(j,w))M-=1;if(Z(j,w)&&M===0){const I=j.slice(P,w);if(I.length>0)O.push(S(I));P=w+1}}const A=j.slice(P);if(A.length>0)O.push(S(A));if(O.length===0)return{type:"const",const:""};if(O.length===1)return O[0];return{type:"or",expr:O}}function D(j){function M(A,w){if(!Y(A,w))throw new V$("TemplateLiteralParser: Index must point to open parens");let I=0;for(let G=w;G<A.length;G++){if(Y(A,G))I+=1;if(X(A,G))I-=1;if(I===0)return[w,G]}throw new V$("TemplateLiteralParser: Unclosed group parens in expression")}function P(A,w){for(let I=w;I<A.length;I++)if(Y(A,I))return[w,I];return[w,A.length]}const O=[];for(let A=0;A<j.length;A++)if(Y(j,A)){const[w,I]=M(j,A),G=j.slice(w,I+1);O.push(S(G)),A=I}else{const[w,I]=P(j,A),G=j.slice(w,I);if(G.length>0)O.push(S(G));A=I-1}return O.length===0?{type:"const",const:""}:O.length===1?O[0]:{type:"and",expr:O}}function S(j){return J(j)?S(Q(j)):z(j)?F(j):B(j)?D(j):{type:"const",const:j}}$.Parse=S;function b(j){return S(j.slice(1,j.length-1))}$.ParseExact=b})(v1||(e8.TemplateLiteralParser=v1={}));class F6 extends Y1{}e8.TemplateLiteralFiniteError=F6;var p1;(function($){function W(Q){throw new F6(Q)}function Y(Q){return Q.type==="or"&&Q.expr.length===2&&Q.expr[0].type==="const"&&Q.expr[0].const==="0"&&Q.expr[1].type==="const"&&Q.expr[1].const==="[1-9][0-9]*"}function X(Q){return Q.type==="or"&&Q.expr.length===2&&Q.expr[0].type==="const"&&Q.expr[0].const==="true"&&Q.expr[1].type==="const"&&Q.expr[1].const==="false"}function Z(Q){return Q.type==="const"&&Q.const===".*"}function J(Q){return X(Q)?!0:Y(Q)||Z(Q)?!1:Q.type==="and"?Q.expr.every((z)=>J(z)):Q.type==="or"?Q.expr.every((z)=>J(z)):Q.type==="const"?!0:W("Unknown expression type")}$.Check=J})(p1||(e8.TemplateLiteralFinite=p1={}));class D6 extends Y1{}e8.TemplateLiteralGeneratorError=D6;var i1;(function($){function*W(Q){if(Q.length===1)return yield*Q[0];for(let z of Q[0])for(let B of W(Q.slice(1)))yield`${z}${B}`}function*Y(Q){return yield*W(Q.expr.map((z)=>[...J(z)]))}function*X(Q){for(let z of Q.expr)yield*J(z)}function*Z(Q){return yield Q.const}function*J(Q){return Q.type==="and"?yield*Y(Q):Q.type==="or"?yield*X(Q):Q.type==="const"?yield*Z(Q):(()=>{throw new D6("Unknown expression")})()}$.Generate=J})(i1||(e8.TemplateLiteralGenerator=i1={}));var M6;(function($){function*W(J){const Q=J.trim().replace(/"|'/g,"");return Q==="boolean"?yield e8.Type.Boolean():Q==="number"?yield e8.Type.Number():Q==="bigint"?yield e8.Type.BigInt():Q==="string"?yield e8.Type.String():yield(()=>{const z=Q.split("|").map((B)=>e8.Type.Literal(B.trim()));return z.length===0?e8.Type.Never():z.length===1?z[0]:e8.Type.Union(z)})()}function*Y(J){if(J[1]!=="{"){const Q=e8.Type.Literal("$"),z=X(J.slice(1));return yield*[Q,...z]}for(let Q=2;Q<J.length;Q++)if(J[Q]==="}"){const z=W(J.slice(2,Q)),B=X(J.slice(Q+1));return yield*[...z,...B]}yield e8.Type.Literal(J)}function*X(J){for(let Q=0;Q<J.length;Q++)if(J[Q]==="$"){const z=e8.Type.Literal(J.slice(0,Q)),B=Y(J.slice(Q));return yield*[z,...B]}yield e8.Type.Literal(J)}function Z(J){return[...X(J)]}$.Parse=Z})(M6||(e8.TemplateLiteralDslParser=M6={}));class w6{constructor($){this.schema=$}Decode($){return new j6(this.schema,$)}}e8.TransformDecodeBuilder=w6;class j6{constructor($,W){this.schema=$,this.decode=W}Encode($){const W=m.Type(this.schema);return U.TTransform(W)?(()=>{const Z={Encode:(J)=>W[e8.Transform].Encode($(J)),Decode:(J)=>this.decode(W[e8.Transform].Decode(J))};return{...W,[e8.Transform]:Z}})():(()=>{const Y={Decode:this.decode,Encode:$};return{...W,[e8.Transform]:Y}})()}}e8.TransformEncodeBuilder=j6;var uX=0;class K6 extends Y1{}e8.TypeBuilderError=K6;class P6{Create($){return $}Throw($){throw new K6($)}Discard($,W){return W.reduce((Y,X)=>{const{[X]:Z,...J}=Y;return J},$)}Strict($){return JSON.parse(JSON.stringify($))}}e8.TypeBuilder=P6;class x$ extends P6{ReadonlyOptional($){return this.Readonly(this.Optional($))}Readonly($){return{...m.Type($),[e8.Readonly]:"Readonly"}}Optional($){return{...m.Type($),[e8.Optional]:"Optional"}}Any($={}){return this.Create({...$,[e8.Kind]:"Any"})}Array($,W={}){return this.Create({...W,[e8.Kind]:"Array",type:"array",items:m.Type($)})}Boolean($={}){return this.Create({...$,[e8.Kind]:"Boolean",type:"boolean"})}Capitalize($,W={}){return{...f1.Map(m.Type($),"Capitalize"),...W}}Composite($,W){const Y=e8.Type.Intersect($,{}),Z=_$.ResolveKeys(Y,{includePatterns:!1}).reduce((J,Q)=>({...J,[Q]:e8.Type.Index(Y,[Q])}),{});return e8.Type.Object(Z,W)}Enum($,W={}){if(V.IsUndefined($))return this.Throw("Enum undefined or empty");const Y=Object.getOwnPropertyNames($).filter((J)=>isNaN(J)).map((J)=>$[J]),Z=[...new Set(Y)].map((J)=>e8.Type.Literal(J));return this.Union(Z,{...W,[e8.Hint]:"Enum"})}Extends($,W,Y,X,Z={}){switch(b1.Extends($,W)){case C.Union:return this.Union([m.Type(Y,Z),m.Type(X,Z)]);case C.True:return m.Type(Y,Z);case C.False:return m.Type(X,Z)}}Exclude($,W,Y={}){return U.TTemplateLiteral($)?this.Exclude(H1.Resolve($),W,Y):U.TTemplateLiteral(W)?this.Exclude($,H1.Resolve(W),Y):U.TUnion($)?(()=>{const X=$.anyOf.filter((Z)=>b1.Extends(Z,W)===C.False);return X.length===1?m.Type(X[0],Y):this.Union(X,Y)})():b1.Extends($,W)!==C.False?this.Never(Y):m.Type($,Y)}Extract($,W,Y={}){return U.TTemplateLiteral($)?this.Extract(H1.Resolve($),W,Y):U.TTemplateLiteral(W)?this.Extract($,H1.Resolve(W),Y):U.TUnion($)?(()=>{const X=$.anyOf.filter((Z)=>b1.Extends(Z,W)!==C.False);return X.length===1?m.Type(X[0],Y):this.Union(X,Y)})():b1.Extends($,W)!==C.False?m.Type($,Y):this.Never(Y)}Index($,W,Y={}){return U.TArray($)&&U.TNumber(W)?(()=>{return m.Type($.items,Y)})():U.TTuple($)&&U.TNumber(W)?(()=>{const Z=(V.IsUndefined($.items)?[]:$.items).map((J)=>m.Type(J));return this.Union(Z,Y)})():(()=>{const X=Z$.Resolve(W),Z=m.Type($);return q6.Resolve(Z,X,Y)})()}Integer($={}){return this.Create({...$,[e8.Kind]:"Integer",type:"integer"})}Intersect($,W={}){if($.length===0)return e8.Type.Never();if($.length===1)return m.Type($[0],W);if($.some((J)=>U.TTransform(J)))this.Throw("Cannot intersect transform types");const Y=$.every((J)=>U.TObject(J)),X=m.Rest($),Z=U.TSchema(W.unevaluatedProperties)?{unevaluatedProperties:m.Type(W.unevaluatedProperties)}:{};return W.unevaluatedProperties===!1||U.TSchema(W.unevaluatedProperties)||Y?this.Create({...W,...Z,[e8.Kind]:"Intersect",type:"object",allOf:X}):this.Create({...W,...Z,[e8.Kind]:"Intersect",allOf:X})}KeyOf($,W={}){return U.TRecord($)?(()=>{const Y=Object.getOwnPropertyNames($.patternProperties)[0];return Y===e8.PatternNumberExact?this.Number(W):Y===e8.PatternStringExact?this.String(W):this.Throw("Unable to resolve key type from Record key pattern")})():U.TTuple($)?(()=>{const X=(V.IsUndefined($.items)?[]:$.items).map((Z,J)=>e8.Type.Literal(J.toString()));return this.Union(X,W)})():U.TArray($)?(()=>{return this.Number(W)})():(()=>{const Y=_$.ResolveKeys($,{includePatterns:!1});if(Y.length===0)return this.Never(W);const X=Y.map((Z)=>this.Literal(Z));return this.Union(X,W)})()}Literal($,W={}){return this.Create({...W,[e8.Kind]:"Literal",const:$,type:typeof $})}Lowercase($,W={}){return{...f1.Map(m.Type($),"Lowercase"),...W}}Never($={}){return this.Create({...$,[e8.Kind]:"Never",not:{}})}Not($,W){return this.Create({...W,[e8.Kind]:"Not",not:m.Type($)})}Null($={}){return this.Create({...$,[e8.Kind]:"Null",type:"null"})}Number($={}){return this.Create({...$,[e8.Kind]:"Number",type:"number"})}Object($,W={}){const Y=Object.getOwnPropertyNames($),X=Y.filter((z)=>U.TOptional($[z])),Z=Y.filter((z)=>!X.includes(z)),J=U.TSchema(W.additionalProperties)?{additionalProperties:m.Type(W.additionalProperties)}:{},Q=Y.reduce((z,B)=>({...z,[B]:m.Type($[B])}),{});return Z.length>0?this.Create({...W,...J,[e8.Kind]:"Object",type:"object",properties:Q,required:Z}):this.Create({...W,...J,[e8.Kind]:"Object",type:"object",properties:Q})}Omit($,W,Y={}){const X=Z$.Resolve(W);return T1.Map(this.Discard(m.Type($),["$id",e8.Transform]),(Z)=>{if(V.IsArray(Z.required)){if(Z.required=Z.required.filter((J)=>!X.includes(J)),Z.required.length===0)delete Z.required}for(let J of Object.getOwnPropertyNames(Z.properties))if(X.includes(J))delete Z.properties[J];return this.Create(Z)},Y)}Partial($,W={}){return T1.Map(this.Discard(m.Type($),["$id",e8.Transform]),(Y)=>{const X=Object.getOwnPropertyNames(Y.properties).reduce((Z,J)=>{return{...Z,[J]:this.Optional(Y.properties[J])}},{});return this.Object(X,this.Discard(Y,["required"]))},W)}Pick($,W,Y={}){const X=Z$.Resolve(W);return T1.Map(this.Discard(m.Type($),["$id",e8.Transform]),(Z)=>{if(V.IsArray(Z.required)){if(Z.required=Z.required.filter((J)=>X.includes(J)),Z.required.length===0)delete Z.required}for(let J of Object.getOwnPropertyNames(Z.properties))if(!X.includes(J))delete Z.properties[J];return this.Create(Z)},Y)}Record($,W,Y={}){return U.TTemplateLiteral($)?(()=>{const X=v1.ParseExact($.pattern);return p1.Check(X)?this.Object([...i1.Generate(X)].reduce((Z,J)=>({...Z,[J]:m.Type(W)}),{}),Y):this.Create({...Y,[e8.Kind]:"Record",type:"object",patternProperties:{[$.pattern]:m.Type(W)}})})():U.TUnion($)?(()=>{const X=N6.Resolve($);if(U.TUnionLiteral(X)){const Z=X.anyOf.reduce((J,Q)=>({...J,[Q.const]:m.Type(W)}),{});return this.Object(Z,{...Y,[e8.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():U.TLiteral($)?(()=>{return V.IsString($.const)||V.IsNumber($.const)?this.Object({[$.const]:m.Type(W)},Y):this.Throw("Record key of type literal is not of type string or number")})():U.TInteger($)||U.TNumber($)?(()=>{return this.Create({...Y,[e8.Kind]:"Record",type:"object",patternProperties:{[e8.PatternNumberExact]:m.Type(W)}})})():U.TString($)?(()=>{const X=V.IsUndefined($.pattern)?e8.PatternStringExact:$.pattern;return this.Create({...Y,[e8.Kind]:"Record",type:"object",patternProperties:{[X]:m.Type(W)}})})():this.Never()}Recursive($,W={}){if(V.IsUndefined(W.$id))W.$id=`T${uX++}`;const Y=$({[e8.Kind]:"This",$ref:`${W.$id}`});return Y.$id=W.$id,this.Create({...W,[e8.Hint]:"Recursive",...Y})}Ref($,W={}){if(V.IsString($))return this.Create({...W,[e8.Kind]:"Ref",$ref:$});if(V.IsUndefined($.$id))this.Throw("Reference target type must specify an $id");return this.Create({...W,[e8.Kind]:"Ref",$ref:$.$id})}Required($,W={}){return T1.Map(this.Discard(m.Type($),["$id",e8.Transform]),(Y)=>{const X=Object.getOwnPropertyNames(Y.properties).reduce((Z,J)=>{return{...Z,[J]:this.Discard(Y.properties[J],[e8.Optional])}},{});return this.Object(X,Y)},W)}Rest($){return U.TTuple($)&&!V.IsUndefined($.items)?m.Rest($.items):U.TIntersect($)?m.Rest($.allOf):U.TUnion($)?m.Rest($.anyOf):[]}String($={}){return this.Create({...$,[e8.Kind]:"String",type:"string"})}TemplateLiteral($,W={}){const Y=V.IsString($)?E$.Create(M6.Parse($)):E$.Create($);return this.Create({...W,[e8.Kind]:"TemplateLiteral",type:"string",pattern:Y})}Transform($){return new w6($)}Tuple($,W={}){const[Y,X,Z]=[!1,$.length,$.length],J=m.Rest($),Q=$.length>0?{...W,[e8.Kind]:"Tuple",type:"array",items:J,additionalItems:Y,minItems:X,maxItems:Z}:{...W,[e8.Kind]:"Tuple",type:"array",minItems:X,maxItems:Z};return this.Create(Q)}Uncapitalize($,W={}){return{...f1.Map(m.Type($),"Uncapitalize"),...W}}Union($,W={}){return U.TTemplateLiteral($)?H1.Resolve($):(()=>{const Y=$;if(Y.length===0)return this.Never(W);if(Y.length===1)return this.Create(m.Type(Y[0],W));const X=m.Rest(Y);return this.Create({...W,[e8.Kind]:"Union",anyOf:X})})()}Unknown($={}){return this.Create({...$,[e8.Kind]:"Unknown"})}Unsafe($={}){return this.Create({...$,[e8.Kind]:$[e8.Kind]||"Unsafe"})}Uppercase($,W={}){return{...f1.Map(m.Type($),"Uppercase"),...W}}}e8.JsonTypeBuilder=x$;class O6 extends x${AsyncIterator($,W={}){return this.Create({...W,[e8.Kind]:"AsyncIterator",type:"AsyncIterator",items:m.Type($)})}Awaited($,W={}){const Y=(X)=>X.length>0?(()=>{const[Z,...J]=X;return[this.Awaited(Z),...Y(J)]})():X;return U.TIntersect($)?e8.Type.Intersect(Y($.allOf)):U.TUnion($)?e8.Type.Union(Y($.anyOf)):U.TPromise($)?this.Awaited($.item):m.Type($,W)}BigInt($={}){return this.Create({...$,[e8.Kind]:"BigInt",type:"bigint"})}ConstructorParameters($,W={}){return this.Tuple([...$.parameters],{...W})}Constructor($,W,Y){const[X,Z]=[m.Rest($),m.Type(W)];return this.Create({...Y,[e8.Kind]:"Constructor",type:"Constructor",parameters:X,returns:Z})}Date($={}){return this.Create({...$,[e8.Kind]:"Date",type:"Date"})}Function($,W,Y){const[X,Z]=[m.Rest($),m.Type(W)];return this.Create({...Y,[e8.Kind]:"Function",type:"Function",parameters:X,returns:Z})}InstanceType($,W={}){return m.Type($.returns,W)}Iterator($,W={}){return this.Create({...W,[e8.Kind]:"Iterator",type:"Iterator",items:m.Type($)})}Parameters($,W={}){return this.Tuple($.parameters,{...W})}Promise($,W={}){return this.Create({...W,[e8.Kind]:"Promise",type:"Promise",item:m.Type($)})}RegExp($,W={}){const Y=V.IsString($)?$:$.source;return this.Create({...W,[e8.Kind]:"String",type:"string",pattern:Y})}RegEx($,W={}){return this.RegExp($,W)}ReturnType($,W={}){return m.Type($.returns,W)}Symbol($){return this.Create({...$,[e8.Kind]:"Symbol",type:"symbol"})}Undefined($={}){return this.Create({...$,[e8.Kind]:"Undefined",type:"undefined"})}Uint8Array($={}){return this.Create({...$,[e8.Kind]:"Uint8Array",type:"Uint8Array"})}Void($={}){return this.Create({...$,[e8.Kind]:"Void",type:"void"})}}e8.JavaScriptTypeBuilder=O6;e8.JsonType=new x$;e8.Type=new O6});var G6=z0((XW)=>{var I6=function($,W){switch(W){case y.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case y.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${$.maxContains} matching values`;case y.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${$.minContains} matching values`;case y.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${$.maxItems}`;case y.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${$.minItems}`;case y.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case y.ValueErrorType.Array:return"Expected array";case y.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case y.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${$.maximum}`;case y.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.minimum}`;case y.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.BigInt:return"Expected bigint";case y.ValueErrorType.Boolean:return"Expected boolean";case y.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.exclusiveMinimumTimestamp}`;case y.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.exclusiveMaximumTimestamp}`;case y.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.minimumTimestamp}`;case y.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.maximumTimestamp}`;case y.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.multipleOfTimestamp}`;case y.ValueErrorType.Date:return"Expected Date";case y.ValueErrorType.Function:return"Expected function";case y.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${$.maximum}`;case y.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${$.minimum}`;case y.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Integer:return"Expected integer";case y.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case y.ValueErrorType.Intersect:return"Expected all values to match";case y.ValueErrorType.Iterator:return"Expected Iterator";case y.ValueErrorType.Literal:return`Expected ${typeof $.const==="string"?`'${$.const}'`:$.const}`;case y.ValueErrorType.Never:return"Never";case y.ValueErrorType.Not:return"Value should not match";case y.ValueErrorType.Null:return"Expected null";case y.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${$.maximum}`;case y.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${$.minimum}`;case y.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Number:return"Expected number";case y.ValueErrorType.Object:return"Expected object";case y.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case y.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${$.maxProperties} properties`;case y.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${$.minProperties} properties`;case y.ValueErrorType.ObjectRequiredProperty:return"Required property";case y.ValueErrorType.Promise:return"Expected Promise";case y.ValueErrorType.StringFormatUnknown:return`Unknown format '${$.format}'`;case y.ValueErrorType.StringFormat:return`Expected string to match '${$.format}' format`;case y.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${$.maxLength}`;case y.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${$.minLength}`;case y.ValueErrorType.StringPattern:return`Expected string to match '${$.pattern}'`;case y.ValueErrorType.String:return"Expected string";case y.ValueErrorType.Symbol:return"Expected symbol";case y.ValueErrorType.TupleLength:return`Expected tuple to have ${$.maxItems||0} elements`;case y.ValueErrorType.Tuple:return"Expected tuple";case y.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.maxByteLength}`;case y.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.minByteLength}`;case y.ValueErrorType.Uint8Array:return"Expected Uint8Array";case y.ValueErrorType.Undefined:return"Expected undefined";case y.ValueErrorType.Union:return"Expected union value";case y.ValueErrorType.Void:return"Expected void";case y.ValueErrorType.Kind:return`Expected kind '${$[q1.Kind]}'`;default:return"Unknown error type"}};Object.defineProperty(XW,"__esModule",{value:!0});XW.DefaultErrorFunction=XW.TypeSystemPolicy=XW.TypeSystemErrorFunction=XW.TypeSystem=XW.TypeSystemDuplicateFormat=XW.TypeSystemDuplicateTypeKind=void 0;var k$=x0(),y=z$(),q1=g0();class b6 extends q1.TypeBoxError{constructor($){super(`Duplicate type kind '${$}' detected`)}}XW.TypeSystemDuplicateTypeKind=b6;class R6 extends q1.TypeBoxError{constructor($){super(`Duplicate string format '${$}' detected`)}}XW.TypeSystemDuplicateFormat=R6;var $W;(function($){function W(X,Z){if(q1.TypeRegistry.Has(X))throw new b6(X);return q1.TypeRegistry.Set(X,Z),(J={})=>q1.Type.Unsafe({...J,[q1.Kind]:X})}$.Type=W;function Y(X,Z){if(q1.FormatRegistry.Has(X))throw new R6(X);return q1.FormatRegistry.Set(X,Z),X}$.Format=Y})($W||(XW.TypeSystem=$W={}));var WW;(function($){let W=I6;function Y(){W=I6}$.Reset=Y;function X(J){W=J}$.Set=X;function Z(){return W}$.Get=Z})(WW||(XW.TypeSystemErrorFunction=WW={}));var YW;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function W(Q,z){return $.ExactOptionalPropertyTypes?z in Q:Q[z]!==void 0}$.IsExactOptionalProperty=W;function Y(Q){const z=k$.IsObject(Q);return $.AllowArrayObject?z:z&&!k$.IsArray(Q)}$.IsObjectLike=Y;function X(Q){return Y(Q)&&!(Q instanceof Date)&&!(Q instanceof Uint8Array)}$.IsRecordLike=X;function Z(Q){const z=k$.IsNumber(Q);return $.AllowNaN?z:z&&Number.isFinite(Q)}$.IsNumberLike=Z;function J(Q){const z=k$.IsUndefined(Q);return $.AllowNullVoid?z||Q===null:z}$.IsVoidLike=J})(YW||(XW.TypeSystemPolicy=YW={}));XW.DefaultErrorFunction=I6});var K1=z0((JW)=>{var xZ=function($,W){const Y=W.findIndex((X)=>X.$id===$.$ref);if(Y===-1)throw new _6($);return W[Y]};Object.defineProperty(JW,"__esModule",{value:!0});JW.Deref=JW.TypeDereferenceError=void 0;var VZ=g0();class _6 extends VZ.TypeBoxError{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}JW.TypeDereferenceError=_6;JW.Deref=xZ});var H$=z0((NW)=>{function*dZ($){const W=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Y=0;Y<W;Y++)yield $>>8*(W-1-Y)&255}var yZ=function($){_0(f0.Array);for(let W of $)u1(W)},vZ=function($){_0(f0.Boolean),_0($?1:0)},pZ=function($){_0(f0.BigInt),HW.setBigInt64(0,$);for(let W of qW)_0(W)},iZ=function($){_0(f0.Date),u1($.getTime())},mZ=function($){_0(f0.Null)},uZ=function($){_0(f0.Number),HW.setFloat64(0,$);for(let W of qW)_0(W)},hZ=function($){_0(f0.Object);for(let W of globalThis.Object.keys($).sort())u1(W),u1($[W])},nZ=function($){_0(f0.String);for(let W=0;W<$.length;W++)for(let Y of dZ($.charCodeAt(W)))_0(Y)},oZ=function($){_0(f0.Symbol),u1($.description)},cZ=function($){_0(f0.Uint8Array);for(let W=0;W<$.length;W++)_0($[W])},lZ=function($){return _0(f0.Undefined)},u1=function($){if(c0.IsArray($))return yZ($);if(c0.IsBoolean($))return vZ($);if(c0.IsBigInt($))return pZ($);if(c0.IsDate($))return iZ($);if(c0.IsNull($))return mZ($);if(c0.IsNumber($))return uZ($);if(c0.IsPlainObject($))return hZ($);if(c0.IsString($))return nZ($);if(c0.IsSymbol($))return oZ($);if(c0.IsUint8Array($))return cZ($);if(c0.IsUndefined($))return lZ($);throw new E6($)},_0=function($){m1=m1^TZ[$],m1=m1*gZ%fZ},tZ=function($){return m1=BigInt("14695981039346656037"),u1($),m1};Object.defineProperty(NW,"__esModule",{value:!0});NW.Hash=NW.ByteMarker=NW.ValueHashError=void 0;var c0=x0();class E6 extends Error{constructor($){super("Unable to hash value");this.value=$}}NW.ValueHashError=E6;var f0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(f0||(NW.ByteMarker=f0={}));var m1=BigInt("14695981039346656037"),[gZ,fZ]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],TZ=Array.from({length:256}).map(($,W)=>BigInt(W)),zW=new Float64Array(1),HW=new DataView(zW.buffer),qW=new Uint8Array(zW.buffer);NW.Hash=tZ});var z$=z0((BW)=>{var X1=function($){return $.replace(/~/g,"~0").replace(/\//g,"~1")},s=function($){return $!==void 0},g=function($,W,Y,X){return{type:$,schema:W,path:Y,value:X,message:h1.TypeSystemErrorFunction.Get()(W,$)}};function*eZ($,W,Y,X){}function*$J($,W,Y,X){if(!D0.IsArray(X))return yield g(x.Array,$,Y,X);if(s($.minItems)&&!(X.length>=$.minItems))yield g(x.ArrayMinItems,$,Y,X);if(s($.maxItems)&&!(X.length<=$.maxItems))yield g(x.ArrayMaxItems,$,Y,X);for(let Q=0;Q<X.length;Q++)yield*C0($.items,W,`${Y}/${Q}`,X[Q]);if($.uniqueItems===!0&&!function(){const Q=new Set;for(let z of X){const B=aZ.Hash(z);if(Q.has(B))return!1;else Q.add(B)}return!0}())yield g(x.ArrayUniqueItems,$,Y,X);if(!(s($.contains)||s($.minContains)||s($.maxContains)))return;const Z=s($.contains)?$.contains:p0.Type.Never(),J=X.reduce((Q,z,B)=>C0(Z,W,`${Y}${B}`,z).next().done===!0?Q+1:Q,0);if(J===0)yield g(x.ArrayContains,$,Y,X);if(D0.IsNumber($.minContains)&&J<$.minContains)yield g(x.ArrayMinContains,$,Y,X);if(D0.IsNumber($.maxContains)&&J>$.maxContains)yield g(x.ArrayMaxContains,$,Y,X)}function*WJ($,W,Y,X){if(!D0.IsAsyncIterator(X))yield g(x.AsyncIterator,$,Y,X)}function*YJ($,W,Y,X){if(!D0.IsBigInt(X))return yield g(x.BigInt,$,Y,X);if(s($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(x.BigIntExclusiveMaximum,$,Y,X);if(s($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(x.BigIntExclusiveMinimum,$,Y,X);if(s($.maximum)&&!(X<=$.maximum))yield g(x.BigIntMaximum,$,Y,X);if(s($.minimum)&&!(X>=$.minimum))yield g(x.BigIntMinimum,$,Y,X);if(s($.multipleOf)&&X%$.multipleOf!==BigInt(0))yield g(x.BigIntMultipleOf,$,Y,X)}function*XJ($,W,Y,X){if(!D0.IsBoolean(X))yield g(x.Boolean,$,Y,X)}function*ZJ($,W,Y,X){yield*C0($.returns,W,Y,X.prototype)}function*JJ($,W,Y,X){if(!D0.IsDate(X))return yield g(x.Date,$,Y,X);if(s($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))yield g(x.DateExclusiveMaximumTimestamp,$,Y,X);if(s($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))yield g(x.DateExclusiveMinimumTimestamp,$,Y,X);if(s($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))yield g(x.DateMaximumTimestamp,$,Y,X);if(s($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))yield g(x.DateMinimumTimestamp,$,Y,X);if(s($.multipleOfTimestamp)&&X.getTime()%$.multipleOfTimestamp!==0)yield g(x.DateMultipleOfTimestamp,$,Y,X)}function*QJ($,W,Y,X){if(!D0.IsFunction(X))yield g(x.Function,$,Y,X)}function*zJ($,W,Y,X){if(!D0.IsInteger(X))return yield g(x.Integer,$,Y,X);if(s($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(x.IntegerExclusiveMaximum,$,Y,X);if(s($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(x.IntegerExclusiveMinimum,$,Y,X);if(s($.maximum)&&!(X<=$.maximum))yield g(x.IntegerMaximum,$,Y,X);if(s($.minimum)&&!(X>=$.minimum))yield g(x.IntegerMinimum,$,Y,X);if(s($.multipleOf)&&X%$.multipleOf!==0)yield g(x.IntegerMultipleOf,$,Y,X)}function*HJ($,W,Y,X){for(let Z of $.allOf){const J=C0(Z,W,Y,X).next();if(!J.done)yield g(x.Intersect,$,Y,X),yield J.value}if($.unevaluatedProperties===!1){const Z=new RegExp(p0.KeyResolver.ResolvePattern($));for(let J of Object.getOwnPropertyNames(X))if(!Z.test(J))yield g(x.IntersectUnevaluatedProperties,$,`${Y}/${J}`,X)}if(typeof $.unevaluatedProperties==="object"){const Z=new RegExp(p0.KeyResolver.ResolvePattern($));for(let J of Object.getOwnPropertyNames(X))if(!Z.test(J)){const Q=C0($.unevaluatedProperties,W,`${Y}/${J}`,X[J]).next();if(!Q.done)yield Q.value}}}function*qJ($,W,Y,X){if(!D0.IsIterator(X))yield g(x.Iterator,$,Y,X)}function*NJ($,W,Y,X){if(X!==$.const)yield g(x.Literal,$,Y,X)}function*MJ($,W,Y,X){yield g(x.Never,$,Y,X)}function*AJ($,W,Y,X){if(C0($.not,W,Y,X).next().done===!0)yield g(x.Not,$,Y,X)}function*BJ($,W,Y,X){if(!D0.IsNull(X))yield g(x.Null,$,Y,X)}function*UJ($,W,Y,X){if(!h1.TypeSystemPolicy.IsNumberLike(X))return yield g(x.Number,$,Y,X);if(s($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(x.NumberExclusiveMaximum,$,Y,X);if(s($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(x.NumberExclusiveMinimum,$,Y,X);if(s($.maximum)&&!(X<=$.maximum))yield g(x.NumberMaximum,$,Y,X);if(s($.minimum)&&!(X>=$.minimum))yield g(x.NumberMinimum,$,Y,X);if(s($.multipleOf)&&X%$.multipleOf!==0)yield g(x.NumberMultipleOf,$,Y,X)}function*FJ($,W,Y,X){if(!h1.TypeSystemPolicy.IsObjectLike(X))return yield g(x.Object,$,Y,X);if(s($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield g(x.ObjectMinProperties,$,Y,X);if(s($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield g(x.ObjectMaxProperties,$,Y,X);const Z=Array.isArray($.required)?$.required:[],J=Object.getOwnPropertyNames($.properties),Q=Object.getOwnPropertyNames(X);for(let z of Z){if(Q.includes(z))continue;yield g(x.ObjectRequiredProperty,$.properties[z],`${Y}/${X1(z)}`,void 0)}if($.additionalProperties===!1){for(let z of Q)if(!J.includes(z))yield g(x.ObjectAdditionalProperties,$,`${Y}/${X1(z)}`,X[z])}if(typeof $.additionalProperties==="object")for(let z of Q){if(J.includes(z))continue;yield*C0($.additionalProperties,W,`${Y}/${X1(z)}`,X[z])}for(let z of J){const B=$.properties[z];if($.required&&$.required.includes(z)){if(yield*C0(B,W,`${Y}/${X1(z)}`,X[z]),p0.ExtendsUndefined.Check($)&&!(z in X))yield g(x.ObjectRequiredProperty,B,`${Y}/${X1(z)}`,void 0)}else if(h1.TypeSystemPolicy.IsExactOptionalProperty(X,z))yield*C0(B,W,`${Y}/${X1(z)}`,X[z])}}function*DJ($,W,Y,X){if(!D0.IsPromise(X))yield g(x.Promise,$,Y,X)}function*wJ($,W,Y,X){if(!h1.TypeSystemPolicy.IsRecordLike(X))return yield g(x.Object,$,Y,X);if(s($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield g(x.ObjectMinProperties,$,Y,X);if(s($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield g(x.ObjectMaxProperties,$,Y,X);const[Z,J]=Object.entries($.patternProperties)[0],Q=new RegExp(Z);for(let[z,B]of Object.entries(X))if(Q.test(z))yield*C0(J,W,`${Y}/${X1(z)}`,B);if(typeof $.additionalProperties==="object"){for(let[z,B]of Object.entries(X))if(!Q.test(z))yield*C0($.additionalProperties,W,`${Y}/${X1(z)}`,B)}if($.additionalProperties===!1)for(let[z,B]of Object.entries(X)){if(Q.test(z))continue;return yield g(x.ObjectAdditionalProperties,$,`${Y}/${X1(z)}`,B)}}function*jJ($,W,Y,X){yield*C0(AW.Deref($,W),W,Y,X)}function*KJ($,W,Y,X){if(!D0.IsString(X))return yield g(x.String,$,Y,X);if(s($.minLength)&&!(X.length>=$.minLength))yield g(x.StringMinLength,$,Y,X);if(s($.maxLength)&&!(X.length<=$.maxLength))yield g(x.StringMaxLength,$,Y,X);if(D0.IsString($.pattern)){if(!new RegExp($.pattern).test(X))yield g(x.StringPattern,$,Y,X)}if(D0.IsString($.format)){if(!p0.FormatRegistry.Has($.format))yield g(x.StringFormatUnknown,$,Y,X);else if(!p0.FormatRegistry.Get($.format)(X))yield g(x.StringFormat,$,Y,X)}}function*PJ($,W,Y,X){if(!D0.IsSymbol(X))yield g(x.Symbol,$,Y,X)}function*OJ($,W,Y,X){if(!D0.IsString(X))return yield g(x.String,$,Y,X);if(!new RegExp($.pattern).test(X))yield g(x.StringPattern,$,Y,X)}function*SJ($,W,Y,X){yield*C0(AW.Deref($,W),W,Y,X)}function*LJ($,W,Y,X){if(!D0.IsArray(X))return yield g(x.Tuple,$,Y,X);if($.items===void 0&&X.length!==0)return yield g(x.TupleLength,$,Y,X);if(X.length!==$.maxItems)return yield g(x.TupleLength,$,Y,X);if(!$.items)return;for(let Z=0;Z<$.items.length;Z++)yield*C0($.items[Z],W,`${Y}/${Z}`,X[Z])}function*CJ($,W,Y,X){if(!D0.IsUndefined(X))yield g(x.Undefined,$,Y,X)}function*IJ($,W,Y,X){let Z=0;for(let J of $.anyOf){const Q=[...C0(J,W,Y,X)];if(Q.length===0)return;Z+=Q.length}if(Z>0)yield g(x.Union,$,Y,X)}function*bJ($,W,Y,X){if(!D0.IsUint8Array(X))return yield g(x.Uint8Array,$,Y,X);if(s($.maxByteLength)&&!(X.length<=$.maxByteLength))yield g(x.Uint8ArrayMaxByteLength,$,Y,X);if(s($.minByteLength)&&!(X.length>=$.minByteLength))yield g(x.Uint8ArrayMinByteLength,$,Y,X)}function*RJ($,W,Y,X){}function*GJ($,W,Y,X){if(!h1.TypeSystemPolicy.IsVoidLike(X))yield g(x.Void,$,Y,X)}function*_J($,W,Y,X){if(!p0.TypeRegistry.Get($[p0.Kind])($,X))yield g(x.Kind,$,Y,X)}function*C0($,W,Y,X){const Z=s($.$id)?[...W,$]:W,J=$;switch(J[p0.Kind]){case"Any":return yield*eZ(J,Z,Y,X);case"Array":return yield*$J(J,Z,Y,X);case"AsyncIterator":return yield*WJ(J,Z,Y,X);case"BigInt":return yield*YJ(J,Z,Y,X);case"Boolean":return yield*XJ(J,Z,Y,X);case"Constructor":return yield*ZJ(J,Z,Y,X);case"Date":return yield*JJ(J,Z,Y,X);case"Function":return yield*QJ(J,Z,Y,X);case"Integer":return yield*zJ(J,Z,Y,X);case"Intersect":return yield*HJ(J,Z,Y,X);case"Iterator":return yield*qJ(J,Z,Y,X);case"Literal":return yield*NJ(J,Z,Y,X);case"Never":return yield*MJ(J,Z,Y,X);case"Not":return yield*AJ(J,Z,Y,X);case"Null":return yield*BJ(J,Z,Y,X);case"Number":return yield*UJ(J,Z,Y,X);case"Object":return yield*FJ(J,Z,Y,X);case"Promise":return yield*DJ(J,Z,Y,X);case"Record":return yield*wJ(J,Z,Y,X);case"Ref":return yield*jJ(J,Z,Y,X);case"String":return yield*KJ(J,Z,Y,X);case"Symbol":return yield*PJ(J,Z,Y,X);case"TemplateLiteral":return yield*OJ(J,Z,Y,X);case"This":return yield*SJ(J,Z,Y,X);case"Tuple":return yield*LJ(J,Z,Y,X);case"Undefined":return yield*CJ(J,Z,Y,X);case"Union":return yield*IJ(J,Z,Y,X);case"Uint8Array":return yield*bJ(J,Z,Y,X);case"Unknown":return yield*RJ(J,Z,Y,X);case"Void":return yield*GJ(J,Z,Y,X);default:if(!p0.TypeRegistry.Has(J[p0.Kind]))throw new V6($);return yield*_J(J,Z,Y,X)}}var EJ=function(...$){const W=$.length===3?C0($[0],$[1],"",$[2]):C0($[0],[],"",$[1]);return new x6(W)};Object.defineProperty(BW,"__esModule",{value:!0});BW.Errors=BW.ValueErrorIterator=BW.EscapeKey=BW.ValueErrorsUnknownTypeError=BW.ValueErrorType=void 0;var D0=x0(),h1=G6(),AW=K1(),aZ=H$(),p0=g0(),x;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.StringFormatUnknown=48]="StringFormatUnknown",$[$.StringFormat=49]="StringFormat",$[$.StringMaxLength=50]="StringMaxLength",$[$.StringMinLength=51]="StringMinLength",$[$.StringPattern=52]="StringPattern",$[$.String=53]="String",$[$.Symbol=54]="Symbol",$[$.TupleLength=55]="TupleLength",$[$.Tuple=56]="Tuple",$[$.Uint8ArrayMaxByteLength=57]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=58]="Uint8ArrayMinByteLength",$[$.Uint8Array=59]="Uint8Array",$[$.Undefined=60]="Undefined",$[$.Union=61]="Union",$[$.Void=62]="Void"})(x||(BW.ValueErrorType=x={}));class V6 extends p0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}BW.ValueErrorsUnknownTypeError=V6;BW.EscapeKey=X1;class x6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}BW.ValueErrorIterator=x6;BW.Errors=EJ});var g$=z0((G1)=>{var fJ=G1&&G1.__createBinding||(Object.create?function($,W,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(W,Y);if(!Z||("get"in Z?!W.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return W[Y]}};Object.defineProperty($,X,Z)}:function($,W,Y,X){if(X===void 0)X=Y;$[X]=W[Y]}),TJ=G1&&G1.__exportStar||function($,W){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y))fJ(W,$,Y)};Object.defineProperty(G1,"__esModule",{value:!0});TJ(z$(),G1)});var f$=z0((DW)=>{Object.defineProperty(DW,"__esModule",{value:!0});DW.ValuePointer=DW.ValuePointerRootDeleteError=DW.ValuePointerRootSetError=void 0;class k6 extends Error{constructor($,W,Y){super("Cannot set root value");this.value=$,this.path=W,this.update=Y}}DW.ValuePointerRootSetError=k6;class g6 extends Error{constructor($,W){super("Cannot delete root value");this.value=$,this.path=W}}DW.ValuePointerRootDeleteError=g6;var FW;(function($){function W(z){return z.indexOf("~")===-1?z:z.replace(/~1/g,"/").replace(/~0/g,"~")}function*Y(z){if(z==="")return;let[B,F]=[0,0];for(let D=0;D<z.length;D++)if(z.charAt(D)==="/")if(D===0)B=D+1;else F=D,yield W(z.slice(B,F)),B=D+1;else F=D;yield W(z.slice(B))}$.Format=Y;function X(z,B,F){if(B==="")throw new k6(z,B,F);let[D,S,b]=[null,z,""];for(let j of Y(B)){if(S[j]===void 0)S[j]={};D=S,S=S[j],b=j}D[b]=F}$.Set=X;function Z(z,B){if(B==="")throw new g6(z,B);let[F,D,S]=[null,z,""];for(let b of Y(B)){if(D[b]===void 0||D[b]===null)return;F=D,D=D[b],S=b}if(Array.isArray(F)){const b=parseInt(S);F.splice(b,1)}else delete F[S]}$.Delete=Z;function J(z,B){if(B==="")return!0;let[F,D,S]=[null,z,""];for(let b of Y(B)){if(D[b]===void 0)return!1;F=D,D=D[b],S=b}return Object.getOwnPropertyNames(F).includes(S)}$.Has=J;function Q(z,B){if(B==="")return z;let F=z;for(let D of Y(B)){if(F[D]===void 0)return;F=F[D]}return F}$.Get=Q})(FW||(DW.ValuePointer=FW={}))});var n1=z0((jW)=>{var vJ=function($){return[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)].reduce((Y,X)=>({...Y,[X]:f6($[X])}),{})},pJ=function($){return $.map((W)=>f6(W))},iJ=function($){return $.slice()},mJ=function($){return new Date($.toISOString())},uJ=function($){return $},f6=function($){if(q$.IsArray($))return pJ($);if(q$.IsDate($))return mJ($);if(q$.IsPlainObject($))return vJ($);if(q$.IsTypedArray($))return iJ($);if(q$.IsValueType($))return uJ($);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(jW,"__esModule",{value:!0});jW.Clone=void 0;var q$=x0();jW.Clone=f6});var v6=z0((SW)=>{var N$=function($,W){return{type:"update",path:$,value:W}},PW=function($,W){return{type:"insert",path:$,value:W}},OW=function($){return{type:"delete",path:$}};function*hJ($,W,Y){if(!E0.IsPlainObject(Y))return yield N$($,Y);const X=[...Object.keys(W),...Object.getOwnPropertySymbols(W)],Z=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];for(let J of X){if(E0.IsSymbol(J))throw new o1(J);if(E0.IsUndefined(Y[J])&&Z.includes(J))yield N$(`${$}/${String(J)}`,void 0)}for(let J of Z){if(E0.IsUndefined(W[J])||E0.IsUndefined(Y[J]))continue;if(E0.IsSymbol(J))throw new o1(J);yield*T$(`${$}/${String(J)}`,W[J],Y[J])}for(let J of Z){if(E0.IsSymbol(J))throw new o1(J);if(E0.IsUndefined(W[J]))yield PW(`${$}/${String(J)}`,Y[J])}for(let J of X.reverse()){if(E0.IsSymbol(J))throw new o1(J);if(E0.IsUndefined(Y[J])&&!Z.includes(J))yield OW(`${$}/${String(J)}`)}}function*nJ($,W,Y){if(!E0.IsArray(Y))return yield N$($,Y);for(let X=0;X<Math.min(W.length,Y.length);X++)yield*T$(`${$}/${X}`,W[X],Y[X]);for(let X=0;X<Y.length;X++){if(X<W.length)continue;yield PW(`${$}/${X}`,Y[X])}for(let X=W.length-1;X>=0;X--){if(X<Y.length)continue;yield OW(`${$}/${X}`)}}function*oJ($,W,Y){if(!E0.IsTypedArray(Y)||W.length!==Y.length||Object.getPrototypeOf(W).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return yield N$($,Y);for(let X=0;X<Math.min(W.length,Y.length);X++)yield*T$(`${$}/${X}`,W[X],Y[X])}function*cJ($,W,Y){if(W===Y)return;yield N$($,Y)}function*T$($,W,Y){if(E0.IsPlainObject(W))return yield*hJ($,W,Y);if(E0.IsArray(W))return yield*nJ($,W,Y);if(E0.IsTypedArray(W))return yield*oJ($,W,Y);if(E0.IsValueType(W))return yield*cJ($,W,Y);throw new y6(W)}var lJ=function($,W){return[...T$("",$,W)]},tJ=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},sJ=function($){return $.length===0},rJ=function($,W){if(tJ(W))return d6.Clone(W[0].value);if(sJ(W))return d6.Clone($);const Y=d6.Clone($);for(let X of W)switch(X.type){case"insert":{T6.ValuePointer.Set(Y,X.path,X.value);break}case"update":{T6.ValuePointer.Set(Y,X.path,X.value);break}case"delete":{T6.ValuePointer.Delete(Y,X.path);break}}return Y};Object.defineProperty(SW,"__esModule",{value:!0});SW.Patch=SW.Diff=SW.ValueDeltaUnableToDiffUnknownValue=SW.ValueDeltaObjectWithSymbolKeyError=SW.Edit=SW.Delete=SW.Update=SW.Insert=void 0;var E0=x0(),i0=g0(),T6=f$(),d6=n1();SW.Insert=i0.Type.Object({type:i0.Type.Literal("insert"),path:i0.Type.String(),value:i0.Type.Unknown()});SW.Update=i0.Type.Object({type:i0.Type.Literal("update"),path:i0.Type.String(),value:i0.Type.Unknown()});SW.Delete=i0.Type.Object({type:i0.Type.Literal("delete"),path:i0.Type.String()});SW.Edit=i0.Type.Union([SW.Insert,SW.Update,SW.Delete]);class o1 extends Error{constructor($){super("Cannot diff objects with symbol keys");this.key=$}}SW.ValueDeltaObjectWithSymbolKeyError=o1;class y6 extends Error{constructor($){super("Unable to create diff edits for unknown value");this.value=$}}SW.ValueDeltaUnableToDiffUnknownValue=y6;SW.Diff=lJ;SW.Patch=rJ});var EW=z0((GW)=>{var YQ=function($,W,Y,X){if(!T0.IsPlainObject(Y))d$.ValuePointer.Set($,W,p6.Clone(X));else{const Z=Object.keys(Y),J=Object.keys(X);for(let Q of Z)if(!J.includes(Q))delete Y[Q];for(let Q of J)if(!Z.includes(Q))Y[Q]=null;for(let Q of J)u6($,`${W}/${Q}`,Y[Q],X[Q])}},XQ=function($,W,Y,X){if(!T0.IsArray(Y))d$.ValuePointer.Set($,W,p6.Clone(X));else{for(let Z=0;Z<X.length;Z++)u6($,`${W}/${Z}`,Y[Z],X[Z]);Y.splice(X.length)}},ZQ=function($,W,Y,X){if(T0.IsTypedArray(Y)&&Y.length===X.length)for(let Z=0;Z<Y.length;Z++)Y[Z]=X[Z];else d$.ValuePointer.Set($,W,p6.Clone(X))},JQ=function($,W,Y,X){if(Y===X)return;d$.ValuePointer.Set($,W,X)},u6=function($,W,Y,X){if(T0.IsArray(X))return XQ($,W,Y,X);if(T0.IsTypedArray(X))return ZQ($,W,Y,X);if(T0.IsPlainObject(X))return YQ($,W,Y,X);if(T0.IsValueType(X))return JQ($,W,Y,X)},RW=function($){return T0.IsTypedArray($)||T0.IsValueType($)},QQ=function($,W){return T0.IsPlainObject($)&&T0.IsArray(W)||T0.IsArray($)&&T0.IsPlainObject(W)},zQ=function($,W){if(RW($)||RW(W))throw new m6;if(QQ($,W))throw new i6;u6($,"",$,W)};Object.defineProperty(GW,"__esModule",{value:!0});GW.Mutate=GW.ValueMutateInvalidRootMutationError=GW.ValueMutateTypeMismatchError=void 0;var T0=x0(),d$=f$(),p6=n1();class i6 extends Error{constructor(){super("Cannot assign due type mismatch of assignable values")}}GW.ValueMutateTypeMismatchError=i6;class m6 extends Error{constructor(){super("Only object and array types can be mutated at the root level")}}GW.ValueMutateInvalidRootMutationError=m6;GW.Mutate=zQ});var kW=z0((VW)=>{var NQ=function($,W){if(!N1.IsPlainObject(W))return!1;const Y=[...Object.keys($),...Object.getOwnPropertySymbols($)],X=[...Object.keys(W),...Object.getOwnPropertySymbols(W)];if(Y.length!==X.length)return!1;return Y.every((Z)=>y$($[Z],W[Z]))},MQ=function($,W){return N1.IsDate(W)&&$.getTime()===W.getTime()},AQ=function($,W){if(!N1.IsArray(W)||$.length!==W.length)return!1;return $.every((Y,X)=>y$(Y,W[X]))},BQ=function($,W){if(!N1.IsTypedArray(W)||$.length!==W.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(W).constructor.name)return!1;return $.every((Y,X)=>y$(Y,W[X]))},UQ=function($,W){return $===W},y$=function($,W){if(N1.IsPlainObject($))return NQ($,W);if(N1.IsDate($))return MQ($,W);if(N1.IsTypedArray($))return BQ($,W);if(N1.IsArray($))return AQ($,W);if(N1.IsValueType($))return UQ($,W);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(VW,"__esModule",{value:!0});VW.Equal=void 0;var N1=x0();VW.Equal=y$});var M$=z0((M1)=>{var FQ=M1&&M1.__createBinding||(Object.create?function($,W,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(W,Y);if(!Z||("get"in Z?!W.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return W[Y]}};Object.defineProperty($,X,Z)}:function($,W,Y,X){if(X===void 0)X=Y;$[X]=W[Y]}),DQ=M1&&M1.__exportStar||function($,W){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y))FQ(W,$,Y)};Object.defineProperty(M1,"__esModule",{value:!0});M1.ValueErrorType=void 0;var wQ=z$();Object.defineProperty(M1,"ValueErrorType",{enumerable:!0,get:function(){return wQ.ValueErrorType}});DQ(G6(),M1)});var B$=z0((fW)=>{var KQ=function($){return $[I0.Kind]==="Any"||$[I0.Kind]==="Unknown"},r=function($){return $!==void 0},PQ=function($,W,Y){return!0},OQ=function($,W,Y){if(!w0.IsArray(Y))return!1;if(r($.minItems)&&!(Y.length>=$.minItems))return!1;if(r($.maxItems)&&!(Y.length<=$.maxItems))return!1;if(!Y.every((J)=>b0($.items,W,J)))return!1;if($.uniqueItems===!0&&!function(){const J=new Set;for(let Q of Y){const z=jQ.Hash(Q);if(J.has(z))return!1;else J.add(z)}return!0}())return!1;if(!(r($.contains)||w0.IsNumber($.minContains)||w0.IsNumber($.maxContains)))return!0;const X=r($.contains)?$.contains:I0.Type.Never(),Z=Y.reduce((J,Q)=>b0(X,W,Q)?J+1:J,0);if(Z===0)return!1;if(w0.IsNumber($.minContains)&&Z<$.minContains)return!1;if(w0.IsNumber($.maxContains)&&Z>$.maxContains)return!1;return!0},SQ=function($,W,Y){return w0.IsAsyncIterator(Y)},LQ=function($,W,Y){if(!w0.IsBigInt(Y))return!1;if(r($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(r($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(r($.maximum)&&!(Y<=$.maximum))return!1;if(r($.minimum)&&!(Y>=$.minimum))return!1;if(r($.multipleOf)&&Y%$.multipleOf!==BigInt(0))return!1;return!0},CQ=function($,W,Y){return w0.IsBoolean(Y)},IQ=function($,W,Y){return b0($.returns,W,Y.prototype)},bQ=function($,W,Y){if(!w0.IsDate(Y))return!1;if(r($.exclusiveMaximumTimestamp)&&!(Y.getTime()<$.exclusiveMaximumTimestamp))return!1;if(r($.exclusiveMinimumTimestamp)&&!(Y.getTime()>$.exclusiveMinimumTimestamp))return!1;if(r($.maximumTimestamp)&&!(Y.getTime()<=$.maximumTimestamp))return!1;if(r($.minimumTimestamp)&&!(Y.getTime()>=$.minimumTimestamp))return!1;if(r($.multipleOfTimestamp)&&Y.getTime()%$.multipleOfTimestamp!==0)return!1;return!0},RQ=function($,W,Y){return w0.IsFunction(Y)},GQ=function($,W,Y){if(!w0.IsInteger(Y))return!1;if(r($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(r($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(r($.maximum)&&!(Y<=$.maximum))return!1;if(r($.minimum)&&!(Y>=$.minimum))return!1;if(r($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0},_Q=function($,W,Y){const X=$.allOf.every((Z)=>b0(Z,W,Y));if($.unevaluatedProperties===!1){const Z=new RegExp(I0.KeyResolver.ResolvePattern($)),J=Object.getOwnPropertyNames(Y).every((Q)=>Z.test(Q));return X&&J}else if(I0.TypeGuard.TSchema($.unevaluatedProperties)){const Z=new RegExp(I0.KeyResolver.ResolvePattern($)),J=Object.getOwnPropertyNames(Y).every((Q)=>Z.test(Q)||b0($.unevaluatedProperties,W,Y[Q]));return X&&J}else return X},EQ=function($,W,Y){return w0.IsIterator(Y)},VQ=function($,W,Y){return Y===$.const},xQ=function($,W,Y){return!1},kQ=function($,W,Y){return!b0($.not,W,Y)},gQ=function($,W,Y){return w0.IsNull(Y)},fQ=function($,W,Y){if(!A$.TypeSystemPolicy.IsNumberLike(Y))return!1;if(r($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(r($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(r($.minimum)&&!(Y>=$.minimum))return!1;if(r($.maximum)&&!(Y<=$.maximum))return!1;if(r($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0},TQ=function($,W,Y){if(!A$.TypeSystemPolicy.IsObjectLike(Y))return!1;if(r($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(r($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;const X=Object.getOwnPropertyNames($.properties);for(let Z of X){const J=$.properties[Z];if($.required&&$.required.includes(Z)){if(!b0(J,W,Y[Z]))return!1;if((I0.ExtendsUndefined.Check(J)||KQ(J))&&!(Z in Y))return!1}else if(A$.TypeSystemPolicy.IsExactOptionalProperty(Y,Z)&&!b0(J,W,Y[Z]))return!1}if($.additionalProperties===!1){const Z=Object.getOwnPropertyNames(Y);if($.required&&$.required.length===X.length&&Z.length===X.length)return!0;else return Z.every((J)=>X.includes(J))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Y).every((J)=>X.includes(J)||b0($.additionalProperties,W,Y[J]));else return!0},dQ=function($,W,Y){return w0.IsPromise(Y)},yQ=function($,W,Y){if(!A$.TypeSystemPolicy.IsRecordLike(Y))return!1;if(r($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(r($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;const[X,Z]=Object.entries($.patternProperties)[0],J=new RegExp(X),Q=Object.entries(Y).every(([F,D])=>{return J.test(F)?b0(Z,W,D):!0}),z=typeof $.additionalProperties==="object"?Object.entries(Y).every(([F,D])=>{return!J.test(F)?b0($.additionalProperties,W,D):!0}):!0,B=$.additionalProperties===!1?Object.getOwnPropertyNames(Y).every((F)=>{return J.test(F)}):!0;return Q&&z&&B},vQ=function($,W,Y){return b0(gW.Deref($,W),W,Y)},pQ=function($,W,Y){if(!w0.IsString(Y))return!1;if(r($.minLength)){if(!(Y.length>=$.minLength))return!1}if(r($.maxLength)){if(!(Y.length<=$.maxLength))return!1}if(r($.pattern)){if(!new RegExp($.pattern).test(Y))return!1}if(r($.format)){if(!I0.FormatRegistry.Has($.format))return!1;return I0.FormatRegistry.Get($.format)(Y)}return!0},iQ=function($,W,Y){return w0.IsSymbol(Y)},mQ=function($,W,Y){return w0.IsString(Y)&&new RegExp($.pattern).test(Y)},uQ=function($,W,Y){return b0(gW.Deref($,W),W,Y)},hQ=function($,W,Y){if(!w0.IsArray(Y))return!1;if($.items===void 0&&Y.length!==0)return!1;if(Y.length!==$.maxItems)return!1;if(!$.items)return!0;for(let X=0;X<$.items.length;X++)if(!b0($.items[X],W,Y[X]))return!1;return!0},nQ=function($,W,Y){return w0.IsUndefined(Y)},oQ=function($,W,Y){return $.anyOf.some((X)=>b0(X,W,Y))},cQ=function($,W,Y){if(!w0.IsUint8Array(Y))return!1;if(r($.maxByteLength)&&!(Y.length<=$.maxByteLength))return!1;if(r($.minByteLength)&&!(Y.length>=$.minByteLength))return!1;return!0},lQ=function($,W,Y){return!0},tQ=function($,W,Y){return A$.TypeSystemPolicy.IsVoidLike(Y)},sQ=function($,W,Y){if(!I0.TypeRegistry.Has($[I0.Kind]))return!1;return I0.TypeRegistry.Get($[I0.Kind])($,Y)},b0=function($,W,Y){const X=r($.$id)?[...W,$]:W,Z=$;switch(Z[I0.Kind]){case"Any":return PQ(Z,X,Y);case"Array":return OQ(Z,X,Y);case"AsyncIterator":return SQ(Z,X,Y);case"BigInt":return LQ(Z,X,Y);case"Boolean":return CQ(Z,X,Y);case"Constructor":return IQ(Z,X,Y);case"Date":return bQ(Z,X,Y);case"Function":return RQ(Z,X,Y);case"Integer":return GQ(Z,X,Y);case"Intersect":return _Q(Z,X,Y);case"Iterator":return EQ(Z,X,Y);case"Literal":return VQ(Z,X,Y);case"Never":return xQ(Z,X,Y);case"Not":return kQ(Z,X,Y);case"Null":return gQ(Z,X,Y);case"Number":return fQ(Z,X,Y);case"Object":return TQ(Z,X,Y);case"Promise":return dQ(Z,X,Y);case"Record":return yQ(Z,X,Y);case"Ref":return vQ(Z,X,Y);case"String":return pQ(Z,X,Y);case"Symbol":return iQ(Z,X,Y);case"TemplateLiteral":return mQ(Z,X,Y);case"This":return uQ(Z,X,Y);case"Tuple":return hQ(Z,X,Y);case"Undefined":return nQ(Z,X,Y);case"Union":return oQ(Z,X,Y);case"Uint8Array":return cQ(Z,X,Y);case"Unknown":return lQ(Z,X,Y);case"Void":return tQ(Z,X,Y);default:if(!I0.TypeRegistry.Has(Z[I0.Kind]))throw new h6(Z);return sQ(Z,X,Y)}},rQ=function(...$){return $.length===3?b0($[0],$[1],$[2]):b0($[0],[],$[1])};Object.defineProperty(fW,"__esModule",{value:!0});fW.Check=fW.ValueCheckUnknownTypeError=void 0;var w0=x0(),A$=M$(),gW=K1(),jQ=H$(),I0=g0();class h6 extends I0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}fW.ValueCheckUnknownTypeError=h6;fW.Check=rQ});var r6=z0((pW)=>{var $4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return{}},W4=function($,W){if($.uniqueItems===!0&&!a.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!a.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in $)return $.default;else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Y)=>{return d0($.items,W)});else return[]},Y4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return async function*(){}()},X4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return BigInt(0)},Z4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return!1},J4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else{const Y=d0($.returns,W);if(typeof Y==="object"&&!Array.isArray(Y))return class{constructor(){for(let[X,Z]of Object.entries(Y)){const J=this;J[X]=Z}}};else return class{}}},Q4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date(0)},z4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return()=>d0($.returns,W)},H4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},q4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else{const Y=$.allOf.reduce((X,Z)=>{const J=d0(Z,W);return typeof J==="object"?{...X,...J}:J},{});if(!eQ.Check($,W,Y))throw new l6($);return Y}},N4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return function*(){}()},M4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return $.const},A4=function($,W){throw new o6($)},B4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else throw new c6($)},U4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return null},F4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},D4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else{const Y=new Set($.required);return $.default||Object.entries($.properties).reduce((X,[Z,J])=>{return Y.has(Z)?{...X,[Z]:d0(J,W)}:{...X}},{})}},w4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return Promise.resolve(d0($.item,W))},j4=function($,W){const[Y,X]=Object.entries($.patternProperties)[0];if(a.HasPropertyKey($,"default"))return $.default;else if(!(Y===k0.PatternStringExact||Y===k0.PatternNumberExact))return Y.slice(1,Y.length-1).split("|").reduce((J,Q)=>{return{...J,[Q]:d0(X,W)}},{});else return{}},K4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return d0(yW.Deref($,W),W)},P4=function($,W){if($.pattern!==void 0)if(!a.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return $.default;else if($.format!==void 0)if(!a.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return $.default;else if(a.HasPropertyKey($,"default"))return $.default;else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>".").join("");else return""},O4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else if("value"in $)return Symbol.for($.value);else return Symbol()},S4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;const Y=k0.TemplateLiteralParser.ParseExact($.pattern);if(!k0.TemplateLiteralFinite.Check(Y))throw new t6($);return k0.TemplateLiteralGenerator.Generate(Y).next().value},L4=function($,W){if(vW++>dW)throw new s6($,dW);if(a.HasPropertyKey($,"default"))return $.default;else return d0(yW.Deref($,W),W)},C4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Y,X)=>d0($.items[X],W))},I4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return},b4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return d0($.anyOf[0],W)},R4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},G4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return{}},_4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else return},E4=function($,W){if(a.HasPropertyKey($,"default"))return $.default;else throw new Error("User defined types must specify a default value")},d0=function($,W){const Y=a.IsString($.$id)?[...W,$]:W,X=$;switch(X[k0.Kind]){case"Any":return $4(X,Y);case"Array":return W4(X,Y);case"AsyncIterator":return Y4(X,Y);case"BigInt":return X4(X,Y);case"Boolean":return Z4(X,Y);case"Constructor":return J4(X,Y);case"Date":return Q4(X,Y);case"Function":return z4(X,Y);case"Integer":return H4(X,Y);case"Intersect":return q4(X,Y);case"Iterator":return N4(X,Y);case"Literal":return M4(X,Y);case"Never":return A4(X,Y);case"Not":return B4(X,Y);case"Null":return U4(X,Y);case"Number":return F4(X,Y);case"Object":return D4(X,Y);case"Promise":return w4(X,Y);case"Record":return j4(X,Y);case"Ref":return K4(X,Y);case"String":return P4(X,Y);case"Symbol":return O4(X,Y);case"TemplateLiteral":return S4(X,Y);case"This":return L4(X,Y);case"Tuple":return C4(X,Y);case"Undefined":return I4(X,Y);case"Union":return b4(X,Y);case"Uint8Array":return R4(X,Y);case"Unknown":return G4(X,Y);case"Void":return _4(X,Y);default:if(!k0.TypeRegistry.Has(X[k0.Kind]))throw new n6(X);return E4(X,Y)}},V4=function(...$){return vW=0,$.length===2?d0($[0],$[1]):d0($[0],[])};Object.defineProperty(pW,"__esModule",{value:!0});pW.Create=pW.ValueCreateRecursiveInstantiationError=pW.ValueCreateTempateLiteralTypeError=pW.ValueCreateIntersectTypeError=pW.ValueCreateNotTypeError=pW.ValueCreateNeverTypeError=pW.ValueCreateUnknownTypeError=void 0;var a=x0(),eQ=B$(),yW=K1(),k0=g0();class n6 extends k0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}pW.ValueCreateUnknownTypeError=n6;class o6 extends k0.TypeBoxError{constructor($){super("Never types cannot be created");this.schema=$}}pW.ValueCreateNeverTypeError=o6;class c6 extends k0.TypeBoxError{constructor($){super("Not types must have a default value");this.schema=$}}pW.ValueCreateNotTypeError=c6;class l6 extends k0.TypeBoxError{constructor($){super("Intersect produced invalid value. Consider using a default value.");this.schema=$}}pW.ValueCreateIntersectTypeError=l6;class t6 extends k0.TypeBoxError{constructor($){super("Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=$}}pW.ValueCreateTempateLiteralTypeError=t6;class s6 extends k0.TypeBoxError{constructor($,W){super("Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=$,this.recursiveMaxDepth=W}}pW.ValueCreateRecursiveInstantiationError=s6;var dW=512,vW=0;pW.Create=V4});var lW=z0((oW)=>{var hW=function($,W,Y){return m0.Check($,W,Y)?c1.Clone(Y):B1.Create($,W)},e6=function($,W,Y){return m0.Check($,W,Y)?Y:B1.Create($,W)},y4=function($,W,Y){if(m0.Check($,W,Y))return c1.Clone(Y);const X=P1.IsArray(Y)?c1.Clone(Y):B1.Create($,W),Z=P1.IsNumber($.minItems)&&X.length<$.minItems?[...X,...Array.from({length:$.minItems-X.length},()=>null)]:X,Q=(P1.IsNumber($.maxItems)&&Z.length>$.maxItems?Z.slice(0,$.maxItems):Z).map((B)=>Z1($.items,W,B));if($.uniqueItems!==!0)return Q;const z=[...new Set(Q)];if(!m0.Check($,W,z))throw new $8($,z);return z},v4=function($,W,Y){if(m0.Check($,W,Y))return B1.Create($,W);const X=new Set($.returns.required||[]),Z=function(){};for(let[J,Q]of Object.entries($.returns.properties)){if(!X.has(J)&&Y.prototype[J]===void 0)continue;Z.prototype[J]=Z1(Q,W,Y.prototype[J])}return Z},p4=function($,W,Y){const X=B1.Create($,W),Z=P1.IsPlainObject(X)&&P1.IsPlainObject(Y)?{...X,...Y}:Y;return m0.Check($,W,Z)?Z:B1.Create($,W)},i4=function($,W,Y){throw new W8($)},m4=function($,W,Y){if(m0.Check($,W,Y))return Y;if(Y===null||typeof Y!=="object")return B1.Create($,W);const X=new Set($.required||[]),Z={};for(let[J,Q]of Object.entries($.properties)){if(!X.has(J)&&Y[J]===void 0)continue;Z[J]=Z1(Q,W,Y[J])}if(typeof $.additionalProperties==="object"){const J=Object.getOwnPropertyNames($.properties);for(let Q of Object.getOwnPropertyNames(Y)){if(J.includes(Q))continue;Z[Q]=Z1($.additionalProperties,W,Y[Q])}}return Z},u4=function($,W,Y){if(m0.Check($,W,Y))return c1.Clone(Y);if(Y===null||typeof Y!=="object"||Array.isArray(Y)||Y instanceof Date)return B1.Create($,W);const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],J={};for(let[Q,z]of Object.entries(Y))J[Q]=Z1(Z,W,z);return J},h4=function($,W,Y){return Z1(mW.Deref($,W),W,Y)},n4=function($,W,Y){return Z1(mW.Deref($,W),W,Y)},o4=function($,W,Y){if(m0.Check($,W,Y))return c1.Clone(Y);if(!P1.IsArray(Y))return B1.Create($,W);if($.items===void 0)return[];return $.items.map((X,Z)=>Z1(X,W,Y[Z]))},c4=function($,W,Y){return m0.Check($,W,Y)?c1.Clone(Y):a6.Create($,W,Y)},Z1=function($,W,Y){const X=P1.IsString($.$id)?[...W,$]:W,Z=$;switch($[A1.Kind]){case"Array":return y4(Z,X,Y);case"Constructor":return v4(Z,X,Y);case"Intersect":return p4(Z,X,Y);case"Never":return i4(Z,X,Y);case"Object":return m4(Z,X,Y);case"Record":return u4(Z,X,Y);case"Ref":return h4(Z,X,Y);case"This":return n4(Z,X,Y);case"Tuple":return o4(Z,X,Y);case"Union":return c4(Z,X,Y);case"Date":case"Symbol":case"Uint8Array":return hW($,W,Y);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Function":case"Integer":case"Iterator":case"Literal":case"Not":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Unknown":case"Void":return e6(Z,X,Y);default:if(!A1.TypeRegistry.Has(Z[A1.Kind]))throw new Y8(Z);return e6(Z,X,Y)}},nW=function(...$){return $.length===3?Z1($[0],$[1],$[2]):Z1($[0],[],$[1])};Object.defineProperty(oW,"__esModule",{value:!0});oW.Cast=oW.Default=oW.DefaultClone=oW.ValueCastUnknownTypeError=oW.ValueCastRecursiveTypeError=oW.ValueCastNeverTypeError=oW.ValueCastArrayUniqueItemsTypeError=void 0;var P1=x0(),B1=r6(),m0=B$(),c1=n1(),mW=K1(),A1=g0();class $8 extends A1.TypeBoxError{constructor($,W){super("Array cast produced invalid data due to uniqueItems constraint");this.schema=$,this.value=W}}oW.ValueCastArrayUniqueItemsTypeError=$8;class W8 extends A1.TypeBoxError{constructor($){super("Never types cannot be cast");this.schema=$}}oW.ValueCastNeverTypeError=W8;class uW extends A1.TypeBoxError{constructor($){super("Cannot cast recursive schemas");this.schema=$}}oW.ValueCastRecursiveTypeError=uW;class Y8 extends A1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}oW.ValueCastUnknownTypeError=Y8;var a6;(function($){function W(Z,J,Q){if(Z[A1.Kind]==="Object"&&typeof Q==="object"&&!P1.IsNull(Q)){const z=Z,B=Object.getOwnPropertyNames(Q),F=Object.entries(z.properties),[D,S]=[1/F.length,F.length];return F.reduce((b,[j,M])=>{const P=M[A1.Kind]==="Literal"&&M.const===Q[j]?S:0,O=m0.Check(M,J,Q[j])?D:0,A=B.includes(j)?D:0;return b+(P+O+A)},0)}else return m0.Check(Z,J,Q)?1:0}function Y(Z,J,Q){let[z,B]=[Z.anyOf[0],0];for(let F of Z.anyOf){const D=W(F,J,Q);if(D>B)z=F,B=D}return z}function X(Z,J,Q){if("default"in Z)return Z.default;else{const z=Y(Z,J,Q);return nW(z,J,Q)}}$.Create=X})(a6||(a6={}));oW.DefaultClone=hW;oW.Default=e6;oW.Cast=nW});var WY=z0((eW)=>{var v$=function($){return Z0.IsString($)&&!isNaN($)&&!isNaN(parseFloat($))},Y9=function($){return Z0.IsBigInt($)||Z0.IsBoolean($)||Z0.IsNumber($)},U$=function($){return $===!0||Z0.IsNumber($)&&$===1||Z0.IsBigInt($)&&$===BigInt("1")||Z0.IsString($)&&($.toLowerCase()==="true"||$==="1")},F$=function($){return $===!1||Z0.IsNumber($)&&($===0||Object.is($,-0))||Z0.IsBigInt($)&&$===BigInt("0")||Z0.IsString($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")},X9=function($){return Z0.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},Z9=function($){return Z0.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},J9=function($){return Z0.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},Q9=function($){return Z0.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},z9=function($){return Z0.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},H9=function($,W){const Y=rW($);return Y===W?Y:$},q9=function($,W){const Y=aW($);return Y===W?Y:$},N9=function($,W){const Y=sW($);return Y===W?Y:$},M9=function($,W){if(typeof $.const==="string")return H9(W,$.const);else if(typeof $.const==="number")return q9(W,$.const);else if(typeof $.const==="boolean")return N9(W,$.const);else return $9.Clone(W)},sW=function($){return U$($)?!0:F$($)?!1:$},A9=function($){return v$($)?BigInt(parseInt($)):Z0.IsNumber($)?BigInt($|0):F$($)?BigInt(0):U$($)?BigInt(1):$},rW=function($){return Y9($)?$.toString():Z0.IsSymbol($)&&$.description!==void 0?$.description.toString():$},aW=function($){return v$($)?parseFloat($):U$($)?1:F$($)?0:$},B9=function($){return v$($)?parseInt($):Z0.IsNumber($)?$|0:U$($)?1:F$($)?0:$},U9=function($){return Z0.IsString($)&&$.toLowerCase()==="null"?null:$},F9=function($){return Z0.IsString($)&&$==="undefined"?void 0:$},D9=function($){return Z0.IsDate($)?$:Z0.IsNumber($)?new Date($):U$($)?new Date(1):F$($)?new Date(0):v$($)?new Date(parseInt($)):Z9($)?new Date(`1970-01-01T${$}.000Z`):X9($)?new Date(`1970-01-01T${$}`):Q9($)?new Date(`${$}.000Z`):J9($)?new Date($):z9($)?new Date(`${$}T00:00:00.000Z`):$},X8=function($){return $},w9=function($,W,Y){if(Z0.IsArray(Y))return Y.map((X)=>l0($.items,W,X));return Y},j9=function($,W,Y){return A9(Y)},K9=function($,W,Y){return sW(Y)},P9=function($,W,Y){return D9(Y)},O9=function($,W,Y){return B9(Y)},S9=function($,W,Y){return $.allOf.every((X)=>l1.TypeGuard.TObject(X))?l0(l1.Type.Composite($.allOf),W,Y):l0($.allOf[0],W,Y)},L9=function($,W,Y){return M9($,Y)},C9=function($,W,Y){return U9(Y)},I9=function($,W,Y){return aW(Y)},b9=function($,W,Y){if(Z0.IsObject(Y))return Object.getOwnPropertyNames($.properties).reduce((X,Z)=>{return Y[Z]!==void 0?{...X,[Z]:l0($.properties[Z],W,Y[Z])}:{...X}},Y);return Y},R9=function($,W,Y){const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],J={};for(let[Q,z]of Object.entries(Y))J[Q]=l0(Z,W,z);return J},G9=function($,W,Y){return l0(tW.Deref($,W),W,Y)},_9=function($,W,Y){return rW(Y)},E9=function($,W,Y){return Z0.IsString(Y)||Z0.IsNumber(Y)?Symbol(Y):Y},V9=function($,W,Y){return l0(tW.Deref($,W),W,Y)},x9=function($,W,Y){if(Z0.IsArray(Y)&&!Z0.IsUndefined($.items))return Y.map((X,Z)=>{return Z<$.items.length?l0($.items[Z],W,X):X});return Y},k9=function($,W,Y){return F9(Y)},g9=function($,W,Y){for(let X of $.anyOf){const Z=l0(X,W,Y);if(W9.Check(X,W,Z))return Z}return Y},l0=function($,W,Y){const X=Z0.IsString($.$id)?[...W,$]:W,Z=$;switch($[l1.Kind]){case"Array":return w9(Z,X,Y);case"BigInt":return j9(Z,X,Y);case"Boolean":return K9(Z,X,Y);case"Date":return P9(Z,X,Y);case"Integer":return O9(Z,X,Y);case"Intersect":return S9(Z,X,Y);case"Literal":return L9(Z,X,Y);case"Null":return C9(Z,X,Y);case"Number":return I9(Z,X,Y);case"Object":return b9(Z,X,Y);case"Record":return R9(Z,X,Y);case"Ref":return G9(Z,X,Y);case"String":return _9(Z,X,Y);case"Symbol":return E9(Z,X,Y);case"This":return V9(Z,X,Y);case"Tuple":return x9(Z,X,Y);case"Undefined":return k9(Z,X,Y);case"Union":return g9(Z,X,Y);case"Any":case"AsyncIterator":case"Constructor":case"Function":case"Iterator":case"Never":case"Promise":case"TemplateLiteral":case"Uint8Array":case"Unknown":case"Void":return X8(Y);default:if(!l1.TypeRegistry.Has(Z[l1.Kind]))throw new Z8(Z);return X8(Y)}},f9=function(...$){return $.length===3?l0($[0],$[1],$[2]):l0($[0],[],$[1])};Object.defineProperty(eW,"__esModule",{value:!0});eW.Convert=eW.Default=eW.ValueConvertUnknownTypeError=void 0;var Z0=x0(),$9=n1(),W9=B$(),tW=K1(),l1=g0();class Z8 extends l1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}eW.ValueConvertUnknownTypeError=Z8;eW.Default=X8;eW.Convert=f9});var z8=z0((zY)=>{Object.defineProperty(zY,"__esModule",{value:!0});zY.EncodeTransform=zY.DecodeTransform=zY.HasTransform=zY.TransformEncodeError=zY.TransformDecodeError=zY.TransformEncodeCheckError=zY.TransformDecodeCheckError=zY.TransformUnknownTypeError=void 0;var t0=x0(),t1=K1(),n=g0();class D$ extends n.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}zY.TransformUnknownTypeError=D$;class JY extends n.TypeBoxError{constructor($,W,Y){super("Unable to decode due to invalid value");this.schema=$,this.value=W,this.error=Y}}zY.TransformDecodeCheckError=JY;class QY extends n.TypeBoxError{constructor($,W,Y){super("Unable to encode due to invalid value");this.schema=$,this.value=W,this.error=Y}}zY.TransformEncodeCheckError=QY;class J8 extends n.TypeBoxError{constructor($,W,Y){super(`${Y instanceof Error?Y.message:"Unknown error"}`);this.schema=$,this.value=W}}zY.TransformDecodeError=J8;class Q8 extends n.TypeBoxError{constructor($,W,Y){super(`${Y instanceof Error?Y.message:"Unknown error"}`);this.schema=$,this.value=W}}zY.TransformEncodeError=Q8;var YY;(function($){function W(w,I){return n.TypeGuard.TTransform(w)||P(w.items,I)}function Y(w,I){return n.TypeGuard.TTransform(w)||P(w.items,I)}function X(w,I){return n.TypeGuard.TTransform(w)||P(w.returns,I)||w.parameters.some((G)=>P(G,I))}function Z(w,I){return n.TypeGuard.TTransform(w)||P(w.returns,I)||w.parameters.some((G)=>P(G,I))}function J(w,I){return n.TypeGuard.TTransform(w)||n.TypeGuard.TTransform(w.unevaluatedProperties)||w.allOf.some((G)=>P(G,I))}function Q(w,I){return n.TypeGuard.TTransform(w)||P(w.items,I)}function z(w,I){return n.TypeGuard.TTransform(w)||P(w.not,I)}function B(w,I){return n.TypeGuard.TTransform(w)||Object.values(w.properties).some((G)=>P(G,I))||n.TypeGuard.TSchema(w.additionalProperties)&&P(w.additionalProperties,I)}function F(w,I){return n.TypeGuard.TTransform(w)||P(w.item,I)}function D(w,I){const G=Object.getOwnPropertyNames(w.patternProperties)[0],k=w.patternProperties[G];return n.TypeGuard.TTransform(w)||P(k,I)||n.TypeGuard.TSchema(w.additionalProperties)&&n.TypeGuard.TTransform(w.additionalProperties)}function S(w,I){if(n.TypeGuard.TTransform(w))return!0;return P(t1.Deref(w,I),I)}function b(w,I){if(n.TypeGuard.TTransform(w))return!0;return P(t1.Deref(w,I),I)}function j(w,I){return n.TypeGuard.TTransform(w)||n.TypeGuard.TSchema(w.items)&&w.items.some((G)=>P(G,I))}function M(w,I){return n.TypeGuard.TTransform(w)||w.anyOf.some((G)=>P(G,I))}function P(w,I){const G=t0.IsString(w.$id)?[...I,w]:I,k=w;if(w.$id&&O.has(w.$id))return!1;if(w.$id)O.add(w.$id);switch(w[n.Kind]){case"Array":return W(k,G);case"AsyncIterator":return Y(k,G);case"Constructor":return X(k,G);case"Function":return Z(k,G);case"Intersect":return J(k,G);case"Iterator":return Q(k,G);case"Not":return z(k,G);case"Object":return B(k,G);case"Promise":return F(k,G);case"Record":return D(k,G);case"Ref":return S(k,G);case"This":return b(k,G);case"Tuple":return j(k,G);case"Union":return M(k,G);case"Any":case"BigInt":case"Boolean":case"Date":case"Integer":case"Literal":case"Never":case"Null":case"Number":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return n.TypeGuard.TTransform(w);default:if(!n.TypeRegistry.Has(k[n.Kind]))throw new D$(k);return n.TypeGuard.TTransform(w)}}const O=new Set;function A(w,I){return O.clear(),P(w,I)}$.Has=A})(YY||(zY.HasTransform=YY={}));var XY;(function($){function W(M,P){try{return n.TypeGuard.TTransform(M)?M[n.Transform].Decode(P):P}catch(O){throw new J8(M,P,O)}}function Y(M,P,O){const A=O.map((w)=>S(M.items,P,w));return W(M,A)}function X(M,P,O){if(!t0.IsPlainObject(O)||t0.IsValueType(O))return W(M,O);const A=n.KeyResolver.ResolveKeys(M,{includePatterns:!1}),w=Object.entries(O).reduce((G,[k,_])=>{return!A.includes(k)?{...G,[k]:_}:{...G,[k]:W(n.IndexedAccessor.Resolve(M,[k]),_)}},{});if(!n.TypeGuard.TTransform(M.unevaluatedProperties))return W(M,w);const I=Object.entries(w).reduce((G,[k,_])=>{return A.includes(k)?{...G,[k]:_}:{...G,[k]:W(M.unevaluatedProperties,_)}},{});return W(M,I)}function Z(M,P,O){const A=S(M.not,P,O);return W(M,A)}function J(M,P,O){if(!t0.IsPlainObject(O))return W(M,O);const A=Object.entries(O).reduce((G,[k,_])=>{return!(k in M.properties)?{...G,[k]:_}:{...G,[k]:S(M.properties[k],P,_)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return W(M,A);const w=M.additionalProperties,I=Object.entries(A).reduce((G,[k,_])=>{return k in M.properties?{...G,[k]:_}:{...G,[k]:S(w,P,_)}},{});return W(M,I)}function Q(M,P,O){if(!t0.IsPlainObject(O))return W(M,O);const A=Object.getOwnPropertyNames(M.patternProperties)[0],w=M.patternProperties[A],I=new RegExp(A),G=Object.entries(O).reduce((J0,[W0,A0])=>{return!I.test(W0)?{...J0,[W0]:A0}:{...J0,[W0]:S(w,P,A0)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return W(M,G);const k=M.additionalProperties,_=Object.entries(G).reduce((J0,[W0,A0])=>{return I.test(W0)?{...J0,[W0]:A0}:{...J0,[W0]:S(k,P,A0)}},{});return W(M,_)}function z(M,P,O){const A=t1.Deref(M,P),w=S(A,P,O);return W(M,w)}function B(M,P,O){const A=t1.Deref(M,P),w=S(A,P,O);return W(M,w)}function F(M,P,O){const A=t0.IsArray(M.items)?M.items.map((w,I)=>S(w,P,O[I])):[];return W(M,A)}function D(M,P,O){const A=W(M,O);for(let w of M.anyOf){if(!b(w,P,A))continue;return S(w,P,A)}return A}function S(M,P,O){const A=typeof M.$id==="string"?[...P,M]:P,w=M;switch(M[n.Kind]){case"Array":return Y(w,A,O);case"Intersect":return X(w,A,O);case"Not":return Z(w,A,O);case"Object":return J(w,A,O);case"Record":return Q(w,A,O);case"Ref":return z(w,A,O);case"Symbol":return W(w,O);case"This":return B(w,A,O);case"Tuple":return F(w,A,O);case"Union":return D(w,A,O);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return W(w,O);default:if(!n.TypeRegistry.Has(w[n.Kind]))throw new D$(w);return W(w,O)}}let b=()=>!1;function j(M,P,O,A){return b=A,S(M,P,O)}$.Decode=j})(XY||(zY.DecodeTransform=XY={}));var ZY;(function($){function W(M,P){try{return n.TypeGuard.TTransform(M)?M[n.Transform].Encode(P):P}catch(O){throw new Q8(M,P,O)}}function Y(M,P,O){return W(M,O).map((w)=>S(M.items,P,w))}function X(M,P,O){const A=W(M,O);if(!t0.IsPlainObject(O)||t0.IsValueType(O))return A;const w=n.KeyResolver.ResolveKeys(M,{includePatterns:!1}),I=Object.entries(A).reduce((G,[k,_])=>{return!w.includes(k)?{...G,[k]:_}:{...G,[k]:W(n.IndexedAccessor.Resolve(M,[k]),_)}},{});if(!n.TypeGuard.TTransform(M.unevaluatedProperties))return W(M,I);return Object.entries(I).reduce((G,[k,_])=>{return w.includes(k)?{...G,[k]:_}:{...G,[k]:W(M.unevaluatedProperties,_)}},{})}function Z(M,P,O){const A=W(M,O);return W(M.not,A)}function J(M,P,O){const A=W(M,O);if(!t0.IsPlainObject(O))return A;const w=Object.entries(A).reduce((G,[k,_])=>{return!(k in M.properties)?{...G,[k]:_}:{...G,[k]:S(M.properties[k],P,_)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return w;const I=M.additionalProperties;return Object.entries(w).reduce((G,[k,_])=>{return k in M.properties?{...G,[k]:_}:{...G,[k]:S(I,P,_)}},{})}function Q(M,P,O){const A=W(M,O);if(!t0.IsPlainObject(O))return A;const w=Object.getOwnPropertyNames(M.patternProperties)[0],I=M.patternProperties[w],G=new RegExp(w),k=Object.entries(A).reduce((J0,[W0,A0])=>{return!G.test(W0)?{...J0,[W0]:A0}:{...J0,[W0]:S(I,P,A0)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return W(M,k);const _=M.additionalProperties;return Object.entries(k).reduce((J0,[W0,A0])=>{return G.test(W0)?{...J0,[W0]:A0}:{...J0,[W0]:S(_,P,A0)}},{})}function z(M,P,O){const A=t1.Deref(M,P),w=S(A,P,O);return W(M,w)}function B(M,P,O){const A=t1.Deref(M,P),w=S(A,P,O);return W(M,w)}function F(M,P,O){const A=W(M,O);return t0.IsArray(M.items)?M.items.map((w,I)=>S(w,P,A[I])):[]}function D(M,P,O){for(let A of M.anyOf){if(!b(A,P,O))continue;const w=S(A,P,O);return W(M,w)}for(let A of M.anyOf){const w=S(A,P,O);if(!b(M,P,w))continue;return W(M,w)}return W(M,O)}function S(M,P,O){const A=typeof M.$id==="string"?[...P,M]:P,w=M;switch(M[n.Kind]){case"Array":return Y(w,A,O);case"Intersect":return X(w,A,O);case"Not":return Z(w,A,O);case"Object":return J(w,A,O);case"Record":return Q(w,A,O);case"Ref":return z(w,A,O);case"This":return B(w,A,O);case"Tuple":return F(w,A,O);case"Union":return D(w,A,O);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return W(w,O);default:if(!n.TypeRegistry.Has(w[n.Kind]))throw new D$(w);return W(w,O)}}let b=()=>!1;function j(M,P,O,A){return b=A,S(M,P,O)}$.Encode=j})(ZY||(zY.EncodeTransform=ZY={}))});var wY=z0((FY)=>{Object.defineProperty(FY,"__esModule",{value:!0});FY.Value=void 0;var qY=g$(),n9=EW(),o9=H$(),c9=kW(),NY=lW(),l9=n1(),MY=WY(),AY=r6(),p$=B$(),BY=v6(),i$=z8(),UY;(function($){function W(...M){return NY.Cast.apply(NY,M)}$.Cast=W;function Y(...M){return AY.Create.apply(AY,M)}$.Create=Y;function X(...M){return p$.Check.apply(p$,M)}$.Check=X;function Z(...M){return MY.Convert.apply(MY,M)}$.Convert=Z;function J(M){return l9.Clone(M)}$.Clone=J;function Q(...M){const[P,O,A]=M.length===3?[M[0],M[1],M[2]]:[M[0],[],M[1]];if(!X(P,O,A))throw new i$.TransformDecodeCheckError(P,A,B(P,O,A).First());return i$.DecodeTransform.Decode(P,O,A,p$.Check)}$.Decode=Q;function z(...M){const[P,O,A]=M.length===3?[M[0],M[1],M[2]]:[M[0],[],M[1]],w=i$.EncodeTransform.Encode(P,O,A,p$.Check);if(!X(P,O,w))throw new i$.TransformEncodeCheckError(P,A,B(P,O,A).First());return w}$.Encode=z;function B(...M){return qY.Errors.apply(qY,M)}$.Errors=B;function F(M,P){return c9.Equal(M,P)}$.Equal=F;function D(M,P){return BY.Diff(M,P)}$.Diff=D;function S(M){return o9.Hash(M)}$.Hash=S;function b(M,P){return BY.Patch(M,P)}$.Patch=b;function j(M,P){n9.Mutate(M,P)}$.Mutate=j})(UY||(FY.Value=UY={}))});var u$=z0((J1)=>{Object.defineProperty(J1,"__esModule",{value:!0});J1.Value=J1.ValuePointer=J1.Delete=J1.Update=J1.Insert=J1.Edit=J1.ValueErrorIterator=J1.ValueErrorType=void 0;var jY=g$();Object.defineProperty(J1,"ValueErrorType",{enumerable:!0,get:function(){return jY.ValueErrorType}});Object.defineProperty(J1,"ValueErrorIterator",{enumerable:!0,get:function(){return jY.ValueErrorIterator}});var m$=v6();Object.defineProperty(J1,"Edit",{enumerable:!0,get:function(){return m$.Edit}});Object.defineProperty(J1,"Insert",{enumerable:!0,get:function(){return m$.Insert}});Object.defineProperty(J1,"Update",{enumerable:!0,get:function(){return m$.Update}});Object.defineProperty(J1,"Delete",{enumerable:!0,get:function(){return m$.Delete}});var t9=f$();Object.defineProperty(J1,"ValuePointer",{enumerable:!0,get:function(){return t9.ValuePointer}});var s9=wY();Object.defineProperty(J1,"Value",{enumerable:!0,get:function(){return s9.Value}})});var CY=z0((SY)=>{Object.defineProperty(SY,"__esModule",{value:!0});SY.TypeCompiler=SY.Policy=SY.TypeCompilerTypeGuardError=SY.TypeCompilerUnknownTypeError=SY.TypeCheck=void 0;var j$=z8(),l=x0(),J7=z$(),K$=M$(),Q7=K1(),z7=H$(),F0=g0();class B8{constructor($,W,Y,X){this.schema=$,this.references=W,this.checkFunc=Y,this.code=X,this.hasTransform=j$.HasTransform.Has($,W)}Code(){return this.code}Errors($){return J7.Errors(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new j$.TransformDecodeCheckError(this.schema,$,this.Errors($).First());return this.hasTransform?j$.DecodeTransform.Decode(this.schema,this.references,$,(W,Y,X)=>this.Check(X)):$}Encode($){const W=this.hasTransform?j$.EncodeTransform.Encode(this.schema,this.references,$,(Y,X,Z)=>this.Check(Z)):$;if(!this.checkFunc(W))throw new j$.TransformEncodeCheckError(this.schema,$,this.Errors($).First());return W}}SY.TypeCheck=B8;var U1;(function($){function W(J){return J===36}$.DollarSign=W;function Y(J){return J===95}$.IsUnderscore=Y;function X(J){return J>=65&&J<=90||J>=97&&J<=122}$.IsAlpha=X;function Z(J){return J>=48&&J<=57}$.IsNumeric=Z})(U1||(U1={}));var c$;(function($){function W(J){if(J.length===0)return!1;return U1.IsNumeric(J.charCodeAt(0))}function Y(J){if(W(J))return!1;for(let Q=0;Q<J.length;Q++){const z=J.charCodeAt(Q);if(!(U1.IsAlpha(z)||U1.IsNumeric(z)||U1.DollarSign(z)||U1.IsUnderscore(z)))return!1}return!0}function X(J){return J.replace(/'/g,"\\'")}function Z(J,Q){return Y(Q)?`${J}.${Q}`:`${J}['${X(Q)}']`}$.Encode=Z})(c$||(c$={}));var M8;(function($){function W(Y){const X=[];for(let Z=0;Z<Y.length;Z++){const J=Y.charCodeAt(Z);if(U1.IsNumeric(J)||U1.IsAlpha(J))X.push(Y.charAt(Z));else X.push(`_${J}_`)}return X.join("").replace(/__/g,"_")}$.Encode=W})(M8||(M8={}));var A8;(function($){function W(Y){return Y.replace(/'/g,"\\'")}$.Escape=W})(A8||(A8={}));class U8 extends F0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}SY.TypeCompilerUnknownTypeError=U8;class l$ extends F0.TypeBoxError{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}SY.TypeCompilerTypeGuardError=l$;var E1;(function($){function W(Q,z,B){return K$.TypeSystemPolicy.ExactOptionalPropertyTypes?`('${z}' in ${Q} ? ${B} : true)`:`(${c$.Encode(Q,z)} !== undefined ? ${B} : true)`}$.IsExactOptionalProperty=W;function Y(Q){return!K$.TypeSystemPolicy.AllowArrayObject?`(typeof ${Q} === 'object' && ${Q} !== null && !Array.isArray(${Q}))`:`(typeof ${Q} === 'object' && ${Q} !== null)`}$.IsObjectLike=Y;function X(Q){return!K$.TypeSystemPolicy.AllowArrayObject?`(typeof ${Q} === 'object' && ${Q} !== null && !Array.isArray(${Q}) && !(${Q} instanceof Date) && !(${Q} instanceof Uint8Array))`:`(typeof ${Q} === 'object' && ${Q} !== null && !(${Q} instanceof Date) && !(${Q} instanceof Uint8Array))`}$.IsRecordLike=X;function Z(Q){return!K$.TypeSystemPolicy.AllowNaN?`(typeof ${Q} === 'number' && Number.isFinite(${Q}))`:`typeof ${Q} === 'number'`}$.IsNumberLike=Z;function J(Q){return K$.TypeSystemPolicy.AllowNullVoid?`(${Q} === undefined || ${Q} === null)`:`${Q} === undefined`}$.IsVoidLike=J})(E1||(SY.Policy=E1={}));var OY;(function($){function W(K){return K[F0.Kind]==="Any"||K[F0.Kind]==="Unknown"}function*Y(K,E,L){yield"true"}function*X(K,E,L){yield`Array.isArray(${L})`;const[p,T]=[j0("value","any"),j0("acc","number")];if(l.IsNumber(K.maxItems))yield`${L}.length <= ${K.maxItems}`;if(l.IsNumber(K.minItems))yield`${L}.length >= ${K.minItems}`;const d=f(K.items,E,"value");if(yield`${L}.every((${p}) => ${d})`,F0.TypeGuard.TSchema(K.contains)||l.IsNumber(K.minContains)||l.IsNumber(K.maxContains)){const Y0=F0.TypeGuard.TSchema(K.contains)?K.contains:F0.Type.Never(),S0=f(Y0,E,"value"),X0=l.IsNumber(K.minContains)?[`(count >= ${K.minContains})`]:[],N=l.IsNumber(K.maxContains)?[`(count <= ${K.maxContains})`]:[],t=`const count = value.reduce((${T}, ${p}) => ${S0} ? acc + 1 : acc, 0)`,L0=["(count > 0)",...X0,...N].join(" && ");yield`((${p}) => { ${t}; return ${L0}})(${L})`}if(K.uniqueItems===!0)yield`((${p}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${L})`}function*Z(K,E,L){yield`(typeof value === 'object' && Symbol.asyncIterator in ${L})`}function*J(K,E,L){if(yield`(typeof ${L} === 'bigint')`,l.IsBigInt(K.exclusiveMaximum))yield`${L} < BigInt(${K.exclusiveMaximum})`;if(l.IsBigInt(K.exclusiveMinimum))yield`${L} > BigInt(${K.exclusiveMinimum})`;if(l.IsBigInt(K.maximum))yield`${L} <= BigInt(${K.maximum})`;if(l.IsBigInt(K.minimum))yield`${L} >= BigInt(${K.minimum})`;if(l.IsBigInt(K.multipleOf))yield`(${L} % BigInt(${K.multipleOf})) === 0`}function*Q(K,E,L){yield`(typeof ${L} === 'boolean')`}function*z(K,E,L){yield*y0(K.returns,E,`${L}.prototype`)}function*B(K,E,L){if(yield`(${L} instanceof Date) && Number.isFinite(${L}.getTime())`,l.IsNumber(K.exclusiveMaximumTimestamp))yield`${L}.getTime() < ${K.exclusiveMaximumTimestamp}`;if(l.IsNumber(K.exclusiveMinimumTimestamp))yield`${L}.getTime() > ${K.exclusiveMinimumTimestamp}`;if(l.IsNumber(K.maximumTimestamp))yield`${L}.getTime() <= ${K.maximumTimestamp}`;if(l.IsNumber(K.minimumTimestamp))yield`${L}.getTime() >= ${K.minimumTimestamp}`;if(l.IsNumber(K.multipleOfTimestamp))yield`(${L}.getTime() % ${K.multipleOfTimestamp}) === 0`}function*F(K,E,L){yield`(typeof ${L} === 'function')`}function*D(K,E,L){if(yield`(typeof ${L} === 'number' && Number.isInteger(${L}))`,l.IsNumber(K.exclusiveMaximum))yield`${L} < ${K.exclusiveMaximum}`;if(l.IsNumber(K.exclusiveMinimum))yield`${L} > ${K.exclusiveMinimum}`;if(l.IsNumber(K.maximum))yield`${L} <= ${K.maximum}`;if(l.IsNumber(K.minimum))yield`${L} >= ${K.minimum}`;if(l.IsNumber(K.multipleOf))yield`(${L} % ${K.multipleOf}) === 0`}function*S(K,E,L){const p=K.allOf.map((T)=>f(T,E,L)).join(" && ");if(K.unevaluatedProperties===!1){const T=h(`${new RegExp(F0.KeyResolver.ResolvePattern(K))};`),d=`Object.getOwnPropertyNames(${L}).every(key => ${T}.test(key))`;yield`(${p} && ${d})`}else if(F0.TypeGuard.TSchema(K.unevaluatedProperties)){const T=h(`${new RegExp(F0.KeyResolver.ResolvePattern(K))};`),d=`Object.getOwnPropertyNames(${L}).every(key => ${T}.test(key) || ${f(K.unevaluatedProperties,E,`${L}[key]`)})`;yield`(${p} && ${d})`}else yield`(${p})`}function*b(K,E,L){yield`(typeof value === 'object' && Symbol.iterator in ${L})`}function*j(K,E,L){if(typeof K.const==="number"||typeof K.const==="boolean")yield`(${L} === ${K.const})`;else yield`(${L} === '${A8.Escape(K.const)}')`}function*M(K,E,L){yield"false"}function*P(K,E,L){yield`(!${f(K.not,E,L)})`}function*O(K,E,L){yield`(${L} === null)`}function*A(K,E,L){if(yield E1.IsNumberLike(L),l.IsNumber(K.exclusiveMaximum))yield`${L} < ${K.exclusiveMaximum}`;if(l.IsNumber(K.exclusiveMinimum))yield`${L} > ${K.exclusiveMinimum}`;if(l.IsNumber(K.maximum))yield`${L} <= ${K.maximum}`;if(l.IsNumber(K.minimum))yield`${L} >= ${K.minimum}`;if(l.IsNumber(K.multipleOf))yield`(${L} % ${K.multipleOf}) === 0`}function*w(K,E,L){if(yield E1.IsObjectLike(L),l.IsNumber(K.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${K.minProperties}`;if(l.IsNumber(K.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${K.maxProperties}`;const p=Object.getOwnPropertyNames(K.properties);for(let T of p){const d=c$.Encode(L,T),Y0=K.properties[T];if(K.required&&K.required.includes(T)){if(yield*y0(Y0,E,d),F0.ExtendsUndefined.Check(Y0)||W(Y0))yield`('${T}' in ${L})`}else{const S0=f(Y0,E,d);yield E1.IsExactOptionalProperty(L,T,S0)}}if(K.additionalProperties===!1)if(K.required&&K.required.length===p.length)yield`Object.getOwnPropertyNames(${L}).length === ${p.length}`;else{const T=`[${p.map((d)=>`'${d}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${L}).every(key => ${T}.includes(key))`}if(typeof K.additionalProperties==="object"){const T=f(K.additionalProperties,E,`${L}[key]`),d=`[${p.map((Y0)=>`'${Y0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${L}).every(key => ${d}.includes(key) || ${T}))`}}function*I(K,E,L){yield`(typeof value === 'object' && typeof ${L}.then === 'function')`}function*G(K,E,L){if(yield E1.IsRecordLike(L),l.IsNumber(K.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${K.minProperties}`;if(l.IsNumber(K.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${K.maxProperties}`;const[p,T]=Object.entries(K.patternProperties)[0],d=h(`${new RegExp(p)}`),Y0=f(T,E,"value"),S0=F0.TypeGuard.TSchema(K.additionalProperties)?f(K.additionalProperties,E,L):K.additionalProperties===!1?"false":"true",X0=`(${d}.test(key) ? ${Y0} : ${S0})`;yield`(Object.entries(${L}).every(([key, value]) => ${X0}))`}function*k(K,E,L){const p=Q7.Deref(K,E);if(R.functions.has(K.$ref))return yield`${i(K.$ref)}(${L})`;yield*y0(p,E,L)}function*_(K,E,L){if(yield`(typeof ${L} === 'string')`,l.IsNumber(K.maxLength))yield`${L}.length <= ${K.maxLength}`;if(l.IsNumber(K.minLength))yield`${L}.length >= ${K.minLength}`;if(K.pattern!==void 0)yield`${h(`${new RegExp(K.pattern)};`)}.test(${L})`;if(K.format!==void 0)yield`format('${K.format}', ${L})`}function*J0(K,E,L){yield`(typeof ${L} === 'symbol')`}function*W0(K,E,L){yield`(typeof ${L} === 'string')`,yield`${h(`${new RegExp(K.pattern)};`)}.test(${L})`}function*A0(K,E,L){yield`${i(K.$ref)}(${L})`}function*k1(K,E,L){if(yield`Array.isArray(${L})`,K.items===void 0)return yield`${L}.length === 0`;yield`(${L}.length === ${K.maxItems})`;for(let p=0;p<K.items.length;p++)yield`${f(K.items[p],E,`${L}[${p}]`)}`}function*u0(K,E,L){yield`${L} === undefined`}function*h0(K,E,L){yield`(${K.anyOf.map((T)=>f(T,E,L)).join(" || ")})`}function*N0(K,E,L){if(yield`${L} instanceof Uint8Array`,l.IsNumber(K.maxByteLength))yield`(${L}.length <= ${K.maxByteLength})`;if(l.IsNumber(K.minByteLength))yield`(${L}.length >= ${K.minByteLength})`}function*H0(K,E,L){yield"true"}function*n0(K,E,L){yield E1.IsVoidLike(L)}function*$1(K,E,L){const p=R.instances.size;R.instances.set(p,K),yield`kind('${K[F0.Kind]}', ${p}, ${L})`}function*y0(K,E,L,p=!0){const T=l.IsString(K.$id)?[...E,K]:E,d=K;if(p&&l.IsString(K.$id)){const Y0=i(K.$id);if(R.functions.has(Y0))return yield`${Y0}(${L})`;else{const S0=q0(Y0,K,E,"value",!1);return R.functions.set(Y0,S0),yield`${Y0}(${L})`}}switch(d[F0.Kind]){case"Any":return yield*Y(d,T,L);case"Array":return yield*X(d,T,L);case"AsyncIterator":return yield*Z(d,T,L);case"BigInt":return yield*J(d,T,L);case"Boolean":return yield*Q(d,T,L);case"Constructor":return yield*z(d,T,L);case"Date":return yield*B(d,T,L);case"Function":return yield*F(d,T,L);case"Integer":return yield*D(d,T,L);case"Intersect":return yield*S(d,T,L);case"Iterator":return yield*b(d,T,L);case"Literal":return yield*j(d,T,L);case"Never":return yield*M(d,T,L);case"Not":return yield*P(d,T,L);case"Null":return yield*O(d,T,L);case"Number":return yield*A(d,T,L);case"Object":return yield*w(d,T,L);case"Promise":return yield*I(d,T,L);case"Record":return yield*G(d,T,L);case"Ref":return yield*k(d,T,L);case"String":return yield*_(d,T,L);case"Symbol":return yield*J0(d,T,L);case"TemplateLiteral":return yield*W0(d,T,L);case"This":return yield*A0(d,T,L);case"Tuple":return yield*k1(d,T,L);case"Undefined":return yield*u0(d,T,L);case"Union":return yield*h0(d,T,L);case"Uint8Array":return yield*N0(d,T,L);case"Unknown":return yield*H0(d,T,L);case"Void":return yield*n0(d,T,L);default:if(!F0.TypeRegistry.Has(d[F0.Kind]))throw new U8(K);return yield*$1(d,T,L)}}const R={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function f(K,E,L,p=!0){return`(${[...y0(K,E,L,p)].join(" && ")})`}function i(K){return`check_${M8.Encode(K)}`}function h(K){const E=`local_${R.variables.size}`;return R.variables.set(E,`const ${E} = ${K}`),E}function q0(K,E,L,p,T=!0){const[d,Y0]=["\n",(t)=>"".padStart(t," ")],S0=j0("value","any"),X0=K0("boolean"),N=[...y0(E,L,p,T)].map((t)=>`${Y0(4)}${t}`).join(` &&${d}`);return`function ${K}(${S0})${X0} {${d}${Y0(2)}return (${d}${N}${d}${Y0(2)})\n}`}function j0(K,E){const L=R.language==="typescript"?`: ${E}`:"";return`${K}${L}`}function K0(K){return R.language==="typescript"?`: ${K}`:""}function P0(K,E,L){const p=q0("check",K,E,"value"),T=j0("value","any"),d=K0("boolean"),Y0=[...R.functions.values()],S0=[...R.variables.values()],X0=l.IsString(K.$id)?`return function check(${T})${d} {\n  return ${i(K.$id)}(value)\n}`:`return ${p}`;return[...S0,...Y0,X0].join("\n")}function M0(...K){const E={language:"javascript"},[L,p,T]=K.length===2&&l.IsArray(K[1])?[K[0],K[1],E]:K.length===2&&!l.IsArray(K[1])?[K[0],[],K[1]]:K.length===3?[K[0],K[1],K[2]]:K.length===1?[K[0],[],E]:[null,[],E];if(R.language=T.language,R.variables.clear(),R.functions.clear(),R.instances.clear(),!F0.TypeGuard.TSchema(L))throw new l$(L);for(let d of p)if(!F0.TypeGuard.TSchema(d))throw new l$(d);return P0(L,p,T)}$.Code=M0;function w1(K,E=[]){const L=M0(K,E,{language:"javascript"}),p=globalThis.Function("kind","format","hash",L),T=new Map(R.instances);function d(N,t,L0){if(!F0.TypeRegistry.Has(N)||!T.has(t))return!1;const $6=F0.TypeRegistry.Get(N),W6=T.get(t);return $6(W6,L0)}function Y0(N,t){if(!F0.FormatRegistry.Has(N))return!1;return F0.FormatRegistry.Get(N)(t)}function S0(N){return z7.Hash(N)}const X0=p(d,Y0,S0);return new B8(K,E,X0,L)}$.Compile=w1})(OY||(SY.TypeCompiler=OY={}))});var F8=z0((s0)=>{var A7=s0&&s0.__createBinding||(Object.create?function($,W,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(W,Y);if(!Z||("get"in Z?!W.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return W[Y]}};Object.defineProperty($,X,Z)}:function($,W,Y,X){if(X===void 0)X=Y;$[X]=W[Y]}),B7=s0&&s0.__exportStar||function($,W){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y))A7(W,$,Y)};Object.defineProperty(s0,"__esModule",{value:!0});s0.ValueErrorIterator=s0.ValueErrorType=void 0;var IY=g$();Object.defineProperty(s0,"ValueErrorType",{enumerable:!0,get:function(){return IY.ValueErrorType}});Object.defineProperty(s0,"ValueErrorIterator",{enumerable:!0,get:function(){return IY.ValueErrorIterator}});B7(CY(),s0)});var fY=z0((Cz,gY)=>{var D7=function($){var W=$.indexOf("%");if(W===-1)return $;var Y=$.length,X="",Z=0,J=0,Q=W,z=xY;while(W>-1&&W<Y){var B=kY($[W+1],4),F=kY($[W+2],0),D=B|F,S=C8[D];if(z=C8[256+z+S],J=J<<6|D&C8[364+S],z===xY)X+=$.slice(Z,Q),X+=J<=65535?String.fromCharCode(J):String.fromCharCode(55232+(J>>10),56320+(J&1023)),J=0,Z=W+3,W=Q=$.indexOf("%",Z);else if(z===F7)return null;else{if(W+=3,W<Y&&$.charCodeAt(W)===37)continue;return null}}return X+$.slice(Z)},kY=function($,W){var Y=w7[$];return Y===void 0?255:Y<<W},xY=12,F7=0,C8=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],w7={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};gY.exports=D7});var pY=z0((Iz,vY)=>{var j7=function($){const W=new yY;if(typeof $!=="string")return W;let Y=$.length,X="",Z="",J=-1,Q=-1,z=!1,B=!1,F=!1,D=!1,S=!1,b=0;for(let j=0;j<Y+1;j++)if(b=j!==Y?$.charCodeAt(j):38,b===38){if(S=Q>J,!S)Q=j;if(X=$.slice(J+1,Q),S||X.length>0){if(F)X=X.replace(dY," ");if(z)X=TY(X)||X;if(S){if(Z=$.slice(Q+1,j),D)Z=Z.replace(dY," ");if(B)Z=TY(Z)||Z}const M=W[X];if(M===void 0)W[X]=Z;else if(M.pop)M.push(Z);else W[X]=[M,Z]}Z="",J=j,Q=j,z=!1,B=!1,F=!1,D=!1}else if(b===61)if(Q<=J)Q=j;else B=!0;else if(b===43)if(Q>J)D=!0;else F=!0;else if(b===37)if(Q>J)B=!0;else z=!0;return W},TY=fY(),dY=/\+/g,yY=function(){};yY.prototype=Object.create(null);vY.exports=j7});var mY=z0((bz,iY)=>{var P7=function($){const W=$.length;if(W===0)return"";let Y="",X=0,Z=0;$:for(;Z<W;Z++){let J=$.charCodeAt(Z);while(J<128){if(K7[J]!==1){if(X<Z)Y+=$.slice(X,Z);X=Z+1,Y+=z1[J]}if(++Z===W)break $;J=$.charCodeAt(Z)}if(X<Z)Y+=$.slice(X,Z);if(J<2048){X=Z+1,Y+=z1[192|J>>6]+z1[128|J&63];continue}if(J<55296||J>=57344){X=Z+1,Y+=z1[224|J>>12]+z1[128|J>>6&63]+z1[128|J&63];continue}if(++Z,Z>=W)throw new Error("URI malformed");const Q=$.charCodeAt(Z)&1023;X=Z+1,J=65536+((J&1023)<<10|Q),Y+=z1[240|J>>18]+z1[128|J>>12&63]+z1[128|J>>6&63]+z1[128|J&63]}if(X===0)return $;if(X<W)return Y+$.slice(X);return Y},z1=Array.from({length:256},($,W)=>"%"+((W<16?"0":"")+W.toString(16)).toUpperCase()),K7=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);iY.exports={encodeString:P7}});var nY=z0((Rz,hY)=>{var uY=function($){const W=typeof $;if(W==="string")return I8($);else if(W==="bigint")return $.toString();else if(W==="boolean")return $?"true":"false";else if(W==="number"&&Number.isFinite($))return $<1000000000000000000000?""+$:I8(""+$);return""},O7=function($){let W="";if($===null||typeof $!=="object")return W;const Y="&",X=Object.keys($),Z=X.length;let J=0;for(let Q=0;Q<Z;Q++){const z=X[Q],B=$[z],F=I8(z)+"=";if(Q)W+=Y;if(Array.isArray(B)){J=B.length;for(let D=0;D<J;D++){if(D)W+=Y;W+=F,W+=uY(B[D])}}else W+=F,W+=uY(B)}return W},{encodeString:I8}=mY();hY.exports=O7});var b8=z0((Gz,S$)=>{var oY=pY(),cY=nY(),lY={parse:oY,stringify:cY};S$.exports=lY;S$.exports.default=lY;S$.exports.parse=oY;S$.exports.stringify=cY});var g1=($,W)=>({part:$,store:null,inert:W!==void 0?new Map(W.map((Y)=>[Y.part.charCodeAt(0),Y])):null,params:null,wildcardStore:null}),g8=($,W)=>({...$,part:W}),f8=($)=>({paramName:$,store:null,inert:null});class I1{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add($,W,Y){let X;if(typeof W!="string")throw TypeError("Route path must be a string");W===""?W="/":W[0]!=="/"&&(W=`/${W}`),this.history.push([$,W,Y]);let Z=W[W.length-1]==="*";Z&&(W=W.slice(0,-1));let J=W.split(I1.regex.static),Q=W.match(I1.regex.params)||[];J[J.length-1]===""&&J.pop(),X=this.root[$]?this.root[$]:this.root[$]=g1("/");let z=0;for(let B=0;B<J.length;++B){let F=J[B];if(B>0){let D=Q[z++].slice(1);if(X.params===null)X.params=f8(D);else if(X.params.paramName!==D)throw Error(`Cannot create route "${W}" with parameter "${D}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);let S=X.params;if(S.inert===null){X=S.inert=g1(F);continue}X=S.inert}for(let D=0;;){if(D===F.length){if(D<X.part.length){let S=g8(X,X.part.slice(D));Object.assign(X,g1(F,[S]))}break}if(D===X.part.length){if(X.inert===null)X.inert=new Map;else if(X.inert.has(F.charCodeAt(D))){X=X.inert.get(F.charCodeAt(D)),F=F.slice(D),D=0;continue}let S=g1(F.slice(D));X.inert.set(F.charCodeAt(D),S),X=S;break}if(F[D]!==X.part[D]){let S=g8(X,X.part.slice(D)),b=g1(F.slice(D));Object.assign(X,g1(X.part.slice(0,D),[S,b])),X=b;break}++D}}if(z<Q.length){let B=Q[z],F=B.slice(1);if(X.params===null)X.params=f8(F);else if(X.params.paramName!==F)throw Error(`Cannot create route "${W}" with parameter "${F}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);return X.params.store===null&&(X.params.store=Y),X.params.store}return Z?(X.wildcardStore===null&&(X.wildcardStore=Y),X.wildcardStore):(X.store===null&&(X.store=Y),X.store)}find($,W){let Y=this.root[$];return Y?J6(W,W.length,Y,0):null}}var J6=($,W,Y,X)=>{let Z=Y?.part,J=X+Z.length;if(Z.length>1){if(J>W)return null;if(Z.length<15){for(let Q=1,z=X+1;Q<Z.length;++Q,++z)if(Z.charCodeAt(Q)!==$.charCodeAt(z))return null}else if($.substring(X,J)!==Z)return null}if(J===W)return Y.store!==null?{store:Y.store,params:{}}:Y.wildcardStore!==null?{store:Y.wildcardStore,params:{"*":""}}:null;if(Y.inert!==null){let Q=Y.inert.get($.charCodeAt(J));if(Q!==void 0){let z=J6($,W,Q,J);if(z!==null)return z}}if(Y.params!==null){let Q=Y.params,z=$.indexOf("/",J);if(z!==J){if(z===-1||z>=W){if(Q.store!==null){let B={};return B[Q.paramName]=$.substring(J,W),{store:Q.store,params:B}}}else if(Q.inert!==null){let B=J6($,W,Q.inert,z);if(B!==null)return B.params[Q.paramName]=$.substring(J,z),B}}}return Y.wildcardStore!==null?{store:Y.wildcardStore,params:{"*":$.substring(J,W)}}:null};var y8=v0(d8(),1);var v8=y8.default;var R$=()=>{let $;return[new Promise((Y)=>{$=Y}),$]},j1=()=>{const[$,W]=R$(),[Y,X]=R$(),Z=[],J=[];return{signal:$,consume:(Q)=>{switch(Q.type){case"begin":if(Q.unit&&Z.length===0)for(let z=0;z<Q.unit;z++){const[B,F]=R$(),[D,S]=R$();Z.push(B),J.push([(b)=>{F({children:[],end:D,name:b.name??"",skip:!1,time:b.time})},(b)=>{S(b)}])}W({children:Z,end:Y,name:Q.name??"",skip:!1,time:Q.time});break;case"end":X(Q.time);break}},consumeChild(Q){switch(Q.type){case"begin":if(!J[0])return;const[z]=J[0];z({children:[],end:Y,name:Q.name??"",skip:!1,time:Q.time});break;case"end":const B=J.shift();if(!B)return;B[1](Q.time)}},resolve(){W({children:[],end:new Promise((Q)=>Q(0)),name:"",skip:!0,time:0});for(let[Q,z]of J)Q({children:[],end:new Promise((B)=>B(0)),name:"",skip:!0,time:0}),z(0);X(0)}}},p8=($,W,Y)=>{return async function X(X){if(X.event!=="request"||X.type!=="begin")return;const Z=X.id,J=$(),Q=j1(),z=j1(),B=j1(),F=j1(),D=j1(),S=j1(),b=j1(),j=j1();Q.consume(X);const M=(P)=>{if(P.id===Z)switch(P.event){case"request":Q.consume(P);break;case"request.unit":Q.consumeChild(P);break;case"parse":z.consume(P);break;case"parse.unit":z.consumeChild(P);break;case"transform":B.consume(P);break;case"transform.unit":B.consumeChild(P);break;case"beforeHandle":F.consume(P);break;case"beforeHandle.unit":F.consumeChild(P);break;case"handle":D.consume(P);break;case"afterHandle":S.consume(P);break;case"afterHandle.unit":S.consumeChild(P);break;case"error":b.consume(P);break;case"error.unit":b.consumeChild(P);break;case"response":if(P.type==="begin")Q.resolve(),z.resolve(),B.resolve(),F.resolve(),D.resolve(),S.resolve(),b.resolve();else J.off("event",M);j.consume(P);break;case"response.unit":j.consumeChild(P);break;case"exit":Q.resolve(),z.resolve(),B.resolve(),F.resolve(),D.resolve(),S.resolve(),b.resolve();break}};J.on("event",M),await Y({id:Z,context:X.ctx,set:X.ctx?.set,store:X.ctx?.store,time:X.time,request:Q.signal,parse:z.signal,transform:B.signal,beforeHandle:F.signal,handle:D.signal,afterHandle:S.signal,error:b.signal,response:j.signal}),J.emit(`res${Z}.${W}`,void 0)}};var PY={};k8(PY,{isProduction:()=>{{return s1}},ValidationError:()=>{{return B0}},ParseError:()=>{{return q8}},NotFoundError:()=>{{return O1}},InvalidCookieSignature:()=>{{return r1}},InternalServerError:()=>{{return w$}},ERROR_CODE:()=>{{return _1}}});var H8=v0(u$(),1),KY=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,_1=Symbol("ErrorCode"),s1=(KY?.NODE_ENV??KY?.ENV)==="production";class w$ extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor($){super($??"INTERNAL_SERVER_ERROR")}}class O1 extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class q8 extends Error{code="PARSE";status=400;constructor($){super($??"PARSE")}}class r1 extends Error{$;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,W){super(W??`"${$}" has invalid cookie signature`);this.key=$}}class B0 extends Error{$;W;Y;code="VALIDATION";status=400;constructor($,W,Y){const X=s1?void 0:("Errors"in W)?W.Errors(Y).First():H8.Value.Errors(W,Y).First(),Z=X?.schema.error?typeof X.schema.error==="function"?X.schema.error($,W,Y):X.schema.error:void 0,J=s1?Z??`Invalid ${$??X?.schema.error??X?.message}`:Z??`Invalid ${$}, '${X?.path?.slice(1)||"type"}': ${X?.message}`+"\n\nExpected: "+JSON.stringify(B0.simplifyModel(W),null,2)+"\n\nFound: "+JSON.stringify(Y,null,2);super(J);this.type=$;this.validator=W;this.value=Y;Object.setPrototypeOf(this,B0.prototype)}get all(){return[...this.validator.Errors(this.value)]}static simplifyModel($){const W="schema"in $?$.schema:$;try{return H8.Value.Create(W)}catch{return W}}get model(){return B0.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:$})}}var N8={open($){$.data.open?.($)},message($,W){$.data.message?.($,W)},drain($){$.data.drain?.($)},close($,W,Y){$.data.close?.($,W,Y)}};class a1{$;W;id;validator;constructor($,W){this.raw=$;this.data=W;this.validator=$.data.validator,this.id=Date.now()}get publish(){return($,W=void 0,Y)=>{if(this.validator?.Check(W)===!1)throw new B0("message",this.validator,W);if(typeof W==="object")W=JSON.stringify(W);return this.raw.publish($,W,Y),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new B0("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var e9=function($,W){if(typeof $!=="string")throw new TypeError("argument str must be a string");var Y={},X=W||{},Z=X.decode||W7,J=0;while(J<$.length){var Q=$.indexOf("=",J);if(Q===-1)break;var z=$.indexOf(";",J);if(z===-1)z=$.length;else if(z<Q){J=$.lastIndexOf(";",Q-1)+1;continue}var B=$.slice(J,Q).trim();if(Y[B]===void 0){var F=$.slice(Q+1,z).trim();if(F.charCodeAt(0)===34)F=F.slice(1,-1);Y[B]=Z7(F,Z)}J=z+1}return Y},$7=function($,W,Y){var X=Y||{},Z=X.encode||Y7;if(typeof Z!=="function")throw new TypeError("option encode is invalid");if(!h$.test($))throw new TypeError("argument name is invalid");var J=Z(W);if(J&&!h$.test(J))throw new TypeError("argument val is invalid");var Q=$+"="+J;if(X.maxAge!=null){var z=X.maxAge-0;if(isNaN(z)||!isFinite(z))throw new TypeError("option maxAge is invalid");Q+="; Max-Age="+Math.floor(z)}if(X.domain){if(!h$.test(X.domain))throw new TypeError("option domain is invalid");Q+="; Domain="+X.domain}if(X.path){if(!h$.test(X.path))throw new TypeError("option path is invalid");Q+="; Path="+X.path}if(X.expires){var B=X.expires;if(!X7(B)||isNaN(B.valueOf()))throw new TypeError("option expires is invalid");Q+="; Expires="+B.toUTCString()}if(X.httpOnly)Q+="; HttpOnly";if(X.secure)Q+="; Secure";if(X.partitioned)Q+="; Partitioned";if(X.priority){var F=typeof X.priority==="string"?X.priority.toLowerCase():X.priority;switch(F){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(X.sameSite){var D=typeof X.sameSite==="string"?X.sameSite.toLowerCase():X.sameSite;switch(D){case!0:Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"strict":Q+="; SameSite=Strict";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return Q},W7=function($){return $.indexOf("%")!==-1?decodeURIComponent($):$},Y7=function($){return encodeURIComponent($)},X7=function($){return a9.call($)==="[object Date]"||$ instanceof Date},Z7=function($,W){try{return W($)}catch(Y){return $}};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n$=e9,o$=$7;var a9=Object.prototype.toString,h$=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;var t$=v0(g0(),1),P$=v0(u$(),1),w8=v0(F8(),1);var D8=($)=>$&&typeof $==="object"&&!Array.isArray($),j8=($,W)=>{const Y=new URL($);return Y.pathname=W,Y.toString()},U7=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")||r0(Object.getPrototypeOf($)),F1=($,W,{skipKeys:Y}={})=>{if(D8($)&&D8(W))for(let[X,Z]of Object.entries(W)){if(Y?.includes(X))continue;if(!D8(Z)){$[X]=Z;continue}if(!(X in $)){$[X]=Z;continue}if(U7(Z)){$[X]=Z;continue}$[X]=F1($[X],Z)}return $},bY=($,W)=>F1($,W,{skipKeys:["properties"]}),R0=($,W)=>{const Y=[...Array.isArray($)?$:[$]],X=[];for(let Z of Y)if(Z.$elysiaChecksum)X.push(Z.$elysiaChecksum);for(let Z of Array.isArray(W)?W:[W])if(!X.includes(Z?.$elysiaChecksum))Y.push(Z);return Y},S1=($,W)=>{return{body:W?.body??$?.body,headers:W?.headers??$?.headers,params:W?.params??$?.params,query:W?.query??$?.query,response:W?.response??$?.response,type:$?.type||W?.type,detail:F1(W?.detail??{},$?.detail??{}),parse:R0($?.parse??[],W?.parse??[]),transform:R0($?.transform??[],W?.transform??[]),beforeHandle:R0($?.beforeHandle??[],W?.beforeHandle??[]),afterHandle:R0($?.afterHandle??[],W?.afterHandle??[]),onResponse:R0($?.onResponse??[],W?.onResponse??[]),trace:R0($?.trace??[],W?.trace??[]),error:R0($?.error??[],W?.error??[])}},Q1=($,{models:W={},additionalProperties:Y=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in W))return;const Z=typeof $==="string"?W[$]:$;if(Z.type==="object"&&"additionalProperties"in Z===!1)Z.additionalProperties=Y;if(X)return{schema:Z,references:"",checkFunc:()=>{},code:"",Check:(J)=>P$.Value.Check(Z,J),Errors:(J)=>P$.Value.Errors(Z,J),Code:()=>""};return w8.TypeCompiler.Compile(Z,Object.values(W))},K8=($,{models:W={},additionalProperties:Y=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in W))return;const Z=typeof $==="string"?W[$]:$,J=(z,B)=>{if(X)return{schema:z,references:"",checkFunc:()=>{},code:"",Check:(F)=>P$.Value.Check(z,F),Errors:(F)=>P$.Value.Errors(z,F),Code:()=>""};return w8.TypeCompiler.Compile(z,B)};if(t$.Kind in Z){if("additionalProperties"in Z===!1)Z.additionalProperties=Y;return{200:J(Z,Object.values(W))}}const Q={};return Object.keys(Z).forEach((z)=>{const B=Z[+z];if(typeof B==="string"){if(B in W){const F=W[B];F.type==="object"&&"additionalProperties"in F,Q[+z]=t$.Kind in F?J(F,Object.values(W)):F}return}if(B.type==="object"&&"additionalProperties"in B===!1)B.additionalProperties=Y;Q[+z]=t$.Kind in B?J(B,Object.values(W)):B}),Q},P8=($)=>{let W=9;for(let Y=0;Y<$.length;)W=Math.imul(W^$.charCodeAt(Y++),387420489);return W=W^W>>>9},s$=($,W,Y)=>{const X=(Z)=>{if(Y&&!Z.$elysiaChecksum)Z.$elysiaChecksum=Y;return Z};return{start:R0($.start,("start"in W?W.start??[]:[]).map(X)),request:R0($.request,("request"in W?W.request??[]:[]).map(X)),parse:R0($.parse,"parse"in W?W?.parse??[]:[]).map(X),transform:R0($.transform,(W?.transform??[]).map(X)),beforeHandle:R0($.beforeHandle,(W?.beforeHandle??[]).map(X)),afterHandle:R0($.afterHandle,(W?.afterHandle??[]).map(X)),onResponse:R0($.onResponse,(W?.onResponse??[]).map(X)),trace:$.trace,error:R0($.error,(W?.error??[]).map(X)),stop:R0($.stop,("stop"in W?W.stop??[]:[]).map(X))}};var RY=($,W=!0)=>{if(!$)return $;if(typeof $==="function"){if(W)$.$elysiaHookType="global";else $.$elysiaHookType=void 0;return $}return $.map((Y)=>{if(W)Y.$elysiaHookType="global";else Y.$elysiaHookType=void 0;return Y})},e1=($)=>{if(!$)return $;if(typeof $==="function")return $.$elysiaHookType==="global"?$:void 0;return $.filter((W)=>W.$elysiaHookType==="global")},O8=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:e1($?.parse),transform:e1($?.transform),beforeHandle:e1($?.beforeHandle),afterHandle:e1($?.afterHandle),onResponse:e1($?.onResponse),error:e1($?.error)}},S8={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},$$=async($,W)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(W===null)throw new TypeError("Secret key must be provided.");const Y=new TextEncoder,X=await crypto.subtle.importKey("raw",Y.encode(W),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Z=await crypto.subtle.sign("HMAC",X,Y.encode($)),J=Array.from(new Uint8Array(Z)),Q=btoa(String.fromCharCode(...J));return`${$}.${Q.replace(/=+$/,"")}`},L8=async($,W)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(W===null)throw new TypeError("Secret key must be provided.");const Y=$.slice(0,$.lastIndexOf("."));return await $$(Y,W)===$?Y:!1};class a0{$;W;name;setter;constructor($,W={}){this._value=$;this.property=W}get(){return this._value}get value(){return this._value}set value($){if(typeof $==="object"){if(JSON.stringify(this.value)===JSON.stringify($))return}else if(this.value===$)return;this._value=$,this.sync()}add($){const W=Object.assign(this.property,typeof $==="function"?$(Object.assign(this.property,this.value)):$);if("value"in W)this._value=W.value,delete W.value;return this.property=W,this.sync()}set($){const W=typeof $==="function"?$(Object.assign(this.property,this.value)):$;if("value"in W)this._value=W.value,delete W.value;return this.property=W,this.sync()}remove($){if(this.value===void 0)return;this.set({domain:$?.domain,expires:new Date(0),maxAge:0,path:$?.path,sameSite:$?.sameSite,secure:$?.secure,value:""})}get domain(){return this.property.domain}set domain($){if(this.property.domain===$)return;this.property.domain=$,this.sync()}get expires(){return this.property.expires}set expires($){if(this.property.expires?.getTime()===$?.getTime())return;this.property.expires=$,this.sync()}get httpOnly(){return this.property.httpOnly}set httpOnly($){if(this.property.domain===$)return;this.property.httpOnly=$,this.sync()}get maxAge(){return this.property.maxAge}set maxAge($){if(this.property.maxAge===$)return;this.property.maxAge=$,this.sync()}get path(){return this.property.path}set path($){if(this.property.path===$)return;this.property.path=$,this.sync()}get priority(){return this.property.priority}set priority($){if(this.property.priority===$)return;this.property.priority=$,this.sync()}get sameSite(){return this.property.sameSite}set sameSite($){if(this.property.sameSite===$)return;this.property.sameSite=$,this.sync()}get secure(){return this.property.secure}set secure($){if(this.property.secure===$)return;this.property.secure=$,this.sync()}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}sync(){if(!this.name||!this.setter)return this;if(!this.setter.cookie)this.setter.cookie={[this.name]:Object.assign(this.property,{value:this.toString()})};else this.setter.cookie[this.name]=Object.assign(this.property,{value:this.toString()});return this}}var GY=($,W,Y)=>new Proxy($,{get(X,Z){if(Z in X)return X[Z];const J=new a0(void 0,Y?{...Y}:void 0);return J.setter=W,J.name=Z,J},set(X,Z,J){if(!(J instanceof a0))return!1;if(!W.cookie)W.cookie={};return J.setter=W,J.name=Z,J.sync(),X[Z]=J,!0}}),r$=async($,W,{secret:Y,sign:X,...Z}={})=>{if(!W)return GY({},$,Z);const J={},Q=typeof Y==="string";if(X&&X!==!0&&!Array.isArray(X))X=[X];const z=Object.keys(n$(W));for(let B=0;B<z.length;B++){const F=z[B];let D=n$(W)[F];if(X===!0||X?.includes(F)){if(!Y)throw new Error("No secret is provided to cookie plugin");if(Q){if(D=await L8(D,Y),D===!1)throw new r1(F)}else{let j=!0;for(let M=0;M<Y.length;M++){const P=await L8(D,Y[M]);if(P!==!1){D=P,j=!1;break}}if(j)throw new r1(F)}}if(D===void 0)continue;const S=D.charCodeAt(0);if(S===123||S===91)try{const j=new a0(JSON.parse(D));j.setter=$,j.name=F,J[F]=j;continue}catch{}if(!Number.isNaN(+D))D=+D;else if(D==="true")D=!0;else if(D==="false")D=!1;const b=new a0(D,Z);b.setter=$,b.name=F,J[F]=b}return GY(J,$)};var _Y="toJSON"in new Headers,r0=($)=>{for(let W in $)return!0;return!1},EY=($,W)=>{if(!$||!Array.isArray(W))return $;$.delete("Set-Cookie");for(let Y=0;Y<W.length;Y++){const X=W[Y].indexOf("=");$.append("Set-Cookie",`${W[Y].slice(0,X)}=${W[Y].slice(X+1)}`)}return $},VY=($)=>{if(!$||typeof $!=="object"||!r0($))return;const W=[];for(let[Y,X]of Object.entries($)){if(!Y||!X)continue;if(Array.isArray(X.value))for(let Z=0;Z<X.value.length;Z++){let J=X.value[Z];if(J===void 0||J===null)continue;if(typeof J==="object")J=JSON.stringify(J);W.push(o$(Y,J,X))}else{let Z=X.value;if(Z===void 0||Z===null)continue;if(typeof Z==="object")Z=JSON.stringify(Z);W.push(o$(Y,X.value,X))}}if(W.length===0)return;if(W.length===1)return W[0];return W},D1=($,W)=>{if($?.$passthrough)$=$[$.$passthrough];if(r0(W.headers)||W.status!==200||W.redirect||W.cookie){if(typeof W.status==="string")W.status=S8[W.status];if(W.redirect){if(W.headers.Location=W.redirect,!W.status||W.status<300||W.status>=400)W.status=302}if(W.cookie&&r0(W.cookie))W.headers["Set-Cookie"]=VY(W.cookie);if(W.headers["Set-Cookie"]&&Array.isArray(W.headers["Set-Cookie"]))W.headers=EY(new Headers(W.headers),W.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,{status:W.status,headers:W.headers});case"Object":case"Array":return Response.json($,W);case"ReadableStream":if(!W.headers["content-type"]?.startsWith("text/event-stream"))W.headers["content-type"]="text/event-stream; charset=utf-8";return new Response($,W);case void 0:if(!$)return new Response("",W);return Response.json($,W);case"Response":const Y={...W.headers};if(_Y)W.headers=$.headers.toJSON();else for(let[Z,J]of $.headers.entries())if(Z in W.headers)W.headers[Z]=J;for(let Z in Y)$.headers.append(Z,Y[Z]);return $;case"Error":return O$($,W);case"Promise":return $.then((Z)=>D1(Z,W));case"Function":return D1($(),W);case"Number":case"Boolean":return new Response($.toString(),W);case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:const X=JSON.stringify($);if(X.charCodeAt(0)===123){if(!W.headers["Content-Type"])W.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),W)}return new Response(X,W)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return O$($,W);case"Promise":return $.then((X)=>{const Z=L1(X);if(Z!==void 0)return Z;return new Response("")});case"Function":return L1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},e0=($,W)=>{if($===void 0||$===null)return;if($?.$passthrough)$=$[$.$passthrough];if(r0(W.headers)||W.status!==200||W.redirect||W.cookie){if(typeof W.status==="string")W.status=S8[W.status];if(W.redirect){if(W.headers.Location=W.redirect,!W.status||W.status<300||W.status>=400)W.status=302}if(W.cookie&&r0(W.cookie))W.headers["Set-Cookie"]=VY(W.cookie);if(W.headers["Set-Cookie"]&&Array.isArray(W.headers["Set-Cookie"]))W.headers=EY(new Headers(W.headers),W.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,W);case"Object":case"Array":return Response.json($,W);case"ReadableStream":if(!W.headers["content-type"]?.startsWith("text/event-stream"))W.headers["content-type"]="text/event-stream; charset=utf-8";return new Response($,W);case void 0:if(!$)return;return Response.json($,W);case"Response":const Y=Object.assign({},W.headers);if(_Y)W.headers=$.headers.toJSON();else for(let[Z,J]of $.headers.entries())if(!(Z in W.headers))W.headers[Z]=J;for(let Z in Y)$.headers.append(Z,Y[Z]);if($.status!==W.status)W.status=$.status;return $;case"Promise":return $.then((Z)=>{const J=e0(Z,W);if(J!==void 0)return J;return});case"Error":return O$($,W);case"Function":return e0($(),W);case"Number":case"Boolean":return new Response($.toString(),W);case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:const X=JSON.stringify($);if(X.charCodeAt(0)===123){if(!W.headers["Content-Type"])W.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),W)}return new Response(X,W)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((X)=>{const Z=e0(X,W);if(Z!==void 0)return Z;return});case"Error":return O$($,W);case"Function":return L1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},L1=($)=>{if($?.$passthrough)$=$[$.$passthrough];switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return O$($);case"Promise":return $.then((Y)=>{const X=L1(Y);if(X!==void 0)return X;return new Response("")});case"Function":return L1($());case"Number":case"Boolean":return new Response($.toString());default:const W=JSON.stringify($);if(W.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(W)}},O$=($,W)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:W?.status!==200?W?.status??500:500,headers:W?.headers});var tY=v0(b8(),1);var S7=(new Headers()).toJSON,sY=new RegExp(" (\\w+) = context","g"),rY={value:0},aY=({hasTrace:$,hasTraceSet:W=!1,addFn:Y,condition:X={}})=>{if(Y("\nconst reporter = getReporter()\n"),$)return(Z,{name:J,attribute:Q="",unit:z=0}={})=>{const B=Z.indexOf("."),F=B===-1;if(Z!=="request"&&Z!=="response"&&!X[F?Z:Z.slice(0,B)])return()=>{if(W&&Z==="afterHandle")Y("reporter.emit('event',{id,event:'exit',type:'begin',time:0})"),Y("\nawait traceDone\n")};if(F)J||=Z;else J||="anonymous";Y("\n"+`reporter.emit('event', { 
					id,
					event: '${Z}',
					type: 'begin',
					name: '${J}',
					time: performance.now(),
					${F?`unit: ${z},`:""}
					${Q}
				})`.replace(/(\t| |\n)/g,"")+"\n");let D=!1;return()=>{if(D)return;if(D=!0,Y("\n"+`reporter.emit('event', {
							id,
							event: '${Z}',
							type: 'end',
							time: performance.now()
						})`.replace(/(\t| |\n)/g,"")+"\n"),W&&Z==="afterHandle")Y("\nreporter.emit('event',{id,event:'exit',type:'begin',time:0})\n"),Y("\nawait traceDone\n")}};else return()=>()=>{}},L$=($)=>{const W=$.indexOf(")");if($.charCodeAt(W+2)===61&&$.charCodeAt(W+5)!==123)return!0;return $.includes("return")},L7=($,{injectResponse:W=""}={})=>({composeValidation:(Y,X=`c.${Y}`)=>$?`c.set.status = 400; throw new ValidationError(
'${Y}',
${Y},
${X}
)`:`c.set.status = 400; return new ValidationError(
	'${Y}',
	${Y},
	${X}
).toResponse(c.set.headers)`,composeResponseValidation:(Y="r")=>{const X=$?`throw new ValidationError(
'response',
response[c.set.status],
${Y}
)`:`return new ValidationError(
'response',
response[c.set.status],
${Y}
).toResponse(c.set.headers)`;return`\n${W}
		if(response[c.set.status]?.Check(${Y}) === false) { 
	if(!(response instanceof Error))
		${X}
}\n`}}),O0=($,W)=>{if(W=W.trimStart(),W=W.replaceAll(/^async /g,""),/^(\w+)\(/g.test(W))W=W.slice(W.indexOf("("));const Y=W.charCodeAt(0)===40||W.startsWith("function")?W.slice(W.indexOf("(")+1,W.indexOf(")")):W.slice(0,W.indexOf("=")-1);if(Y==="")return!1;const X=Y.charCodeAt(0)===123?Y.indexOf("..."):-1;if(Y.charCodeAt(0)===123){if(Y.includes($))return!0;if(X===-1)return!1}if(W.match(new RegExp(`${Y}(.${$}|\\["${$}"\\])`)))return!0;const Z=X!==-1?Y.slice(X+3,Y.indexOf(" ",X+3)):void 0;if(W.match(new RegExp(`${Z}(.${$}|\\["${$}"\\])`)))return!0;const J=[Y];if(Z)J.push(Z);for(let z of W.matchAll(sY))J.push(z[1]);const Q=new RegExp(`{.*?} = (${J.join("|")})`,"g");for(let[z]of W.matchAll(Q))if(z.includes(`{ ${$}`)||z.includes(`, ${$}`))return!0;return!1},C$=($)=>{if($=$.trimStart(),$=$.replaceAll(/^async /g,""),/^(\w+)\(/g.test($))$=$.slice($.indexOf("("));const W=$.charCodeAt(0)===40||$.startsWith("function")?$.slice($.indexOf("(")+1,$.indexOf(")")):$.slice(0,$.indexOf("=")-1);if(W==="")return!1;const Y=W.charCodeAt(0)===123?W.indexOf("..."):-1,X=Y!==-1?W.slice(Y+3,W.indexOf(" ",Y+3)):void 0,Z=[W];if(X)Z.push(X);for(let Q of $.matchAll(sY))Z.push(Q[1]);for(let Q of Z)if(new RegExp(`\\b\\w+\\([^)]*\\b${Q}\\b[^)]*\\)`).test($))return!0;const J=new RegExp(`{.*?} = (${Z.join("|")})`,"g");for(let[Q]of $.matchAll(J))if(new RegExp(`\\b\\w+\\([^)]*\\b${Q}\\b[^)]*\\)`).test($))return!0;return!1},W$=Symbol.for("TypeBox.Kind"),a$=($,W)=>{if(!W)return;if(W$ in W&&W[W$]===$)return!0;if(W.type==="object"){const Y=W.properties;for(let X of Object.keys(Y)){const Z=Y[X];if(Z.type==="object"){if(a$($,Z))return!0}else if(Z.anyOf){for(let J=0;J<Z.anyOf.length;J++)if(a$($,Z.anyOf[J]))return!0}if(W$ in Z&&Z[W$]===$)return!0}return!1}return W.properties&&W$ in W.properties&&W.properties[W$]===$},R8=Symbol.for("TypeBox.Transform"),V1=($)=>{if(!$)return;if($.type==="object"&&$.properties){const W=$.properties;for(let Y of Object.keys(W)){const X=W[Y];if(X.type==="object"){if(V1(X))return!0}else if(X.anyOf){for(let J=0;J<X.anyOf.length;J++)if(V1(X.anyOf[J]))return!0}if(R8 in X)return!0}return!1}return R8 in $||$.properties&&R8 in $.properties},C7=($)=>{if(!$)return;const W=$?.schema;if(W&&"anyOf"in W){let Y=!1;const X=W.anyOf[0].type;for(let Z of W.anyOf)if(Z.type!==X){Y=!0;break}if(!Y)return X}return $.schema?.type},I7=/(?:return|=>) \S*\(/g,U0=($)=>{if($.constructor.name==="AsyncFunction")return!0;return $.toString().match(I7)},eY=({path:$,method:W,hooks:Y,validator:X,handler:Z,handleError:J,definitions:Q,schema:z,onRequest:B,config:F,getReporter:D})=>{const S=F.forceErrorEncapsulation||Y.error.length>0||typeof Bun==="undefined"||Y.onResponse.length>0||!!Y.trace.length,b=Y.onResponse.length?`\n;(async () => {${Y.onResponse.map((R,f)=>`await res${f}(c)`).join(";")}})();\n`:"",j=Y.trace.map((R)=>R.toString());let M=!1;if(C$(Z.toString()))M=!0;if(!M)for(let[R,f]of Object.entries(Y)){if(!Array.isArray(f)||!f.length||!["parse","transform","beforeHandle","afterHandle","onResponse"].includes(R))continue;for(let i of f){if(typeof i!=="function")continue;if(C$(i.toString())){M=!0;break}}if(M)break}const P={parse:j.some((R)=>O0("parse",R)),transform:j.some((R)=>O0("transform",R)),handle:j.some((R)=>O0("handle",R)),beforeHandle:j.some((R)=>O0("beforeHandle",R)),afterHandle:j.some((R)=>O0("afterHandle",R)),error:S||j.some((R)=>O0("error",R))},O=Y.trace.length>0;let A="";const w=X||W!=="GET"&&W!=="HEAD"?[Z,...Y.transform,...Y.beforeHandle,...Y.afterHandle].map((R)=>R.toString()):[],I=W!=="GET"&&W!=="HEAD"&&(M||Y.type!=="none"&&(!!X.body||!!Y.type||w.some((R)=>O0("body",R)))),G=M||X.headers||w.some((R)=>O0("headers",R)),k=M||X.cookie||w.some((R)=>O0("cookie",R)),_=X?.cookie?.schema;let J0="";if(_?.sign){if(!_.secrets)throw new Error(`t.Cookie required secret which is not set in (${W}) ${$}.`);const R=!_.secrets?void 0:typeof _.secrets==="string"?_.secrets:_.secrets[0];if(J0+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,_.sign===!0)J0+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${R}')
			}`;else for(let f of _.sign)J0+=`if(_setCookie['${f}']?.value) { c.set.cookie['${f}'].value = await signCookie(_setCookie['${f}'].value, '${R}') }\n`;J0+="}\n"}const{composeValidation:W0,composeResponseValidation:A0}=L7(S);if(G)A+=S7?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(k){const R=(i,h)=>{const q0=_?.[i]??h;if(!q0)return typeof h==="string"?`${i}: "${h}",`:`${i}: ${h},`;if(typeof q0==="string")return`${i}: '${q0}',`;if(q0 instanceof Date)return`${i}: new Date(${q0.getTime()}),`;return`${i}: ${q0},`},f=_?`{
			secret: ${_.secrets!==void 0?typeof _.secrets==="string"?`'${_.secrets}'`:"["+_.secrets.reduce((i,h)=>i+`'${h}',`,"")+"]":"undefined"},
			sign: ${_.sign===!0?!0:_.sign!==void 0?"["+_.sign.reduce((i,h)=>i+`'${h}',`,"")+"]":"undefined"},
			${R("domain")}
			${R("expires")}
			${R("httpOnly")}
			${R("maxAge")}
			${R("path","/")}
			${R("priority")}
			${R("sameSite")}
			${R("secure")}
		}`:"undefined";if(G)A+=`\nc.cookie = await parseCookie(c.set, c.headers.cookie, ${f})\n`;else A+=`\nc.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${f})\n`}if(M||X.query||w.some((R)=>O0("query",R)))A+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`;const h0=Y.trace.map((R)=>R.toString()).some((R)=>O0("set",R)||C$(R));M||Y.trace.some((R)=>O0("set",R.toString()));const N0=h0||k||w.some((R)=>O0("set",R))||B.some((R)=>O0("set",R.toString()));if(O)A+="\nconst id = c.$$requestId\n";const H0=aY({hasTrace:O,hasTraceSet:h0,condition:P,addFn:(R)=>{A+=R}});if(A+=S?"try {\n":"",O){A+="\nconst traceDone = Promise.all([";for(let R=0;R<Y.trace.length;R++)A+=`new Promise(r => { reporter.once(\`res\${id}.${R}\`, r) }),`;A+="])\n"}const n0=k||I||h0||U0(Z)||Y.parse.length>0||Y.afterHandle.some(U0)||Y.beforeHandle.some(U0)||Y.transform.some(U0),$1=H0("parse",{unit:Y.parse.length});if(I){const R=C7(X?.body);if(Y.type&&!Array.isArray(Y.type)){if(Y.type)switch(Y.type){case"json":case"application/json":A+="c.body = await c.request.json()\n";break;case"text":case"text/plain":A+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":A+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":A+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":A+=`c.body = {}

						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}\n`;break}if(Y.parse.length)A+="}}"}else{const i=(()=>{if(Y.parse.length&&R&&!Array.isArray(Y.type)){const h=X?.body?.schema;switch(R){case"object":if(a$("File",h)||a$("Files",h))return`c.body = {}
		
								const form = await c.request.formData()
								for (const key of form.keys()) {
									if (c.body[key])
										continue
			
									const value = form.getAll(key)
									if (value.length === 1)
										c.body[key] = value[0]
									else c.body[key] = value
								}`;break;default:break}}})();if(i)A+=i;else{if(A+="\n",A+=G?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",A+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)\n`,Y.parse.length){A+="let used = false\n";const h=H0("parse",{unit:Y.parse.length});for(let q0=0;q0<Y.parse.length;q0++){const j0=H0("parse.unit",{name:Y.parse[q0].name}),K0=`bo${q0}`;if(q0!==0)A+="if(!used) {\n";if(A+=`let ${K0} = parse[${q0}](c, contentType)\n`,A+=`if(${K0} instanceof Promise) ${K0} = await ${K0}\n`,A+=`if(${K0} !== undefined) { c.body = ${K0}; used = true }\n`,j0(),q0!==0)A+="}"}h()}if(Y.parse.length)A+="if (!used)";A+=`
				switch (contentType) {
					case 'application/json':
						c.body = await c.request.json()
						break
				
					case 'text/plain':
						c.body = await c.request.text()
						break
				
					case 'application/x-www-form-urlencoded':
						c.body = parseQuery(await c.request.text())
						break
				
					case 'application/octet-stream':
						c.body = await c.request.arrayBuffer();
						break
				
					case 'multipart/form-data':
						c.body = {}
				
						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue
				
							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}
				
						break
					}\n`,A+="}\n"}}A+="\n"}if($1(),Y?.transform){const R=H0("transform",{unit:Y.transform.length});for(let f=0;f<Y.transform.length;f++){const i=Y.transform[f],h=H0("transform.unit",{name:i.name});if(i.$elysia==="derive")A+=U0(Y.transform[f])?`Object.assign(c, await transform[${f}](c));`:`Object.assign(c, transform[${f}](c));`;else A+=U0(Y.transform[f])?`await transform[${f}](c);`:`transform[${f}](c);`;h()}R()}if(X){if(A+="\n",X.headers){if(A+=`if(headers.Check(c.headers) === false) {
				${W0("headers")}
			}`,V1(X.headers.schema))A+="\nc.headers = headers.Decode(c.headers)\n"}if(X.params){if(A+=`if(params.Check(c.params) === false) {
				${W0("params")}
			}`,V1(X.params.schema))A+="\nc.params = params.Decode(c.params)\n"}if(X.query){if(A+=`if(query.Check(c.query) === false) {
				${W0("query")} 
			}`,V1(X.query.schema))A+="\nc.query = query.Decode(Object.assign({}, c.query))\n"}if(X.body){if(A+=`if(body.Check(c.body) === false) { 
				${W0("body")}
			}`,V1(X.body.schema))A+="\nc.body = body.Decode(c.body)\n"}if(r0(X.cookie?.schema.properties??{})){if(A+=`const cookieValue = {}
			for(const [key, value] of Object.entries(c.cookie))
				cookieValue[key] = value.value

			if(cookie.Check(cookieValue) === false) {
				${W0("cookie","cookieValue")}
			}`,V1(X.cookie.schema))A+="\nc.cookie = params.Decode(c.cookie)\n"}}if(Y?.beforeHandle){const R=H0("beforeHandle",{unit:Y.beforeHandle.length});for(let f=0;f<Y.beforeHandle.length;f++){const i=H0("beforeHandle.unit",{name:Y.beforeHandle[f].name}),h=`be${f}`;if(!L$(Y.beforeHandle[f].toString()))A+=U0(Y.beforeHandle[f])?`await beforeHandle[${f}](c);\n`:`beforeHandle[${f}](c);\n`,i();else{A+=U0(Y.beforeHandle[f])?`let ${h} = await beforeHandle[${f}](c);\n`:`let ${h} = beforeHandle[${f}](c);\n`,i(),A+=`if(${h} !== undefined) {\n`;const j0=H0("afterHandle",{unit:Y.transform.length});if(Y.afterHandle){const K0=h;for(let P0=0;P0<Y.afterHandle.length;P0++){const M0=L$(Y.afterHandle[P0].toString()),w1=H0("afterHandle.unit",{name:Y.afterHandle[P0].name});if(A+=`c.response = ${K0}\n`,!M0)A+=U0(Y.afterHandle[P0])?`await afterHandle[${P0}](c, ${K0});\n`:`afterHandle[${P0}](c, ${K0});\n`;else{const K=`af${P0}`;A+=U0(Y.afterHandle[P0])?`const ${K} = await afterHandle[${P0}](c);\n`:`const ${K} = afterHandle[${P0}](c);\n`,A+=`if(${K} !== undefined) { c.response = ${K0} = ${K} }\n`}w1()}}if(j0(),X.response)A+=A0(h);A+=J0,A+=`return mapEarlyResponse(${h}, c.set)}\n`}}R()}if(Y?.afterHandle.length){const R=H0("handle",{name:Z.name});if(Y.afterHandle.length)A+=U0(Z)?"let r = c.response = await handler(c);\n":"let r = c.response = handler(c);\n";else A+=U0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n";R();const f=H0("afterHandle",{unit:Y.afterHandle.length});for(let i=0;i<Y.afterHandle.length;i++){const h=`af${i}`,q0=L$(Y.afterHandle[i].toString()),j0=H0("afterHandle.unit",{name:Y.afterHandle[i].name});if(!q0)A+=U0(Y.afterHandle[i])?`await afterHandle[${i}](c)\n`:`afterHandle[${i}](c)\n`,j0();else{if(X.response)A+=U0(Y.afterHandle[i])?`let ${h} = await afterHandle[${i}](c)\n`:`let ${h} = afterHandle[${i}](c)\n`;else A+=U0(Y.afterHandle[i])?`let ${h} = mapEarlyResponse(await afterHandle[${i}](c), c.set)\n`:`let ${h} = mapEarlyResponse(afterHandle[${i}](c), c.set)\n`;if(j0(),X.response){if(A+=`if(${h} !== undefined) {`,A+=A0(h),A+=`${h} = mapEarlyResponse(${h}, c.set)\n`,A+=`if(${h}) {`,f(),h0)A+=`${h} = mapEarlyResponse(${h}, c.set)\n`;A+=`return ${h} } }`}else A+=`if(${h}) {`,f(),A+=`return ${h}}\n`}}if(f(),A+="r = c.response\n",X.response)A+=A0();if(A+=J0,N0)A+="return mapResponse(r, c.set)\n";else A+="return mapCompactResponse(r)\n"}else{const R=H0("handle",{name:Z.name});if(X.response)if(A+=U0(Z)?"const r = await handler(c);\n":"const r = handler(c);\n",R(),A+=A0(),H0("afterHandle")(),A+=J0,N0)A+="return mapResponse(r, c.set)\n";else A+="return mapCompactResponse(r)\n";else if(P.handle||k)if(A+=U0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n",R(),H0("afterHandle")(),A+=J0,N0)A+="return mapResponse(r, c.set)\n";else A+="return mapCompactResponse(r)\n";else{R();const f=U0(Z)?"await handler(c) ":"handler(c)";if(H0("afterHandle")(),N0)A+=`return mapResponse(${f}, c.set)\n`;else A+=`return mapCompactResponse(${f})\n`}}if(S||b){if(A+=`
} catch(error) {`,!n0)A+="return (async () => {";A+=`const set = c.set

		if (!set.status || set.status < 300) set.status = error?.status || 500
	`;const R=H0("error",{unit:Y.error.length});if(Y.error.length){A+=`
				c.error = error
				c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
			`;for(let f=0;f<Y.error.length;f++){const i=`er${f}`,h=H0("error.unit",{name:Y.error[f].name});if(A+=`\nlet ${i} = handleErrors[${f}](c)\n`,U0(Y.error[f]))A+=`if (${i} instanceof Promise) ${i} = await ${i}\n`;h(),A+=`${i} = mapEarlyResponse(${i}, set)\n`,A+=`if (${i}) {`,A+=`return ${i} }\n`}}if(R(),A+="return handleError(c, error)\n\n",!n0)A+="})()";if(A+="}",b||O){A+=" finally { ";const f=H0("response",{unit:Y.onResponse.length});A+=b,f(),A+="}"}}return A=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response,
			cookie
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		schema,
		definitions,
		ERROR_CODE,
		getReporter,
		requestId,
		parseCookie,
		signCookie
	} = hooks

	${Y.onResponse.length?`const ${Y.onResponse.map((R,f)=>`res${f} = onResponse[${f}]`).join(",")}`:""}

	return ${n0?"async":""} function(c) {
		${z&&Q?"c.schema = schema; c.defs = definitions;":""}
		${A}
	}`,Function("hooks",A)({handler:Z,hooks:Y,validator:X,handleError:J,utils:{mapResponse:D1,mapCompactResponse:L1,mapEarlyResponse:e0,parseQuery:tY.parse},error:{NotFoundError:O1,ValidationError:B0,InternalServerError:w$},schema:z,definitions:Q,ERROR_CODE:_1,getReporter:D,requestId:rY,parseCookie:r$,signCookie:$$})},G8=($)=>{let W="",Y="";for(let j of Object.keys($.decorators))W+=`,${j}: app.decorators.${j}`;const{router:X,staticRouter:Z}=$,J=$.event.trace.length>0,Q=`
	const route = find(request.method, path) ${X.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":`new Response(error404, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`}

	ctx.params = route.params

	return route.store(ctx)`;let z="";for(let[j,{code:M,all:P}]of Object.entries(Z.map))z+=`case '${j}':\nswitch(request.method) {\n${M}\n${P??"default: break map"}}\n\n`;const B=$.event.request.some(U0);Y+=`const {
		app,
		app: { store, router, staticRouter, wsRouter },
		mapEarlyResponse,
		NotFoundError,
		requestId,
		getReporter
	} = data

	const notFound = new NotFoundError()

	${$.event.request.length?"const onRequest = app.event.request":""}

	${Z.variables}

	const find = router.find.bind(router)
	const findWs = wsRouter.find.bind(wsRouter)
	const handleError = app.handleError.bind(this)

	${$.event.error.length?"":"const error404 = notFound.message.toString()"}

	return ${B?"async":""} function map(request) {
	`;const F=$.event.trace.map((j)=>j.toString()),D=aY({hasTrace:J,hasTraceSet:$.event.trace.some((j)=>{const M=j.toString();return O0("set",M)||C$(M)}),condition:{request:F.some((j)=>O0("request",j)||C$(j))},addFn:(j)=>{Y+=j}});if($.event.request.length){Y+=`
			${J?"const id = +requestId.value++":""}

			const ctx = {
				request,
				store,
				set: {
					cookie: {},
					headers: {},
					status: 200
				}
				${J?",$$requestId: +id":""}
				${W}
			}
		`;const j=D("request",{attribute:"ctx",unit:$.event.request.length});Y+="try {\n";for(let M=0;M<$.event.request.length;M++){const P=$.event.request[M],O=L$(P.toString()),A=U0(P),w=D("request.unit",{name:$.event.request[M].name}),I=`re${M}`;if(O)Y+=`const ${I} = mapEarlyResponse(
					${A?"await":""} onRequest[${M}](ctx),
					ctx.set
				)\n`,w(),Y+=`if(${I}) return ${I}\n`;else Y+=`${A?"await":""} onRequest[${M}](ctx)\n`,w()}Y+=`} catch (error) {
			return app.handleError(ctx, error)
		}`,j(),Y+=`
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else Y+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		${J?"const id = +requestId.value++":""}

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${J?",$$requestId: id":""}
			${W}
		}`,D("request",{unit:$.event.request.length,attribute:F.some((j)=>O0("context",j))||F.some((j)=>O0("store",j))||F.some((j)=>O0("set",j))?"ctx":""})();const{wsPaths:S,wsRouter:b}=$;if(Object.keys(S).length||b.history.length){Y+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[j,M]of Object.entries(S))Y+=`
					case '${j}':
						if(request.headers.get('upgrade') === 'websocket')
							return st${M}(ctx)
							
						break`;Y+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = findWs('ws', path)

						if(route) {
							ctx.params = route.params

							return route.store(ctx)
						}
					}

					break
			}
		}\n`}return Y+=`
		map: switch(path) {
			${z}

			default:
				break
		}

		${Q}
	}`,$.handleError=_8($),Function("data",Y)({app:$,mapEarlyResponse:e0,NotFoundError:O1,getReporter:()=>$.reporter,requestId:rY})},_8=($)=>{let W=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${$.event.error.find(U0)?"async":""} function(context, error) {
		const { set } = context

		context.code = error.code
		context.error = error
		`;for(let Y=0;Y<$.event.error.length;Y++){const X=$.event.error[Y],Z=`${U0(X)?"await ":""}onError[${Y}](context)`;if(L$(X.toString()))W+=`const r${Y} = ${Z}; if(r${Y} !== undefined) {
				if(set.status === 200) set.status = error.status
				return mapResponse(r${Y}, set)
			}\n`;else W+=Z+"\n"}return W+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`,Function("inject",W)({app:$,mapResponse:D1,ERROR_CODE:_1})};var e$=v0(b8(),1);var E8=($)=>async(W)=>{const Y={cookie:{},status:200,headers:{}};let X;if($.decorators)X=$.decorators,X.request=W,X.set=Y,X.store=$.store;else X={set:Y,store:$.store,request:W};const Z=W.url,J=Z.indexOf("/",11),Q=Z.indexOf("?",J+1),z=Q===-1?Z.substring(J):Z.substring(J,Q);try{for(let O=0;O<$.event.request.length;O++){const A=$.event.request[O];let w=A(X);if(w instanceof Promise)w=await w;if(w=e0(w,Y),w)return w}const B=$.dynamicRouter.find(W.method,z)??$.dynamicRouter.find("ALL",z);if(!B)throw new O1;const{handle:F,hooks:D,validator:S,content:b}=B.store;let j;if(W.method!=="GET"&&W.method!=="HEAD")if(b)switch(b){case"application/json":j=await W.json();break;case"text/plain":j=await W.text();break;case"application/x-www-form-urlencoded":j=e$.parse(await W.text());break;case"application/octet-stream":j=await W.arrayBuffer();break;case"multipart/form-data":j={};const O=await W.formData();for(let A of O.keys()){if(j[A])continue;const w=O.getAll(A);if(w.length===1)j[A]=w[0];else j[A]=w}break}else{let O=W.headers.get("content-type");if(O){const A=O.indexOf(";");if(A!==-1)O=O.slice(0,A);for(let w=0;w<$.event.parse.length;w++){let I=$.event.parse[w](X,O);if(I instanceof Promise)I=await I;if(I){j=I;break}}if(j===void 0)switch(O){case"application/json":j=await W.json();break;case"text/plain":j=await W.text();break;case"application/x-www-form-urlencoded":j=e$.parse(await W.text());break;case"application/octet-stream":j=await W.arrayBuffer();break;case"multipart/form-data":j={};const w=await W.formData();for(let I of w.keys()){if(j[I])continue;const G=w.getAll(I);if(G.length===1)j[I]=G[0];else j[I]=G}break}}}X.body=j,X.params=B?.params||void 0,X.query=Q===-1?{}:e$.parse(Z.substring(Q+1)),X.headers={};for(let[O,A]of W.headers.entries())X.headers[O]=A;const M=S?.cookie?.schema;X.cookie=await r$(X.set,X.headers.cookie,M?{secret:M.secrets!==void 0?typeof M.secrets==="string"?M.secrets:M.secrets.join(","):void 0,sign:M.sign===!0?!0:M.sign!==void 0?typeof M.sign==="string"?M.sign:M.sign.join(","):void 0}:void 0);for(let O=0;O<D.transform.length;O++){const A=D.transform[O](X);if(D.transform[O].$elysia==="derive")if(A instanceof Promise)Object.assign(X,await A);else Object.assign(X,A);else if(A instanceof Promise)await A}if(S){if(S.headers){const O={};for(let A in W.headers)O[A]=W.headers.get(A);if(S.headers.Check(O)===!1)throw new B0("header",S.headers,O)}if(S.params?.Check(X.params)===!1)throw new B0("params",S.params,X.params);if(S.query?.Check(X.query)===!1)throw new B0("query",S.query,X.query);if(S.cookie){const O={};for(let[A,w]of Object.entries(X.cookie))O[A]=w.value;if(S.cookie?.Check(O)===!1)throw new B0("cookie",S.cookie,O)}if(S.body?.Check(j)===!1)throw new B0("body",S.body,j)}for(let O=0;O<D.beforeHandle.length;O++){let A=D.beforeHandle[O](X);if(A instanceof Promise)A=await A;if(A!==void 0){X.response=A;for(let I=0;I<D.afterHandle.length;I++){let G=D.afterHandle[I](X);if(G instanceof Promise)G=await G;if(G)A=G}const w=e0(A,X.set);if(w)return w}}let P=F(X);if(P instanceof Promise)P=await P;if(!D.afterHandle.length){const O=S?.response?.[P.status];if(O?.Check(P)===!1)throw new B0("response",O,P)}else{X.response=P;for(let O=0;O<D.afterHandle.length;O++){let A=D.afterHandle[O](X);if(A instanceof Promise)A=await A;const w=e0(A,X.set);if(w!==void 0){const I=S?.response?.[P.status];if(I?.Check(w)===!1)throw new B0("response",I,w);return w}}}if(X.set.cookie&&M?.sign){const O=!M.secrets?void 0:typeof M.secrets==="string"?M.secrets:M.secrets[0];if(M.sign===!0)for(let[A,w]of Object.entries(X.set.cookie))X.set.cookie[A].value=await $$(w.value,"${secret}");else for(let A of M.sign){if(!(A in M.properties))continue;if(X.set.cookie[A]?.value)X.set.cookie[A].value=await $$(X.set.cookie[A].value,O)}}return D1(P,X.set)}catch(B){if(B.status)Y.status=B.status;return $.handleError(X,B)}finally{for(let B of $.event.onResponse)await B(X)}},$X=($)=>async(W,Y)=>{const X=Object.assign(W,{error:Y,code:Y.code});X.set=W.set;for(let Z=0;Z<$.event.error.length;Z++){let J=$.event.error[Z](X);if(J instanceof Promise)J=await J;if(J!==void 0&&J!==null)return D1(J,W.set)}return new Response(typeof Y.cause==="string"?Y.cause:Y.message,{headers:W.set.headers,status:Y.status??500})};var o={};k8(o,{t:()=>{{return $0.Type}},ElysiaType:()=>{{return C1}}});var x1=v0(M$(),1),$0=v0(g0(),1),YX=v0(u$(),1);c(o,v0(M$(),1));c(o,v0(F8(),1));try{x1.TypeSystem.Format("email",($)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test($)),x1.TypeSystem.Format("uuid",($)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)),x1.TypeSystem.Format("date",($)=>!Number.isNaN(new Date($).getTime())),x1.TypeSystem.Format("date-time",($)=>!Number.isNaN(new Date($).getTime()))}catch($){}var WX=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},V8=($,W)=>{if(!(W instanceof Blob))return!1;if($.minSize&&W.size<WX($.minSize))return!1;if($.maxSize&&W.size>WX($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!W.type.startsWith($.extension))return!1}else{for(let Y=0;Y<$.extension.length;Y++)if(W.type.startsWith($.extension[Y]))return!0;return!1}return!0},b7=x1.TypeSystem.Type("Files",($,W)=>{if(!Array.isArray(W))return V8($,W);if($.minItems&&W.length<$.minItems)return!1;if($.maxItems&&W.length>$.maxItems)return!1;for(let Y=0;Y<W.length;Y++)if(!V8($,W[Y]))return!1;return!0});$0.FormatRegistry.Set("numeric",($)=>!!$&&!isNaN(+$));$0.FormatRegistry.Set("ObjectString",($)=>{let W=$.charCodeAt(0);if(W===9||W===10||W===32)W=$.trimStart().charCodeAt(0);if(W!==123&&W!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var C1={Numeric:($)=>{const W=$0.Type.Number($);return $0.Type.Transform($0.Type.Union([$0.Type.String({format:"numeric",default:0}),W])).Decode((Y)=>{const X=+Y;if(isNaN(X))return Y;if($&&!YX.Value.Check(W,X))throw new B0("property",W,X);return X}).Encode((Y)=>Y)},ObjectString:($,W)=>$0.Type.Transform($0.Type.Union([$0.Type.String({format:"ObjectString",default:""}),$0.Type.Object($,W)])).Decode((Y)=>{if(typeof Y==="string")try{return JSON.parse(Y)}catch{return Y}return Y}).Encode((Y)=>JSON.stringify(Y)),File:x1.TypeSystem.Type("File",V8),Files:($={})=>$0.Type.Transform(b7($)).Decode((W)=>{if(Array.isArray(W))return W;return[W]}).Encode((W)=>W),Nullable:($)=>$0.Type.Union([$0.Type.Null(),$]),MaybeEmpty:($)=>$0.Type.Union([$0.Type.Null(),$0.Type.Undefined(),$]),Cookie:($,W)=>$0.Type.Object($,W)};$0.Type.ObjectString=C1.ObjectString;$0.Type.Numeric=C1.Numeric;$0.Type.File=($={})=>C1.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});$0.Type.Files=($={})=>C1.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});$0.Type.Nullable=($)=>C1.Nullable($);$0.Type.MaybeEmpty=C1.MaybeEmpty;$0.Type.Cookie=C1.Cookie;class I${config;dependencies={};store={};decorators={};definitions={type:{},error:{}};schema={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],trace:[],error:[],stop:[]};reporter=new v8;server=null;getServer(){return this.server}validator=null;router=new I1;wsRouter=new I1;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsPaths={};dynamicRouter=new I1;lazyLoadModules=[];path="";constructor($){this.config={forceErrorEncapsulation:!0,prefix:"",aot:!0,strictPath:!1,scoped:!1,cookie:{},...$,seed:$?.seed===void 0?"":$?.seed}}add($,W,Y,X,{allowMeta:Z=!1,skipPrefix:J=!1}={allowMeta:!1,skipPrefix:!1}){if(typeof W==="string")W=[W];for(let Q of W){if(Q=Q===""?Q:Q.charCodeAt(0)===47?Q:`/${Q}`,this.config.prefix&&!J)Q=this.config.prefix+Q;if(X?.type)switch(X.type){case"text":X.type="text/plain";break;case"json":X.type="application/json";break;case"formdata":X.type="multipart/form-data";break;case"urlencoded":X.type="application/x-www-form-urlencoded";break;case"arrayBuffer":X.type="application/octet-stream";break;default:break}const z=this.definitions.type;let B=Q1(X?.cookie??this.validator?.cookie,{dynamic:!this.config.aot,models:z,additionalProperties:!0});if(r0(this.config.cookie??{}))if(B)B.schema=bY(B.schema,this.config.cookie??{});else B=Q1($0.Type.Cookie({},this.config.cookie),{dynamic:!this.config.aot,models:z,additionalProperties:!0});const F={body:Q1(X?.body??this.validator?.body,{dynamic:!this.config.aot,models:z}),headers:Q1(X?.headers??this.validator?.headers,{dynamic:!this.config.aot,models:z,additionalProperties:!0}),params:Q1(X?.params??this.validator?.params,{dynamic:!this.config.aot,models:z}),query:Q1(X?.query??this.validator?.query,{dynamic:!this.config.aot,models:z}),cookie:B,response:K8(X?.response??this.validator?.response,{dynamic:!this.config.aot,models:z})},D=S1(this.event,X),S=Q.endsWith("/")?Q.slice(0,Q.length-1):Q+"/";if(this.config.aot===!1){if(this.dynamicRouter.add($,Q,{validator:F,hooks:D,content:X?.type,handle:Y}),this.config.strictPath===!1)this.dynamicRouter.add($,S,{validator:F,hooks:D,content:X?.type,handle:Y});this.routes.push({method:$,path:Q,composed:null,handler:Y,hooks:D});return}const b=eY({path:Q,method:$,hooks:D,validator:F,handler:Y,handleError:this.handleError,onRequest:this.event.request,config:this.config,definitions:Z?this.definitions.type:void 0,schema:Z?this.schema:void 0,getReporter:()=>this.reporter}),j=this.routes.findIndex((M)=>M.path===Q&&M.method===$);if(j!==-1)this.routes.splice(j,1);if(this.routes.push({method:$,path:Q,composed:b,handler:Y,hooks:D}),$==="$INTERNALWS"){const M=this.config.strictPath?void 0:Q.endsWith("/")?Q.slice(0,Q.length-1):Q+"/";if(Q.indexOf(":")===-1&&Q.indexOf("*")===-1){const P=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(b),this.staticRouter.variables+=`const st${P} = staticRouter.handlers[${P}]\n`,this.wsPaths[Q]=P,M)this.wsPaths[M]=P}else if(this.wsRouter.add("ws",Q,b),M)this.wsRouter.add("ws",M,b);return}if(Q.indexOf(":")===-1&&Q.indexOf("*")===-1){const M=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(b),this.staticRouter.variables+=`const st${M} = staticRouter.handlers[${M}]\n`,!this.staticRouter.map[Q])this.staticRouter.map[Q]={code:""};if($==="ALL")this.staticRouter.map[Q].all=`default: return st${M}(ctx)\n`;else this.staticRouter.map[Q].code=`case '${$}': return st${M}(ctx)\n${this.staticRouter.map[Q].code}`;if(!this.config.strictPath){if(!this.staticRouter.map[S])this.staticRouter.map[S]={code:""};if($==="ALL")this.staticRouter.map[S].all=`default: return st${M}(ctx)\n`;else this.staticRouter.map[S].code=`case '${$}': return st${M}(ctx)\n${this.staticRouter.map[S].code}`}}else if(this.router.add($,Q,b),!this.config.strictPath)this.router.add($,Q.endsWith("/")?Q.slice(0,Q.length-1):Q+"/",b)}}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($){return this.on("parse",$),this}onTransform($){return this.on("transform",$),this}onBeforeHandle($){return this.on("beforeHandle",$),this}onAfterHandle($){return this.on("afterHandle",$),this}onResponse($){return this.on("response",$),this}trace($){return this.reporter.on("event",p8(()=>this.reporter,this.event.trace.length,$)),this.on("trace",$),this}addError($,W){return this.error($,W)}error($,W){switch(typeof $){case"string":return W.prototype[_1]=$,this.definitions.error[$]=W,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[Y,X]of Object.entries($))X.prototype[_1]=Y,this.definitions.error[Y]=X;return this}onError($){return this.on("error",$),this}onStop($){return this.on("stop",$),this}on($,W){for(let Y of Array.isArray(W)?W:[W])switch(Y=RY(Y),$){case"start":this.event.start.push(Y);break;case"request":this.event.request.push(Y);break;case"response":this.event.onResponse.push(Y);break;case"parse":this.event.parse.splice(this.event.parse.length-1,0,Y);break;case"transform":this.event.transform.push(Y);break;case"beforeHandle":this.event.beforeHandle.push(Y);break;case"afterHandle":this.event.afterHandle.push(Y);break;case"trace":this.event.trace.push(Y);break;case"error":this.event.error.push(Y);break;case"stop":this.event.stop.push(Y);break}return this}group($,W,Y){const X=new I$({...this.config,prefix:""});X.store=this.store,X.definitions=this.definitions,X.getServer=()=>this.server;const Z=typeof W==="object",J=(Z?Y:W)(X);if(this.decorators=F1(this.decorators,X.decorators),J.event.request.length)this.event.request=[...this.event.request,...J.event.request];if(J.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...J.event.onResponse];return this.model(J.definitions.type),Object.values(X.routes).forEach(({method:Q,path:z,handler:B,hooks:F})=>{if(z=(Z?"":this.config.prefix)+$+z,Z){const D=W,S=F;this.add(Q,z,B,S1(D,{...S,error:!S.error?J.event.error:Array.isArray(S.error)?[...S.error,...J.event.error]:[S.error,...J.event.error]}))}else this.add(Q,z,B,S1(F,{error:J.event.error}),{skipPrefix:!0})}),this}guard($,W){if(!W)return this.event=s$(this.event,$),this.validator={body:$.body,headers:$.headers,params:$.params,query:$.query,response:$.response},this;const Y=new I$({...this.config,prefix:""});Y.store=this.store,Y.definitions=this.definitions;const X=W(Y);if(this.decorators=F1(this.decorators,Y.decorators),X.event.request.length)this.event.request=[...this.event.request,...X.event.request];if(X.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...X.event.onResponse];return this.model(X.definitions.type),Object.values(Y.routes).forEach(({method:Z,path:J,handler:Q,hooks:z})=>{this.add(Z,J,Q,S1($,{...z,error:!z.error?X.event.error:Array.isArray(z.error)?[...z.error,...X.event.error]:[z.error,...X.event.error]}))}),this}use($){if($ instanceof Promise)return this.lazyLoadModules.push($.then((W)=>{if(typeof W==="function")return W(this);if(typeof W.default==="function")return W.default(this);return this._use(W)}).then((W)=>W.compile())),this;else return this._use($);return this}_use($){if(typeof $==="function"){const Z=$(this);if(Z instanceof Promise)return this.lazyLoadModules.push(Z.then((J)=>{if(J instanceof I$){this.compile();for(let{method:Q,path:z,handler:B,hooks:F}of Object.values(J.routes))this.add(Q,z,B,S1(F,{error:J.event.error}));return J}if(typeof J==="function")return J(this);if(typeof J.default==="function")return J.default(this);return this._use(J)}).then((J)=>J.compile())),this;return Z}const{name:W,seed:Y}=$.config;$.getServer=()=>this.getServer();const X=$.config.scoped;if(X){if(W){if(!(W in this.dependencies))this.dependencies[W]=[];const J=Y!==void 0?P8(W+JSON.stringify(Y)):0;if(this.dependencies[W].some((Q)=>J===Q))return this;this.dependencies[W].push(J)}if($.model(this.definitions.type),$.error(this.definitions.error),$.onRequest((J)=>{Object.assign(J,this.decorators),Object.assign(J.store,this.store)}),$.event.trace=[...this.event.trace,...$.event.trace],$.config.aot)$.compile();const Z=this.mount($.fetch);return this.routes=this.routes.concat(Z.routes),this}else{$.reporter=this.reporter;for(let Z of $.event.trace)this.trace(Z)}this.decorate($.decorators),this.state($.store),this.model($.definitions.type),this.error($.definitions.error);for(let{method:Z,path:J,handler:Q,hooks:z}of Object.values($.routes))this.add(Z,J,Q,S1(z,{error:$.event.error}));if(!X)if(W){if(!(W in this.dependencies))this.dependencies[W]=[];const Z=Y!==void 0?P8(W+JSON.stringify(Y)):0;if(this.dependencies[W].some((J)=>Z===J))return this;this.dependencies[W].push(Z),this.event=s$(this.event,O8($.event),Z)}else this.event=s$(this.event,O8($.event));return this}mount($,W){if(typeof $==="function"||$.length===0||$==="/"){const Z=typeof $==="function"?$:W,J=async({request:Q,path:z})=>Z(new Request(j8(Q.url,z||"/"),Q));return this.all("/",J,{type:"none"}),this.all("/*",J,{type:"none"}),this}const Y=$.length,X=async({request:Z,path:J})=>W(new Request(j8(Z.url,J.slice(Y)||"/"),Z));return this.all($,X,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),X,{type:"none"}),this}get($,W,Y){return this.add("GET",$,W,Y),this}post($,W,Y){return this.add("POST",$,W,Y),this}put($,W,Y){return this.add("PUT",$,W,Y),this}patch($,W,Y){return this.add("PATCH",$,W,Y),this}delete($,W,Y){return this.add("DELETE",$,W,Y),this}options($,W,Y){return this.add("OPTIONS",$,W,Y),this}all($,W,Y){return this.add("ALL",$,W,Y),this}head($,W,Y){return this.add("HEAD",$,W,Y),this}connect($,W,Y){return this.add("CONNECT",$,W,Y),this}ws($,W){const Y=W.transformMessage?Array.isArray(W.transformMessage)?W.transformMessage:[W.transformMessage]:void 0;let X=null;const Z=Q1(W?.body,{models:this.definitions.type}),J=Q1(W?.response,{models:this.definitions.type}),Q=(z)=>{if(typeof z==="string"){const B=z?.charCodeAt(0);if(B===47||B===123)try{z=JSON.parse(z)}catch{}else if(!Number.isNaN(+z))z=+z}if(Y?.length)for(let B=0;B<Y.length;B++){const F=Y[B](z);if(F!==void 0)z=F}return z};return this.route("$INTERNALWS",$,(z)=>{const{set:B,path:F,qi:D,headers:S,query:b,params:j}=z;if(X===null)X=this.getServer();if(X?.upgrade(z.request,{headers:typeof W.upgrade==="function"?W.upgrade(z):W.upgrade,data:{validator:J,open(M){W.open?.(new a1(M,z))},message:(M,P)=>{const O=Q(P);if(Z?.Check(O)===!1)return void M.send(new B0("message",Z,O).message);W.message?.(new a1(M,z),O)},drain(M){W.drain?.(new a1(M,z))},close(M,P,O){W.close?.(new a1(M,z),P,O)}}}))return;return B.status=400,"Expected a websocket connection"},{beforeHandle:W.beforeHandle,transform:W.transform,headers:W.headers,params:W.params,query:W.query}),this}route($,W,Y,{config:X,...Z}={config:{allowMeta:!1}}){return this.add($,W,Y,Z,X),this}state($,W){switch(typeof $){case"object":return this.store=F1(this.store,$),this;case"function":return this.store=$(this.store),this}if(!($ in this.store))this.store[$]=W;return this}decorate($,W){switch(typeof $){case"object":return this.decorators=F1(this.decorators,$),this;case"function":return this.decorators=$(this.decorators),this}if(!($ in this.decorators))this.decorators[$]=W;return this}derive($){return $.$elysia="derive",this.onTransform($)}model($,W){switch(typeof $){case"object":return Object.entries($).forEach(([Y,X])=>{if(!(Y in this.definitions.type))this.definitions.type[Y]=X}),this;case"function":return this.definitions.type=$(this.definitions.type),this}return this.definitions.type[$]=W,this}mapDerive($){return $.$elysia="derive",this.onTransform($)}affix($,W,Y){if(Y==="")return this;const X=["_","-"," "],Z=(B)=>B[0].toUpperCase()+B.slice(1),J=$==="prefix"?(B,F)=>X.includes(B.at(-1)??"")?B+F:B+Z(F):X.includes(Y.at(-1)??"")?(B,F)=>F+B:(B,F)=>F+Z(B),Q=(B)=>{const F={};switch(B){case"decorator":for(let D in this.decorators)F[J(Y,D)]=this.decorators[D];this.decorators=F;break;case"state":for(let D in this.store)F[J(Y,D)]=this.store[D];this.store=F;break;case"model":for(let D in this.definitions.type)F[J(Y,D)]=this.definitions.type[D];this.definitions.type=F;break;case"error":for(let D in this.definitions.error)F[J(Y,D)]=this.definitions.error[D];this.definitions.error=F;break}},z=Array.isArray(W)?W:[W];for(let B of z.some((F)=>F==="all")?["decorator","state","model","error"]:z)Q(B);return this}prefix($,W){return this.affix("prefix",$,W)}suffix($,W){return this.affix("suffix",$,W)}compile(){if(this.fetch=this.config.aot?G8(this):E8(this),typeof this.server?.reload==="function")this.server.reload({...this.server,fetch:this.fetch});return this}handle=async($)=>this.fetch($);fetch=($)=>(this.fetch=this.config.aot?G8(this):E8(this))($);handleError=async($,W)=>(this.handleError=this.config.aot?_8(this):$X(this))($,W);outerErrorHandler=($)=>new Response($.message||$.name||"Error",{status:$?.status??500});listen=($,W)=>{if(!Bun)throw new Error("Bun to run");if(this.compile(),typeof $==="string"){if($=+$.trim(),Number.isNaN($))throw new Error("Port must be a numeric value")}const Y=this.fetch,X=typeof $==="object"?{development:!s1,...this.config.serve,...$,websocket:{...this.config.websocket,...N8},fetch:Y,error:this.outerErrorHandler}:{development:!s1,...this.config.serve,websocket:{...this.config.websocket,...N8},port:$,fetch:Y,error:this.outerErrorHandler};if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.server=Bun?.serve(X),this.event.start.length)(async()=>{const Z=Object.assign(this.decorators,{store:this.store,app:this});for(let J=0;J<this.event.transform.length;J++){const Q=this.event.transform[J](Z);if(this.event.transform[J].$elysia==="derive")if(Q instanceof Promise)Object.assign(Z,await Q);else Object.assign(Z,Q)}for(let J=0;J<this.event.start.length;J++)this.event.start[J](Z)})();if(W)W(this.server);return Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!1)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server.stop(),this.event.stop.length)(async()=>{const $=Object.assign(this.decorators,{store:this.store,app:this});for(let W=0;W<this.event.transform.length;W++){const Y=this.event.transform[W]($);if(this.event.transform[W].$elysia==="derive")if(Y instanceof Promise)Object.assign($,await Y);else Object.assign($,Y)}for(let W=0;W<this.event.stop.length;W++)this.event.stop[W]($)})()};get modules(){return Promise.all(this.lazyLoadModules)}}var export_t=$0.Type;export{export_t as t,R0 as mergeObjectArray,S1 as mergeHook,F1 as mergeDeep,D1 as mapResponse,e0 as mapEarlyResponse,L1 as mapCompactResponse,Q1 as getSchemaValidator,K8 as getResponseSchemaValidator,I$ as default,B0 as ValidationError,q8 as ParseError,O1 as NotFoundError,r1 as InvalidCookieSignature,w$ as InternalServerError,I$ as Elysia,a0 as Cookie};

//# debugId=349F20B241627E0764756e2164756e21
